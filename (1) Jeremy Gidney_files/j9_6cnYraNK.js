if (self.CavalryLogger) { CavalryLogger.start_js(["dKQcz"]); }

__d("UFICommentTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:UFICommentLoggerConfig",this.$UFICommentTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:UFICommentLoggerConfig",this.$UFICommentTypedLogger1,c("Banzai").VITAL)};h.prototype.clear=function(){this.$UFICommentTypedLogger1={};return this};h.prototype.updateData=function(j){this.$UFICommentTypedLogger1=babelHelpers["extends"]({},this.$UFICommentTypedLogger1,j);return this};h.prototype.setDuration=function(j){this.$UFICommentTypedLogger1.duration=j;return this};h.prototype.setEvent=function(j){this.$UFICommentTypedLogger1.event=j;return this};h.prototype.setHasPhoto=function(j){this.$UFICommentTypedLogger1.has_photo=j;return this};h.prototype.setHasSticker=function(j){this.$UFICommentTypedLogger1.has_sticker=j;return this};h.prototype.setIsReply=function(j){this.$UFICommentTypedLogger1.is_reply=j;return this};h.prototype.setRequestLength=function(j){this.$UFICommentTypedLogger1.request_length=j;return this};h.prototype.setVC=function(j){this.$UFICommentTypedLogger1.vc=j;return this};var i={duration:true,event:true,has_photo:true,has_sticker:true,is_reply:true,request_length:true,vc:true};f.exports=h}),null);
__d("UFICommentLogger",["UFICommentTypedLogger"],(function a(b,c,d,e,f,g){"use strict";function h(){this.$UFICommentLogger1={};this.$UFICommentLogger2={}}h.prototype.logNewCommentPost=function(i,j,k){this.$UFICommentLogger2[i]=babelHelpers["extends"]({timestamp:j},k);new(c("UFICommentTypedLogger"))().setEvent("new_comment_post").setHasPhoto(k.has_photo).setHasSticker(k.has_sticker).setIsReply(k.is_reply).log()};h.prototype.logNewCommentReceived=function(i,j){var k=this.$UFICommentLogger2[i];if(k){var l=0;if(j&&k.timestamp)l=j-k.timestamp;new(c("UFICommentTypedLogger"))().setEvent("new_comment_received").setDuration(l).setHasPhoto(k.has_photo).setHasSticker(k.has_sticker).setIsReply(k.is_reply).log()}delete this.$UFICommentLogger2[i]};h.prototype.logCommentFetch=function(i,j,k){var l=babelHelpers["extends"]({timestamp:j},k);if(this.$UFICommentLogger1[i]===undefined)this.$UFICommentLogger1[i]=[l];else this.$UFICommentLogger1[i].push(l);new(c("UFICommentTypedLogger"))().setEvent("fetch_comment").setIsReply(k.is_reply).setRequestLength(k.request_length).log()};h.prototype.logCommentFetchReceived=function(i,j){if(this.$UFICommentLogger1[i]){var k=this.$UFICommentLogger1[i].shift(),l=0;if(j&&k.timestamp)l=j-k.timestamp;new(c("UFICommentTypedLogger"))().setEvent("fetch_comment_received").setDuration(l).setIsReply(k.is_reply).setRequestLength(k.request_length).log();if(this.$UFICommentLogger1[i].length===0)delete this.$UFICommentLogger1[i]}};f.exports=new h()}),null);
__d("FeedbackActionType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CHANGE_ACCEPTED_ANSWER:"fa-type:change-accepted-answer",COMMENT_LIKE:"fa-type:comment-like",COMMENT_REACTION:"fa-type:comment-reaction",COMMENT_SET_SPAM:"fa-type:mark-spam",COMMENT_KEEP_SPAM:"fa-type:keep_spam",COMMENT_APPEAL_SPAM:"fa-type:appeal_spam",COMMENT_SECURE_ACCOUNT:"fa-type:secure_account",DELETE_COMMENT:"fa-type:delete-comment",DELETE_COMMENT_REMOVE_COMMENTER:"fa-type:delete_comment_remove_commenter",DISABLE_COMMENTS:"fa-type:disable-comments",LIVE_DELETE_COMMENT:"fa-type:live-delete-comment",LIKE_ACTION:"fa-type:like",SUBSCRIBE_ACTION:"fa-type:subscribe",REMOVE_PREVIEW:"fa-type:remove-preview",MARK_COMMENT_SPAM:"fa-type:mark-spam",MUTE_MEMBER:"fa-type:mute-member",CONFIRM_COMMENT_REMOVAL:"fa-type:confirm-remove",TRANSLATE_COMMENT:"fa-type:translate-comment",TRANSLATE_ALL:"fa-type:translate-all-comments",COMMENT_LIKECOUNT_UPDATE:"fa-type:comment-likecount-update",ADD_COMMENT_ACTION:"fa-type:add-comment",REACTION:"fa-type:reaction",UPDATE_CONSTITUENT_BADGE:"fa-type:comment_update_constituent_title"})}),null);
__d("FeedbackPayloadSourceType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({UNKNOWN:0,INITIAL_SERVER:1,LIVE_SEND:2,USER_ACTION:3,STREAMING:4,COLLAPSE_ACTION:7,ENDPOINT_LIKE:10,ENDPOINT_COMMENT_LIKE:11,ENDPOINT_ADD_COMMENT:12,ENDPOINT_EDIT_COMMENT:13,ENDPOINT_DELETE_COMMENT:14,ENDPOINT_HIDE_COMMENT:16,ENDPOINT_REMOVE_PREVIEW:17,ENDPOINT_ID_COMMENT_FETCH:18,ENDPOINT_COMMENT_FETCH:19,ENDPOINT_TRANSLATE_COMMENT:20,ENDPOINT_BAN:21,ENDPOINT_SUBSCRIBE:22,ENDPOINT_COMMENT_LIKECOUNT_UPDATE:23,ENDPOINT_DISABLE_COMMENTS:24,ENDPOINT_ACTOR_CHANGE:25,ENDPOINT_REACTION:26,ENDPOINT_PAGES_MODERATION:27,ENDPOINT_COMMENT_REACTION:28,ENDPOINT_COMMENT_ANSWER_ACCEPT:29,ENDPOINT_COMMENT_KEEP_SPAM:30,ENDPOINT_COMMENT_APPEAL_SPAM:31,ENDPOINT_COMMENT_SECURE_ACCOUNT:32,ENDPOINT_DELETE_COMMENT_AND_REMOVE_COMMENTER:33,ENTPOINT_MUTE_MEMBER:34,ENDPOINT_SUBSCRIBE_COMMENT:35,ENDPOINT_HIDE_TEXT_DELIGHTS:36,ENDPOINT_SEND_MESSAGE:36})}),null);
__d("FeedbackSourceType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({PROFILE:0,NEWS_FEED:1,OBJECT:2,MOBILE:3,EMAIL:4,PROFILE_APPROVAL:10,TICKER:12,NONE:13,INTERN:14,ADS:15,EVENT_GOING_FLYOUT:16,PHOTOS_SNOWLIFT:17,PHOTOS_SNOWFLAKE:20,USER_TIMELINE:21,PAGE_TIMELINE:22,SEARCH:23,PAGE_TAB:24,TIMELINE_COLLECTION:25,ON_THIS_DAY:27,INLINE_COMMENT:28,VIDEOS_CHANNEL:29,PRODUCT_DETAILS:30,NEWSFEED_GROUP_TOP_STORIES:31,LIVE_MAP:32,REDSPACE:33,EVENT_MALL:34,LIVE_VIDEO:35,QUICKSILVER_SPOTLIGHT:36,GROUP_COMMERCE_BOOKMARK:37,WATCH_AND_SCROLL:38,LIVE_WWW_BROADCASTING:39,COMPACT_SEARCH:40,TAHOE:41,GOV_DIGEST:42,GAMEROOM_FEED:43,PAGE_VIDEO_TAB:44,VIDEO_HOME_AFTER_PARTY:45,LIVE_VIDEO_STORIES:46,GAME_HUB_FEED:47,EMBEDED_VIDEO:48,LIVING_ROOM:49})}),null);
__d("UFIFeedbackMode",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({EXPANDED:"expanded",NONE:"none",NEVER:"never",TOGGLE:"toggle"})}),null);
__d("UFIPaging",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({TOP:"top",BOTTOM:"bottom",ALL:"all"})}),null);
__d("UFIStatus",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({DELETED:"status:deleted",SPAM:"status:spam",SPAM_DISPLAY:"status:spam-display",LIVE_DELETED:"status:live-deleted",FAILED_ADD:"status:failed-add",FAILED_EDIT:"status:failed-edit",PENDING_EDIT:"status:pending-edit"})}),null);
__d("UFIConstants",["FeedbackActionType","UFIFeedbackMode","FeedbackSourceType","FeedbackPayloadSourceType","UFIStatus","UFIPaging"],(function a(b,c,d,e,f,g){"use strict";var h=80,i={UFIActionType:c("FeedbackActionType"),UFIFeedbackMode:c("UFIFeedbackMode"),UFIFeedbackSourceType:c("FeedbackSourceType"),UFIPayloadSourceType:c("FeedbackPayloadSourceType"),UFIStatus:c("UFIStatus"),UFIPaging:c("UFIPaging"),attachmentTruncationLength:h,commentTruncationLength:420,commentTruncationMaxLines:3,commentTruncationPercent:.6,commentURLTruncationLength:60,infiniteScrollRangeForQANDAPermalinks:1e3,minCommentsForOrderingModeSelector:1,unavailableCommentKey:"unavailable_comment_key"};f.exports=i}),null);
__d("UFICommentActionType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CHANGE_REACTION:"comment_change_reaction",CHANGE_REACTION_FAILURE:"comment_change_reaction_failure",CHANGE_REACTION_SUCCESS:"comment_change_reaction_success",CHANGE_VISIBILITY:"comment_change_visibility",EDIT:"comment_edit",EMBED:"embed",DELETE_COMMENT_AND_REMOVE_COMMENTER:"comment_delete_and_commenter_remove",MANAGE_CONSTITUENT_BADGE:"comment_manage_constituent_badge",MOUNTED:"comment_mounted",MUTE_MEMBER:"commenter_muted",REMOVE:"comment_remove",REMOVE_PREVIEW:"comment_remove_preview",TOGGLE_INLINE_BAN:"comment_toggle_inline_ban",TOGGLE_LIKE:"comment_toggle_like",TOGGLE_MARK_AS_SPAM:"comment_toggle_mark_as_spam",TOGGLE_KEEP_SPAM:"comment_toggle_keep_spam",TOGGLE_APPEAL_SPAM:"comment_toggle_appeal_spam",TOGGLE_SECURE_ACCOUNT:"comment_toggle_secure_account",TOGGLE_TEXT_DELIGHTS:"comment_toggle_text_delights",TRANSLATE:"comment_translate",TRANSLATE_ARRAY:"comment_translate_array",UNMOUNTED:"comment_unmounted"})}),null);
__d("UFIDispatcherBase",["invariant","ReactDispatcher_DEPRECATED","UFICommentActionType","dangerouslyBypassDispatchError"],(function a(b,c,d,e,f,g,h){"use strict";var i,j;function k(n,o){return Object.values(o).indexOf(n)>=0}function l(n,o,p){n[o]||h(0)}i=babelHelpers.inherits(m,c("ReactDispatcher_DEPRECATED"));j=i&&i.prototype;m.prototype.dispatch=function(n){l(n,"instanceID","contextArgs.instanceid");l(n,"ftentidentifier","contextArgs.ftentidentifier");if(k(n.type,c("UFICommentActionType")))l(n,"fbid","comment.fbid");try{j.dispatch.call(this,n)}catch(o){c("dangerouslyBypassDispatchError")(function(){return j.dispatch.call(this,n)}.bind(this))}};function m(){i.apply(this,arguments)}f.exports=new m()}),null);
__d("UFIRootRegistry",[],(function a(b,c,d,e,f,g){"use strict";var h={},i={},j={},k=[],l={registerController:function m(n,o,p,q){h[n]=q;i[p]=[].concat(i[p]||[],[o]);j[o]=p},registerSnowliftID:function m(n){k.push(n)},isSnowliftNode:function m(n){return k.indexOf(n)>=0},getInstanceIDFromFTEntIdentifier:function m(n){return i[n]||null},getFTEntIdentifierFromInstanceID:function m(n){return j[n]||null},cleanupInstance:function m(n){var o=j[n],p=i[o];if(p&&p.includes(n)){i[o]=p.filter(function(q){return q!=n});if(i[o].length==0)delete i[o]}delete j[n]},cleanupSnowliftNodes:function m(){k.forEach(function(n){return h[n]&&h[n]()});h={};k=[]}};f.exports=l}),null);
__d("UFIStoryActionType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CHANGE_ACCEPTED_ANSWER:"story_change_accepted_answer",COMMENTS_ARRIVED:"story_comments_arrived",PAGE_IN_COMMENTS:"story_page_in_comments",SHOW_REPLIES:"story_show_replies",SHOW_COMMENTS:"story_show_comments",SPAM_FETCHED:"story_spam_fetched",CHANGE_REACTION:"story_change_reaction",CHANGE_REACTION_FAILURE:"story_change_reaction_failure",CHANGE_REACTION_SUCCESS:"story_change_reaction_success",TOGGLE_REPLIES:"story_toggle_replies",FRIEND_TYPING:"story_friend_typing",SOMEONE_TYPING:"story_someone_typing",TYPING_STOPPED:"story_typing_stopped",LIVE_PIN_COMMENT:"story_live_pin_comment",LIVE_UNPIN_COMMENT:"story_live_unpin_comment"})}),null);
__d("UFIAcceptedAnswerStore",["FluxReduceStore","UFIDispatcherBase","UFIStoryActionType"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("FluxReduceStore"));i=h&&h.prototype;j.prototype.getInitialState=function(){return{}};j.prototype.reduce=function(k,l){var m;switch(l.type){case c("UFIStoryActionType").CHANGE_ACCEPTED_ANSWER:return babelHelpers["extends"]({},k,(m={},m[l.comment.ftentidentifier]=l.doAccept?{type:"Accepted",id:l.comment.id}:{type:"NoneAccepted"},m));default:return k}};j.prototype.get=function(k,l){var m=this.getState()[k];if(m)return m;return l?{type:"Accepted",id:l}:{type:"NoneAccepted"}};function j(){h.apply(this,arguments)}f.exports=new j(c("UFIDispatcherBase"))}),null);
__d("UFIAddCommentActionType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CANCEL:"add_comment_cancel",CHANGE_CONTENT:"add_comment_change_content",RETRY_SUBMIT:"add_comment_retry_submit",SUBMIT_EDIT:"add_comment_submit_edit",SUBMIT_NEW:"add_comment_submit_new",PIVOT_SEND_MESSAGE:"pivot_send_message"})}),null);
__d("UFICentralUpdates",["Arbiter","BanzaiODS","LiveTimer","ShortProfiles","UFIConstants"],(function a(b,c,d,e,f,g){"use strict";c("BanzaiODS").setEntitySample("feedback",1e-4);var h=0,i={},j={},k=[];function l(){if(!h){var p=i,q=j;i={};j={};if(Object.keys(p).length)n("feedback-updated",p);if(Object.keys(q).length)n("comments-updated",q);k.pop()}}function m(){if(k.length)return k[k.length-1];else return c("UFIConstants").UFIPayloadSourceType.UNKNOWN}function n(event,p){o.inform(event,{updates:p,payloadSource:m()})}var o=Object.assign(new(c("Arbiter"))(),{handleUpdate:function p(q,r){if(Object.keys(r).length)this.synchronizeInforms(function(){k.push(q);var s=babelHelpers["extends"]({payloadsource:m()},r);this.inform("update-feedback",s);this.inform("update-comment-lists",s);this.inform("update-comments",s);this.inform("update-actions",s);c("ShortProfiles").setMulti(r.profiles||{});if(r.servertime)c("LiveTimer").restart(r.servertime)}.bind(this))},didUpdateFeedback:function p(q){i[q]=true;l()},didUpdateComment:function p(q){j[q]=true;l()},synchronizeInforms:function p(q){h++;try{q()}catch(r){throw r}finally{h--;l()}}});f.exports=o}),18);
__d("UFICommentEditIDStore",["FluxReduceStore","UFIAddCommentActionType","UFICentralUpdates","UFICommentActionType","UFIDispatcherBase"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("FluxReduceStore"));i=h&&h.prototype;function j(k){i.constructor.call(this,k);c("UFICentralUpdates").subscribe("actor-changed",function(l,m){c("UFIDispatcherBase").dispatch({type:"PRIVATE_ACTOR_CHANGED",instanceID:true,ftentidentifier:true})})}j.prototype.getInitialState=function(){return{}};j.prototype.getForInstance=function(k){return this.getState()[k]||null};j.prototype.reduce=function(k,l){var m;switch(l.type){case"PRIVATE_ACTOR_CHANGED":return{};case c("UFIAddCommentActionType").CANCEL:case c("UFIAddCommentActionType").SUBMIT_EDIT:var n=k[l.instanceID],o=babelHelpers.objectWithoutProperties(k,[l.instanceID]);return o;case c("UFICommentActionType").EDIT:return babelHelpers["extends"]({},k,(m={},m[l.instanceID]=l.comment.id,m))}return k};f.exports=new j(c("UFIDispatcherBase"))}),null);
__d("CommentApprovalsResponsibleUserAction",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({APPEALED:"APPEALED",SECURED_ACCOUNT:"SECURED_ACCOUNT"})}),null);
__d("LiveWWWFeedbackTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:LiveWWWFeedbackLoggerConfig",this.$LiveWWWFeedbackTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:LiveWWWFeedbackLoggerConfig",this.$LiveWWWFeedbackTypedLogger1,c("Banzai").VITAL)};h.prototype.clear=function(){this.$LiveWWWFeedbackTypedLogger1={};return this};h.prototype.updateData=function(j){this.$LiveWWWFeedbackTypedLogger1=babelHelpers["extends"]({},this.$LiveWWWFeedbackTypedLogger1,j);return this};h.prototype.setCommentID=function(j){this.$LiveWWWFeedbackTypedLogger1.comment_id=j;return this};h.prototype.setEvent=function(j){this.$LiveWWWFeedbackTypedLogger1.event=j;return this};h.prototype.setIsMSite=function(j){this.$LiveWWWFeedbackTypedLogger1.is_m_site=j;return this};h.prototype.setMechanism=function(j){this.$LiveWWWFeedbackTypedLogger1.mechanism=j;return this};h.prototype.setOriginatedLocally=function(j){this.$LiveWWWFeedbackTypedLogger1.originated_locally=j;return this};h.prototype.setRecipientID=function(j){this.$LiveWWWFeedbackTypedLogger1.recipient_id=j;return this};h.prototype.setTimeSinceSub=function(j){this.$LiveWWWFeedbackTypedLogger1.time_since_sub=j;return this};h.prototype.setUpdateType=function(j){this.$LiveWWWFeedbackTypedLogger1.update_type=j;return this};h.prototype.setVC=function(j){this.$LiveWWWFeedbackTypedLogger1.vc=j;return this};var i={comment_id:true,event:true,is_m_site:true,mechanism:true,originated_locally:true,recipient_id:true,time_since_sub:true,update_type:true,vc:true};f.exports=h}),null);
__d("UFIComments",["invariant","ClientIDs","CommentApprovalsResponsibleUserAction","ImmutableObject","LiveWWWFeedbackTypedLogger","UFICentralUpdates","UFIConstants","randomInt"],(function a(b,c,d,e,f,g,h){"use strict";var i={},j={},k={};function l(H){return H in j?j[H]:H}function m(H,I){H.forEach(function(J){var K=J.ftentidentifier,L=c("UFIConstants").UFIPayloadSourceType,M=J.clientid,N=false,O=babelHelpers["extends"]({},J);if(M){delete O.clientid;N=c("ClientIDs").isExistingClientID(M);if(N&&j[M]){new(c("LiveWWWFeedbackTypedLogger"))().setEvent("update_view").setUpdateType("comment").setOriginatedLocally(true).setCommentID(J.id).log();return}}if(I===L.LIVE_SEND||I===c("UFIConstants").UFIPayloadSourceType.STREAMING||I===L.USER_ACTION||I===L.ENDPOINT_ADD_COMMENT||I===L.ENDPOINT_EDIT_COMMENT)O.isunseen=true;if(I===c("UFIConstants").UFIPayloadSourceType.LIVE_SEND||I===c("UFIConstants").UFIPayloadSourceType.STREAMING)O.islive=true;if(I===L.ENDPOINT_COMMENT_FETCH||I===L.ENDPOINT_ID_COMMENT_FETCH)O.fromfetch=true;if(N&&i[M]){O.ufiinstanceid=i[M].ufiinstanceid;j[M]=J.id;k[J.id]=M;i[J.id]=i[M];delete i[M];c("UFICentralUpdates").didUpdateComment(M)}G.setComment(J.id,new(c("ImmutableObject"))(O));c("UFICentralUpdates").didUpdateComment(J.id);c("UFICentralUpdates").didUpdateFeedback(K)})}function n(H,I){for(var J=0;J<H.length;J++){var K=H[J];switch(K.actiontype){case c("UFIConstants").UFIActionType.LIKE_ACTION:if(G.getComment(K.entidentifier))o(K.clientid,K.entidentifier,K.hasviewerliked,K.likecount,K.reactiondata,I);break;case c("UFIConstants").UFIActionType.COMMENT_LIKE:o(K.clientid,K.commentid,K.viewerliked,K.likecount,K.reactiondata,I);break;case c("UFIConstants").UFIActionType.MUTE_MEMBER:p(K);break;case c("UFIConstants").UFIActionType.REACTION:if(G.getComment(K.entidentifier))q(K.entidentifier,K);break;case c("UFIConstants").UFIActionType.COMMENT_REACTION:q(K.commentid,K);break;case c("UFIConstants").UFIActionType.DELETE_COMMENT:u(K);break;case c("UFIConstants").UFIActionType.LIVE_DELETE_COMMENT:v(K);break;case c("UFIConstants").UFIActionType.CHANGE_ACCEPTED_ANSWER:w(K);break;case c("UFIConstants").UFIActionType.REMOVE_PREVIEW:x(K);break;case c("UFIConstants").UFIActionType.COMMENT_SET_SPAM:y(K);break;case c("UFIConstants").UFIActionType.COMMENT_KEEP_SPAM:z(K);break;case c("UFIConstants").UFIActionType.COMMENT_APPEAL_SPAM:A(K);break;case c("UFIConstants").UFIActionType.COMMENT_SECURE_ACCOUNT:B(K);break;case c("UFIConstants").UFIActionType.CONFIRM_COMMENT_REMOVAL:C(K);break;case c("UFIConstants").UFIActionType.TRANSLATE_COMMENT:s(K);break;case c("UFIConstants").UFIActionType.COMMENT_LIKECOUNT_UPDATE:r(K);break;case c("UFIConstants").UFIActionType.UPDATE_CONSTITUENT_TITLE:E(K);break}}}function o(H,I,J,K,L,M){var N=G.getComment(I);if(N){var O={},P=H&&c("ClientIDs").isExistingClientID(H);if(!P){O.hasviewerliked=J;O.likecount=K;if(L){O.reactioncount=L.reactioncount;O.reactioncountmap=L.reactioncountmap;O.reactioncountreduced=L.reactioncountreduced;O.viewerreaction=L.viewerreaction}}if(M===c("UFIConstants").UFIPayloadSourceType.LIVE_SEND||M===c("UFIConstants").UFIPayloadSourceType.STREAMING)new(c("LiveWWWFeedbackTypedLogger"))().setEvent("update_view").setUpdateType("comment_like").setOriginatedLocally(Boolean(P)).setCommentID(I).log();O.likeconfirmhash=c("randomInt")(0,1024);F(I,O)}}function p(H){for(var I in i){var J=i[I];if(J.author===H.authorid){var K={};K.ismuted=H.shouldmute;F(I,K)}}}function q(H,I){var J=G.getComment(H);if(J){var K={};if(I.clientid&&c("ClientIDs").isExistingClientID(I.clientid)&&I.viewerreaction!==J.viewerreaction)return;K.hasviewerliked=I.hasviewerliked;K.likecount=I.likecount;K.reactioncount=I.reactioncount;K.reactioncountmap=I.reactioncountmap;K.reactioncountreduced=I.reactioncountreduced;K.viewerreaction=I.viewerreaction;F(H,K)}}function r(H){var I=G.getComment(H.commentid);if(I&&H.hasviewerliked===I.hasviewerliked){var J={likecount:H.likecount,likeconfirmhash:c("randomInt")(0,1024)};F(H.commentid,J)}}function s(H){var I=H.commentid,J=G.getComment(I);if(J){var K={translationdata:H.translationdata};F(I,K)}}function t(H){var I={reportLink:H.reportLink,commenterIsFOF:H.commenterIsFOF,userIsMinor:H.userIsMinor,giveFeedbackLink:H.giveFeedbackLink,reportOptionsLink:H.reportOptionsLink};return I}function u(H){var I=G.getComment(H.commentid);if(I)D(I,c("UFIConstants").UFIStatus.DELETED)}function v(H){var I=G.getComment(H.commentid);if(I&&I.status!==c("UFIConstants").UFIStatus.DELETED)D(I,c("UFIConstants").UFIStatus.LIVE_DELETED)}function w(H){F(H.commentid,{postacceptedanswer:H.isaccepted?H.commentid:null})}function x(H){F(H.commentid,{attachment:null})}function y(H){var I=G.getComment(H.commentid),J=H.shouldHideAsSpam?c("UFIConstants").UFIStatus.SPAM_DISPLAY:null;if(I)D(I,J)}function z(H){var I=G.getComment(H.commentid);if(I)F(I.id,{needsApproval:false,isApproved:true})}function A(H){var I=G.getComment(H.commentid);if(I)F(I.id,{appealStatus:c("CommentApprovalsResponsibleUserAction").APPEALED,canAppeal:false,canSecure:false})}function B(H){var I=G.getComment(H.commentid);if(I)F(I.id,{appealStatus:c("CommentApprovalsResponsibleUserAction").SECURED_ACCOUNT,canAppeal:false,canSecure:false})}function C(H){F(H.commentid,t(H))}function D(H,I){F(H.id,{priorstatus:H.status,status:I})}function E(H){var I=G.getComment(H.commentid);if(I){var J={constituentTitle:H.constituentTitle,hasConstituentBadge:H.hasConstituentBadge};F(H.commentid,J)}}function F(H,I){var J=G.getComment(H)||new(c("ImmutableObject"))({});G.setComment(H,c("ImmutableObject").set(J,I));c("UFICentralUpdates").didUpdateComment(J.id);c("UFICentralUpdates").didUpdateFeedback(J.ftentidentifier)}var G={getRenderKey:function H(I){return"comment"+(I in k?k[I]:I)},getComment:function H(I){if(I===c("UFIConstants").unavailableCommentKey)return null;return i[l(I)]},setComment:function H(I,J){J instanceof c("ImmutableObject")||h(0);i[l(I)]=J},resetComments:function H(I){for(var J in I)delete i[l(J)]},getCommentsForFTEntIdentifier:function H(I){var J=[];for(var K in i){var L=i[K];if(L.ftentidentifier==I)J.push(L)}return J}};c("UFICentralUpdates").subscribe("update-comments",function(H,I){if(I.comments&&I.comments.length)m(I.comments,I.payloadsource);if(I.pinnedcomments&&I.pinnedcomments.length)m(I.pinnedcomments,I.payloadsource)});c("UFICentralUpdates").subscribe("update-actions",function(H,I){if(I.actions&&I.actions.length)n(I.actions,I.payloadsource)});f.exports=G}),22);
__d("UFIInstanceActionType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CHANGE_ORDER_MODE:"story_change_order_mode",CHANGE_VISIBILITY:"story_change_visibility",INIT:"instance_init",PLAY_LIVE_VOD_HIGHLIGHTS:"play_live_vod_highlights",RECEIVED_VOD_COMMENTS:"received_vod_comments",REMOVE:"story_remove",REQUESTED_VOD_COMMENTS:"requested_vod_comments",TOGGLE_COMMENTS:"story_toggle_comments",TOGGLE_COMMERCIAL_BREAK:"story_toggle_commercial_break",TRANSLATE_ALL:"translate_all"})}),null);
__d("UFIFeedbackMutator",["ClientIDs","LiveWWWFeedbackTypedLogger","UFIConstants","UFIReactionTypes","emptyFunction"],(function a(b,c,d,e,f,g){"use strict";var h=c("UFIConstants").UFIActionType,i=c("UFIConstants").UFIPayloadSourceType,j={getHandlerForAction:function k(l){var m;return(m={},m[h.LIKE_ACTION]=j.handleLike,m[h.SUBSCRIBE_ACTION]=j.handleSubscribe,m[h.DISABLE_COMMENTS]=j.handleCommentsDisabled,m[h.REACTION]=j.handleReaction,m[h.UPDATE_CONSTITUENT_TITLE]=j.handleUpdateConstituentTitle,m)[l.actiontype]||c("emptyFunction")},handleLike:function k(l,m,n){var o=m.clientid&&c("ClientIDs").isExistingClientID(m.clientid);if(n===i.LIVE_SEND||n===i.STREAMING)new(c("LiveWWWFeedbackTypedLogger"))().updateData({event:"update_view",update_type:"like",originated_locally:Boolean(o)}).log();if(o&&m.hasviewerliked!=l.hasviewerliked)return null;l.likecount=m.likecount;l.likesentences=m.likesentences;if(m.actorid==l.actorforpost)l.hasviewerliked=m.hasviewerliked;else{l.likesentences.isunseen=true;if(m.hasviewerliked!=l.hasviewerliked){l.likecount+=l.hasviewerliked?1:-1;l.likesentences={current:m.likesentences.alternate,alternate:m.likesentences.current,isunseen:l.likesentences.isunseen}}}return l},handleSubscribe:function k(l,m,n){if(m.clientid&&c("ClientIDs").isExistingClientID(m.clientid)&&m.hasviewersubscribed!=l.hasviewersubscribed)return null;if(m.actorid==l.actorforpost){l.hasviewersubscribed=m.hasviewersubscribed;return l}return l},handleCommentsDisabled:function k(l,m,n){l.cancomment=m.cancomment;l.arecommentsdisabled=m.arecommentsdisabled;l.commentdisablednotice=m.commentdisablednotice;return l},handleReaction:function k(l,m,n){if(m.clientid&&c("ClientIDs").isExistingClientID(m.clientid)&&m.viewerreaction!==l.viewerreaction)return null;if(l.reactors&&l.actorforpost==m.actorid&&l.viewerreaction!=m.viewerreaction)if(m.viewerreaction==c("UFIReactionTypes").NONE)l.reactors=l.reactors.slice(1);else if(l.viewerreaction==c("UFIReactionTypes").NONE)l.reactors.unshift({name:l.ownname,profilepicsrc:l.ownprofpic,reaction:m.viewerreaction});else l.reactors[0].reaction=m.viewerreaction;if(l.actorforpost==m.actorid||l.viewerreaction==m.viewerreaction){l.reactioncount=m.reactioncount;l.reactioncountmap=m.reactioncountmap;l.reactioncountreduced=m.reactioncountreduced;l.reactionsentences=m.reactionsentences;l.reactorids=m.reactorids;l.userreactions=m.userreactions;l.viewerreaction=m.viewerreaction}return l},handleUpdateConstituentTitle:function k(l,m,n){l.constituentbanneruri=m.constituentbanneruri;return l}};f.exports=j}),null);
__d("UFIFeedbackTargets",["KeyedCallbackManager","UFICentralUpdates","UFIFeedbackMutator"],(function a(b,c,d,e,f,g){"use strict";var h=new(c("KeyedCallbackManager"))();function i(l){var m;if(!l)return;var n=babelHelpers["extends"]({},l);delete n.commentlist;delete n.commentcount;c("UFICentralUpdates").didUpdateFeedback(l.entidentifier);h.addResourcesAndExecute((m={},m[l.entidentifier]=n,m))}function j(l,m){for(var n=0;n<l.length;n++){var o=l[n];o.arecommentsdisabled=!!o.arecommentsdisabled;o.cancomment=!!o.cancomment;o.hasviewerliked=!!o.hasviewerliked;o.hasviewersubscribed=!!o.hasviewersubscribed;o.likecount=o.likecount||0;var p=h.getResource(o.entidentifier);if(!p)break;var q=c("UFIFeedbackMutator").getHandlerForAction(o);i(q(p,o,m))}}var k={getFeedbackTarget:function l(m,n){var o=h.executeOrEnqueue(m,n),p=h.getUnavailableResources(o);p.length;return o},getFeedbackTargetIfExists:function l(m){return h.getResource(m)||null},unsubscribe:function l(m){h.unsubscribe(m)}};c("UFICentralUpdates").subscribe("update-feedback",function(l,m){var n=m.feedbacktarget?m.feedbacktarget:m.feedbacktargets&&m.feedbacktargets[0];if(n)i(n)});c("UFICentralUpdates").subscribe("update-actions",function(l,m){if(m.actions&&m.actions.length)j(m.actions,m.payloadsource)});f.exports=k}),22);
__d("UFILivePinnedCommentStore",["FluxReduceStore","UFIComments","UFIDispatcherBase","UFIFeedbackTargets","UFIStoryActionType","areEqual"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("FluxReduceStore"));i=h&&h.prototype;j.prototype.getInitialState=function(){return{}};j.prototype.reduce=function(k,l){var m;switch(l.type){case c("UFIStoryActionType").LIVE_PIN_COMMENT:case c("UFIStoryActionType").LIVE_UNPIN_COMMENT:var n=l.commentID,o=l.pinEventID;return babelHelpers["extends"]({},k,(m={},m[l.ftentidentifier]={commentID:n,pinEventID:o},m));default:return k}};j.prototype.areEqual=function(k,l){return c("areEqual")(k,l)};j.prototype.getPinnedCommentID=function(k){var l=this.getState()[k];if(!l){var m=c("UFIFeedbackTargets").getFeedbackTargetIfExists(k);if(!m)return null;return m.livepinnedcommentid||null}return l.commentID||null};j.prototype.getPinEventID=function(k){var l=this.getState()[k];if(!l)return null;return l.pinEventID||null};j.prototype.getPinnedCommentAuthorID=function(k){var l=this.getPinnedCommentID(k);if(!l)return null;var m=c("UFIComments").getComment(l);return m?m.author||null:null};function j(){h.apply(this,arguments)}f.exports=new j(c("UFIDispatcherBase"))}),null);
__d("UFIVisibility",[],(function a(b,c,d,e,f,g){"use strict";var h={VISIBLE:"visible",HIDDEN:"hidden"};f.exports=h}),null);
__d("UFICommentVisibilityStore",["invariant","FluxReduceStore","UFICommentActionType","UFIComments","UFIDispatcherBase","UFIInstanceActionType","UFILivePinnedCommentStore","UFIRootRegistry","UFIVisibility","filterObject"],(function a(b,c,d,e,f,g,h){"use strict";var i,j;function k(p){var q=arguments.length<=1||arguments[1]===undefined?null:arguments[1],r=arguments.length<=2||arguments[2]===undefined?null:arguments[2];q===null&&r===null||q!==null&&r!==null||h(0);if(q)return p+"-"+q+(r?"-P":"");return p}function l(p,q){return p===q||p.startsWith(q+"-")}function m(p){var q=c("UFIRootRegistry").getInstanceIDFromFTEntIdentifier(p);return q?q:[]}function n(p){return{instanceid:p}}i=babelHelpers.inherits(o,c("FluxReduceStore"));j=i&&i.prototype;o.prototype.getInitialState=function(){return{}};o.prototype.getVisibility=function(p,q){var r=arguments.length<=2||arguments[2]===undefined?null:arguments[2],s=r?k(q.instanceid,r.comment.fbid,r.isLivePinnedComment):k(q.instanceid);if(Object.prototype.hasOwnProperty.call(p,s))return p[s];return c("UFIVisibility").HIDDEN};o.prototype.$UFICommentVisibilityStore1=function(p){var q=n(p);return this.getVisibility(this.getState(),q)===c("UFIVisibility").VISIBLE};o.prototype.isFeedbackTargetVisible=function(p){var q=m(p);return q.some(function(r){return this.$UFICommentVisibilityStore1(r)}.bind(this))};o.prototype.reduce=function(p,q){var r;switch(q.type){case c("UFICommentActionType").UNMOUNTED:var s=babelHelpers["extends"]({},p);delete s[k(q.instanceID,q.renderedComment.comment.fbid,q.renderedComment.isLivePinnedComment)];return s;case c("UFICommentActionType").CHANGE_VISIBILITY:return babelHelpers["extends"]({},p,(r={},r[k(q.instanceID,q.renderedComment.comment.fbid,q.renderedComment.isLivePinnedComment)]=q.visibility,r));case c("UFIInstanceActionType").CHANGE_VISIBILITY:var t=c("UFIRootRegistry").getFTEntIdentifierFromInstanceID(q.instanceID),u=c("UFIComments").getCommentsForFTEntIdentifier(t);q.type===c("UFIInstanceActionType").CHANGE_VISIBILITY||h(0);var v=q.visibility;if(u){var w,x=u.reduce(function(C,D){C[k(q.instanceID,D.fbid,D.fbid?false:null)]=v;return C},{});if(t){var y=c("UFILivePinnedCommentStore").getPinnedCommentID(t);if(y){var z=c("UFIComments").getComment(y);if(z)x[k(q.instanceID,z.fbid,true)]=v}}return babelHelpers["extends"]({},p,(w={},w[k(q.instanceID)]=q.visibility,w),x)}case c("UFIInstanceActionType").REMOVE:var A=q.instanceID,B=k(A);return c("filterObject")(p,function(C,D){return D!==B&&!l(D,A)})}return p};function o(){i.apply(this,arguments)}f.exports=new o(c("UFIDispatcherBase"))}),null);
__d("UFIKeyValueStore",["FluxReduceStore","abstractMethod"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("FluxReduceStore"));i=h&&h.prototype;j.prototype.getInitialState=function(){return{}};j.prototype.getValueFor=function(k){return this.getState()[k]||null};j.prototype.getStateKey=function(k){return k.instanceID};j.prototype.getStateValue=function(k){return c("abstractMethod")("UFIKeyValueStore","getStateValue")};j.prototype.reduce=function(k,l){var m=this.getStateKey(l),n=this.getStateValue(l);if(n!==null){var o;return babelHelpers["extends"]({},k,(o={},o[m]=n,o))}return k};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d("UFICommercialBreakStore",["UFIDispatcherBase","UFIInstanceActionType","UFIKeyValueStore"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("UFIKeyValueStore"));i=h&&h.prototype;j.prototype.getValueFor=function(k){return!!i.getValueFor.call(this,k)};j.prototype.getStateValue=function(k){switch(k.type){case c("UFIInstanceActionType").TOGGLE_COMMERCIAL_BREAK:return k.inCommercial}return null};function j(){h.apply(this,arguments)}f.exports=new j(c("UFIDispatcherBase"))}),null);
__d("UFIComposerIsTypingStore",["UFIAddCommentActionType","UFIDispatcherBase","UFIKeyValueStore"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("UFIKeyValueStore"));i=h&&h.prototype;j.prototype.getStateKey=function(k){return k.ftentidentifier};j.prototype.getStateValue=function(k){switch(k.type){case c("UFIAddCommentActionType").SUBMIT_EDIT:return false;case c("UFIAddCommentActionType").SUBMIT_NEW:return false;case c("UFIAddCommentActionType").CHANGE_CONTENT:var l=k.text.trim().length;return l>0}return null};function j(){h.apply(this,arguments)}f.exports=new j(c("UFIDispatcherBase"))}),null);
__d("UFIFeedbackStore",["FluxReduceStore","UFIDispatcherBase","UFIInstanceActionType"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("FluxReduceStore"));i=h&&h.prototype;j.prototype.getInitialState=function(){return{}};j.prototype.reduce=function(k,l){var m;switch(l.type){case c("UFIInstanceActionType").INIT:var n=l.payload,o=n.feedbacktarget?n.feedbacktarget:n.feedbacktargets&&n.feedbacktargets[0];if(!o)return k;return babelHelpers["extends"]({},k,(m={},m[l.ftentidentifier]=babelHelpers["extends"]({orderingmodes:[],defaultcommentorderingmode:""},o),m))}return k};function j(){h.apply(this,arguments)}f.exports=new j(c("UFIDispatcherBase"))}),null);
__d("UFIInteractionStore",["UFIAddCommentActionType","UFICommentActionType","UFIDispatcherBase","UFIInstanceActionType","UFIKeyValueStore","UFIStoryActionType"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("UFIKeyValueStore"));i=h&&h.prototype;j.prototype.getValueFor=function(k){return!!i.getValueFor.call(this,k)};j.prototype.getStateValue=function(k){switch(k.type){case c("UFIAddCommentActionType").CHANGE_CONTENT:case c("UFIAddCommentActionType").SUBMIT_EDIT:case c("UFIAddCommentActionType").SUBMIT_NEW:case c("UFICommentActionType").CHANGE_REACTION:case c("UFICommentActionType").EDIT:case c("UFICommentActionType").REMOVE:case c("UFICommentActionType").TOGGLE_LIKE:case c("UFICommentActionType").TOGGLE_MARK_AS_SPAM:case c("UFICommentActionType").TRANSLATE:case c("UFIInstanceActionType").CHANGE_ORDER_MODE:case c("UFIInstanceActionType").TOGGLE_COMMENTS:case c("UFIStoryActionType").PAGE_IN_COMMENTS:case c("UFIStoryActionType").SHOW_REPLIES:case c("UFIStoryActionType").TOGGLE_REPLIES:return true}return null};function j(){h.apply(this,arguments)}f.exports=new j(c("UFIDispatcherBase"))}),null);
__d("UFILiveTypingStore",["FluxReduceStore","UFIDispatcherBase","UFIStoryActionType"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("FluxReduceStore"));i=h&&h.prototype;j.getNewFeedbackState=function(k){switch(k){case c("UFIStoryActionType").FRIEND_TYPING:return"friend";case c("UFIStoryActionType").SOMEONE_TYPING:return"someone";case c("UFIStoryActionType").TYPING_STOPPED:return false;default:return null}};j.prototype.getInitialState=function(){return{}};j.prototype.reduce=function(k,l){var m=j.getNewFeedbackState(l.type);if(m!==null){var n;k=babelHelpers["extends"]({},k,(n={},n[l.ftentidentifier]=m,n))}return k};j.prototype.isFriendTyping=function(k){return this.getState()[k]==="friend"};function j(){h.apply(this,arguments)}f.exports=new j(c("UFIDispatcherBase"))}),null);
__d("UFICentralUpdatesLocalCommentAdapter",["ClientIDs","FeedbackPayloadSourceType","UFICentralUpdates","UFIDispatcherBase"],(function a(b,c,d,e,f,g){"use strict";var h,i={},j=(h={},h[c("FeedbackPayloadSourceType").USER_ACTION]=l,h[c("FeedbackPayloadSourceType").ENDPOINT_ADD_COMMENT]=m,h);function k(){return c("UFICentralUpdates").subscribe("update-comments",function(p,q){if(q.comments){var r=j[q.payloadsource];if(r)q.comments.forEach(r)}})}function l(p){if(!c("ClientIDs").isExistingClientID(p.id))return;i[p.id]=p.ufiinstanceid;c("UFIDispatcherBase").dispatch({type:"CENTRALUPDATES_ADDED_COMMENT",instanceID:p.ufiinstanceid,ftentidentifier:p.ftentidentifier,clientID:p.id})}function m(p){if(!c("ClientIDs").isExistingClientID(p.clientid))return;var q=i[p.clientid];delete i[p.clientid];if(!q)return;c("UFIDispatcherBase").dispatch({type:"CENTRALUPDATES_SAVED_COMMENT",instanceID:q,ftentidentifier:p.ftentidentifier,clientID:p.clientid,commentID:p.id})}var n=void 0,o={subscribeOnce:function p(){if(!n){n=k();return n}return null}};f.exports=o}),null);
__d("UFILocallyComposedCommentStore",["invariant","ClientIDs","FluxReduceStore","UFIAddCommentActionType","UFICentralUpdatesLocalCommentAdapter","UFIDispatcherBase","setByPath"],(function a(b,c,d,e,f,g,h){"use strict";var i,j;function k(m){return babelHelpers["extends"]({},m)}i=babelHelpers.inherits(l,c("FluxReduceStore"));j=i&&i.prototype;function l(m){j.constructor.call(this,m);var n=c("UFICentralUpdatesLocalCommentAdapter").subscribeOnce()}l.prototype.getInitialState=function(){return{}};l.prototype.getStateForInstance=function(m){return m?this.getState()[m]||{}:{}};l.prototype.reduce=function(m,n){switch(n.type){case"CENTRALUPDATES_ADDED_COMMENT":c("ClientIDs").isExistingClientID(n.clientID)||h(0);m=k(m);c("setByPath")(m,[n.instanceID,n.clientID],true);return m;case"CENTRALUPDATES_SAVED_COMMENT":c("ClientIDs").isExistingClientID(n.clientID)||h(0);m=k(m);c("setByPath")(m,[n.instanceID,n.commentID],true);delete m[n.instanceID][n.clientID];return m;case c("UFIAddCommentActionType").SUBMIT_EDIT:m=k(m);c("setByPath")(m,[n.instanceID,n.comment.id],true);return m}return m};f.exports=new l(c("UFIDispatcherBase"))}),null);
__d("WebCommentViewOption",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CHRONOLOGICAL:"chronological",RANKED_THREADED:"ranked_threaded",TOPLEVEL:"toplevel",RECENT_ACTIVITY:"recent_activity",FEATURED:"featured",FILTERED:"filtered",LIVE_STREAMING:"live_streaming"})}),null);
__d("UFIOrderingModeStore",["invariant","FluxReduceStore","Map","UFIDispatcherBase","UFIFeedbackStore","UFIInstanceActionType","WebCommentViewOption"],(function a(b,c,d,e,f,g,h){"use strict";var i,j;function k(m,n){return m.filter(function(o){return o.selected}).map(function(o){return o.value}).pop()||n}i=babelHelpers.inherits(l,c("FluxReduceStore"));j=i&&i.prototype;l.prototype.getInitialState=function(){return new(c("Map"))()};l.prototype.areEqual=function(m,n){return m===n};l.prototype.isLiveStreaming=function(m){return this.getState().get(m)==c("WebCommentViewOption").LIVE_STREAMING};l.prototype.isInverted=function(m){switch(m){case c("WebCommentViewOption").RECENT_ACTIVITY:case c("WebCommentViewOption").RANKED_THREADED:case c("WebCommentViewOption").FILTERED:case c("WebCommentViewOption").LIVE_STREAMING:return true}return false};l.prototype.getOrderingMode=function(m){var n=this.getState().get(m);n!==undefined||h(0);return n};l.prototype.reduce=function(m,n){switch(n.type){case c("UFIInstanceActionType").INIT:if(m.has(n.instanceID))return m;c("UFIDispatcherBase").waitFor([c("UFIFeedbackStore").getDispatchToken()]);var o=c("UFIFeedbackStore").getState()[n.ftentidentifier];m=new(c("Map"))(m);return m.set(n.instanceID,k(o.orderingmodes,o.defaultcommentorderingmode));case c("UFIInstanceActionType").CHANGE_ORDER_MODE:if(!m.has(n.instanceID)||m.get(n.instanceID)!==n.mode){m=new(c("Map"))(m);m.set(n.instanceID,n.mode)}return m}return m};function l(){i.apply(this,arguments)}f.exports=new l(c("UFIDispatcherBase"))}),null);
__d("UFIPlayLiveVODHighlightsStore",["UFIDispatcherBase","UFIInstanceActionType","UFIKeyValueStore"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("UFIKeyValueStore"));i=h&&h.prototype;j.prototype.getValueFor=function(k){return!!i.getValueFor.call(this,k)};j.prototype.getStateValue=function(k){switch(k.type){case c("UFIInstanceActionType").PLAY_LIVE_VOD_HIGHLIGHTS:return k.playingLiveVODHighlights}return null};function j(){h.apply(this,arguments)}f.exports=new j(c("UFIDispatcherBase"))}),null);
__d("UFIActionTypes",["UFIInstanceActionType","UFIStoryActionType","UFIAddCommentActionType","UFICommentActionType"],(function a(b,c,d,e,f,g){"use strict";var h={INSTANCE:c("UFIInstanceActionType"),STORY:c("UFIStoryActionType"),ADD_COMMENT:c("UFIAddCommentActionType"),COMMENT:c("UFICommentActionType")};f.exports=h}),null);
__d("UFIReactionPendingRequestsStore",["FluxReduceStore","UFIActionTypes","UFIDispatcherBase"],(function a(b,c,d,e,f,g){"use strict";var h,i;function j(o){return o+"-comment"}function k(o){return o+"-story"}function l(o,p){var q;return babelHelpers["extends"]({},o,(q={},q[p]=(o[p]||0)+1,q))}function m(o,p){var q;return babelHelpers["extends"]({},o,(q={},q[p]=(o[p]||0)-1,q))}h=babelHelpers.inherits(n,c("FluxReduceStore"));i=h&&h.prototype;n.prototype.getInitialState=function(){return{}};n.prototype.reduce=function(o,p){switch(p.type){case c("UFIActionTypes").STORY.CHANGE_REACTION:return l(o,k(p.ftentidentifier));case c("UFIActionTypes").COMMENT.CHANGE_REACTION:return l(o,j(p.fbid));case c("UFIActionTypes").STORY.CHANGE_REACTION_SUCCESS:case c("UFIActionTypes").STORY.CHANGE_REACTION_FAILURE:return m(o,k(p.ftentidentifier));case c("UFIActionTypes").COMMENT.CHANGE_REACTION_FAILURE:case c("UFIActionTypes").COMMENT.CHANGE_REACTION_SUCCESS:return m(o,j(p.fbid))}return o};n.prototype.getPendingRequestsForComment=function(o){return this.getState()[j(o)]||0};n.prototype.getPendingRequests=function(o){return this.getState()[k(o)]||0};function n(){h.apply(this,arguments)}f.exports=new n(c("UFIDispatcherBase"))}),null);
__d("UFIReactionSyncStore",["FluxReduceStore","UFIActionTypes","UFIDispatcherBase"],(function a(b,c,d,e,f,g){"use strict";var h,i;function j(m){return m+"-comment"}function k(m){return m+"-story"}h=babelHelpers.inherits(l,c("FluxReduceStore"));i=h&&h.prototype;l.prototype.getInitialState=function(){return{}};l.prototype.reduce=function(m,n){var o,p,q;switch(n.type){case c("UFIActionTypes").INSTANCE.INIT:var r=n.payload,s=r.feedbacktarget?r.feedbacktarget:r.feedbacktargets&&r.feedbacktargets[0];if(!s)return m;var t=n.payload.comments.reduce(function(u,v){u[j(v.fbid)]=v.viewerreaction;return u},{});return babelHelpers["extends"]({},m,t,(o={},o[k(n.ftentidentifier)]=s.viewerreaction,o));case c("UFIActionTypes").STORY.CHANGE_REACTION_SUCCESS:return babelHelpers["extends"]({},m,(p={},p[k(n.ftentidentifier)]=n.reactionType,p));case c("UFIActionTypes").COMMENT.CHANGE_REACTION_SUCCESS:return babelHelpers["extends"]({},m,(q={},q[j(n.fbid)]=n.reactionType,q));default:return m}};l.prototype.getLastKnownCommentReaction=function(m){return this.getState()[j(m)]};l.prototype.getLastKnownReaction=function(m){return this.getState()[k(m)]};function l(){h.apply(this,arguments)}f.exports=new l(c("UFIDispatcherBase"))}),null);
__d("UFISharedDispatcher",["UFIDispatcherBase","UFIFeedbackStore","UFIAcceptedAnswerStore","UFICommentEditIDStore","UFICommentVisibilityStore","UFICommercialBreakStore","UFIComposerIsTypingStore","UFIInteractionStore","UFILivePinnedCommentStore","UFILiveTypingStore","UFILocallyComposedCommentStore","UFIOrderingModeStore","UFIReactionPendingRequestsStore","UFIReactionSyncStore","UFISpamStore","UFIPlayLiveVODHighlightsStore"],(function a(b,c,d,e,f,g){"use strict";c("UFIFeedbackStore");c("UFIAcceptedAnswerStore");c("UFICommentEditIDStore");c("UFICommentVisibilityStore");c("UFICommercialBreakStore");c("UFIComposerIsTypingStore");c("UFIFeedbackStore");c("UFIInteractionStore");c("UFILivePinnedCommentStore");c("UFILiveTypingStore");c("UFILocallyComposedCommentStore");c("UFIOrderingModeStore");c("UFIReactionPendingRequestsStore");c("UFIReactionSyncStore");c("UFISpamStore");c("UFIPlayLiveVODHighlightsStore");f.exports=c("UFIDispatcherBase")}),null);
__d("UFICommentAction",["UFICommentActionType"],(function a(b,c,d,e,f,g){"use strict";var h={changeReaction:function i(j,k,l,m){return{type:c("UFICommentActionType").CHANGE_REACTION,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,reactionType:l,target:m}},changeReactionSuccess:function i(j,k,l){return{type:c("UFICommentActionType").CHANGE_REACTION_SUCCESS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,reactionType:l}},changeReactionFailure:function i(j,k,l){return{type:c("UFICommentActionType").CHANGE_REACTION_FAILURE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,reactionType:l}},mounted:function i(j,k){return{type:c("UFICommentActionType").MOUNTED,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.comment.fbid,renderedComment:k,contextArgs:j}},unmounted:function i(j,k){return{type:c("UFICommentActionType").UNMOUNTED,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.comment.fbid,renderedComment:k,contextArgs:j}},changeVisibility:function i(j,k,l){return{type:c("UFICommentActionType").CHANGE_VISIBILITY,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.comment.fbid,renderedComment:k,contextArgs:j,visibility:l}},edit:function i(j,k){return{type:c("UFICommentActionType").EDIT,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k}},remove:function i(j,k,l,m){return{type:c("UFICommentActionType").REMOVE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,target:l,onConfirm:m}},delete_comment_and_remove_commenter:function i(j,k,l,m){return{type:c("UFICommentActionType").DELETE_COMMENT_AND_REMOVE_COMMENTER,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,target:l,onConfirm:m}},mute_member:function i(j,k,l,m){return{type:c("UFICommentActionType").MUTE_MEMBER,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,target:l,onConfirm:m}},toggle_text_delights:function i(j,k,l){return{type:c("UFICommentActionType").TOGGLE_TEXT_DELIGHTS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,target:l}},removePreview:function i(j,k,l){return{type:c("UFICommentActionType").REMOVE_PREVIEW,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,target:l}},toggleLike:function i(j,k,l){return{type:c("UFICommentActionType").TOGGLE_LIKE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,like:!k.hasviewerliked,target:l}},translate:function i(j,k,l){return{type:c("UFICommentActionType").TRANSLATE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,trigger:l}},markAsSpam:function i(j,k,l){return{type:c("UFICommentActionType").TOGGLE_MARK_AS_SPAM,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,is_spam:true,target:l}},markAsNotSpam:function i(j,k,l){return{type:c("UFICommentActionType").TOGGLE_MARK_AS_SPAM,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,is_spam:false,target:l}},inlineBan:function i(j,k,l,m){return{type:c("UFICommentActionType").TOGGLE_INLINE_BAN,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,is_banned:true,ownerid:m,target:l}},undoInlineBan:function i(j,k,l,m){return{type:c("UFICommentActionType").TOGGLE_INLINE_BAN,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,is_banned:false,ownerid:m,target:l}},embed:function i(j,k){return{type:c("UFICommentActionType").EMBED,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k}},manageConstituentBadge:function i(j,k){return{type:c("UFICommentActionType").MANAGE_CONSTITUENT_BADGE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k}},keepSpam:function i(j,k,l){return{type:c("UFICommentActionType").TOGGLE_KEEP_SPAM,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,target:l}},appealSpam:function i(j,k,l,m){return{type:c("UFICommentActionType").TOGGLE_APPEAL_SPAM,instanceID:j.instanceid,ftentidentifier:k.fbid,fbid:k.fbid,comment:k,target:l,feedback:m}},secureAccount:function i(j,k,l,m){return{type:c("UFICommentActionType").TOGGLE_SECURE_ACCOUNT,instanceID:j.instanceid,ftentidentifier:k.fbid,fbid:k.fbid,comment:k,target:l,feedback:m}}};f.exports=h}),null);
__d("UFIReactionsUtils",[],(function a(b,c,d,e,f,g){var h={getReactionData:function i(j,k,l,m){k=parseInt(k,10);var n=!!k,o=j.reactorids?j.reactorids.slice(0):[],p=o.indexOf(l),q=0;if(n){if(p<0){l&&o.unshift(l);q=1}}else if(p>-1){o.splice(p,1);q=-1}var r=Math.max(j.reactioncount+q,0),s=j.reactioncountreduced;if(s&&!isNaN(s))if(m)s=m(r);else s=r.toString();var t=j.reactioncountmap||{},u=void 0,v=j.viewerreaction;if(v&&t[v]){t[v]["default"]=Math.max((t[v]["default"]||0)-1,0);u=t[v].reduced;if(u&&!isNaN(u))t[v].reduced=t[v]["default"].toString()}if(n&&t[k]){t[k]["default"]=(t[k]["default"]||0)+1;u=t[k].reduced;if(u&&!isNaN(u))t[k].reduced=t[k]["default"].toString()}var w=j.userreactions;if(!w||Array.isArray(w))w={};if(l)if(n)w[l]=k;else delete w[l];var x=null;if(j.reactionsentences){var y=!(v&&k);x={current:j.reactionsentences[y?"alternate":"current"],alternate:j.reactionsentences[y?"current":"alternate"]}}return{reactioncount:r,reactioncountmap:t,reactioncountreduced:s,reactionsentences:x,reactorids:o,userreactions:w,viewerreaction:k}},getReactionCountMapFromSummary:function i(j){var k={};if(!j)return k;for(var l=0;l<j.length;l++){var m=j[l],n=m.feedback_reaction.key;k[n]={"default":m.reactors&&m.reactors.count,reduced:m.reactors&&m.reactors.display_count}}return k}};f.exports=h}),null);
__d("UFIStoryAction",["UFIStoryActionType"],(function a(b,c,d,e,f,g){"use strict";var h={changeAcceptedAnswer:function i(j,k,l){return{type:c("UFIStoryActionType").CHANGE_ACCEPTED_ANSWER,instanceID:j.instanceid,ftentidentifier:k.ftentidentifier,comment:k,doAccept:l}},commentsArrived:function i(j,k,l,m){return{type:c("UFIStoryActionType").COMMENTS_ARRIVED,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,newOffset:k,newLength:l,source:m}},pageInComments:function i(j,k,l,m){return{type:c("UFIStoryActionType").PAGE_IN_COMMENTS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,commentID:k,direction:l,nextRange:m}},showComments:function i(j){return{type:c("UFIStoryActionType").SHOW_COMMENTS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier}},showReplies:function i(j,k,l){return{type:c("UFIStoryActionType").SHOW_REPLIES,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,commentID:k,initiatorComment:l}},spamFetched:function i(j,k,l,m){return{type:c("UFIStoryActionType").SPAM_FETCHED,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,viewas:k,commentIDs:l,parentCommentID:m}},changeReaction:function i(j,k,l){var m=arguments.length<=3||arguments[3]===undefined?null:arguments[3],n=arguments.length<=4||arguments[4]===undefined?null:arguments[4];return{type:c("UFIStoryActionType").CHANGE_REACTION,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,contextArgs:j,reactionType:k,target:l,sphericalYaw:m,sphericalPitch:n}},changeReactionSuccess:function i(j,k){return{type:c("UFIStoryActionType").CHANGE_REACTION_SUCCESS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,reactionType:k}},changeReactionFailure:function i(j,k){return{type:c("UFIStoryActionType").CHANGE_REACTION_FAILURE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,reactionType:k}},toggleReplies:function i(j,k){return{type:c("UFIStoryActionType").TOGGLE_REPLIES,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,commentID:k}},friendTyping:function i(j){return{type:c("UFIStoryActionType").FRIEND_TYPING,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier}},someoneTyping:function i(j){return{type:c("UFIStoryActionType").SOMEONE_TYPING,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier}},typingStopped:function i(j){return{type:c("UFIStoryActionType").TYPING_STOPPED,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier}},pinComment:function i(j,k){var l=arguments.length<=2||arguments[2]===undefined?null:arguments[2];return{type:c("UFIStoryActionType").LIVE_PIN_COMMENT,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,commentID:k,pinEventID:l}},unpinComment:function i(j){var k=arguments.length<=1||arguments[1]===undefined?null:arguments[1];return{type:c("UFIStoryActionType").LIVE_UNPIN_COMMENT,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,commentID:null,pinEventID:k}}};f.exports=h}),null);
__d("UFIUserActionUtils",["Nectar","collectDataAttributes"],(function a(b,c,d,e,f,g){var h={trackingData:function i(j){if(!j)return{ft:{}};var i={ft:c("collectDataAttributes")(j,["ft"]).ft};c("Nectar").addModuleData(i,j);return i}};f.exports=h}),null);
__d("UFIVideoPlayerRegistry",["EventEmitter","Map","Set","VideoPlayerReason","ViewportBounds","destroyOnUnload","getOrCreateDOMID"],(function a(b,c,d,e,f,g){"use strict";var h=new(c("EventEmitter"))(),i=new(c("Map"))(),j=new(c("Map"))(),k=new(c("Map"))(),l=new(c("Map"))(),m=new(c("Set"))(),n=new(c("Map"))();c("destroyOnUnload")(function(){h.removeAllListeners();i.clear();j.clear();k.clear();l.clear();m.clear()});function o(s){var t=s,u=[];while(t){u.unshift(t);t=t.parentElement}return u}function p(s,t){var u=o(s),v=null,w=null;t.forEach(function(x){var y=x[0],z=x[1],A=o(y);for(var B=0;B<u.length;++B)if(u[B]!==A[B]){if(w===null||B>w){w=B;v=z}break}});return v}function q(s,t){var u=o(s),v=null,w=null;t.forEach(function(x){var y=x[0],z=x[1],A=o(y);for(var B=0;B<u.length;++B)if(u[B]!==A[B]){if(w===null||B>w){w=B;v=z}break}});return v}var r={registerVideoPlayerController:function s(t){var u=t.getVideoID(),v=l.get(u);if(v)v.push(t);else{v=[t];l.set(u,v);k["delete"](u)}m.forEach(function(x){return x()});var w=i.get(u);if(!w)return;w.forEach(function(x){return this._associateUFIController(x,u)}.bind(this))},addOnRegisterListener:function s(t){m.add(t)},removeOnRegisterListener:function s(t){m["delete"](t)},getAvailableVideoPlayerController:function s(t){return j.get(t)},seekAvailableVideoPlayerController:function s(t,u){var v=r.getAvailableVideoPlayerController(t);if(!v)return;if(["ready","playing","paused","finished"].includes(v.getState())){v.pause(c("VideoPlayerReason").SEEK);v.seek(u);v.play(c("VideoPlayerReason").SEEK)}},scrollToAvailableVideo:function s(t){var u=r.getAvailableVideoPlayerController(t);if(!u)return;var v=c("ViewportBounds").getElementPosition(u.getRootNode());window.scroll(0,v.y)},setAvailableVideoPlayerControllerSphericalViewport:function s(t,u){var v=r.getAvailableVideoPlayerController(t);if(!v)return;v.emit("SphericalVideoViewportTagComment/click",u)},getAvailableVideoPlayerControllerForElement:function s(t,u){if(!t)return null;var v=k.get(u)||new(c("Map"))(),w=c("getOrCreateDOMID")(t),x=v.get(w)||this._findVideoPlayerControllerForElement(t,u);v.set(w,x);k.set(u,v);return x},getAvailableVideoPlayerControllerTimeForElement:function s(t,u){if(!t)return null;var v=r.getAvailableVideoPlayerControllerForElement(t,u);if(!v)return null;var w=v.getCurrentTimePosition();if(w>=0)return Math.floor(w);return null},getAvailableVideoPlayerControllerTime:function s(t){var u=r.getAvailableVideoPlayerController(t);if(!u)return null;var v=u.getCurrentTimePosition();if(v>=0)return Math.floor(v);return null},registerUFIController:function s(t,u,v){var w=t.getInstanceID(),x=t.getFluentContentToken();if(!x)return;var y=i.get(x);if(y)y.push(t);else{y=[t];i.set(x,y)}h.addListener(w+"/register",u);h.addListener(w+"/unregister",v);this._associateUFIController(t,x)},getAvailableUFIController:function s(t){var u=n.get(t);if(u)return u;var v=i.get(t.getVideoID());if(!v)return null;if(v.length===1)u=v[0];else u=q(t.getRootNode(),v.map(function(x){return[x.getRootNode(),x]}));if(u){var w=this._findVideoPlayerControllerForElement(u.getRootNode(),t.getVideoID());if(w!==t)return null;n.set(t,u)}return u},_findVideoPlayerControllerForElement:function s(t,u){var v=l.get(u);if(!v)return null;if(v.length===1)return v[0];return p(t,v.filter(function(w){return!w.isState("destroyed")}).map(function(w){return[w.getRootNode(),w]}))},_associateUFIController:function s(t,u){var v=t.getInstanceID(),w=this._findVideoPlayerControllerForElement(t.getRootNode(),u);if(!w||w.isState("destroyed"))return;var x=j.get(v);if(x){if(!x.isState("destroyed")&&c("getOrCreateDOMID")(x.getRootNode())===c("getOrCreateDOMID")(w.getRootNode()))return;h.emit(v+"/unregister")}j.set(v,w);h.emit(v+"/register",w)}};f.exports=r}),null);
__d("XUFICommentReactionController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ufi/comment/reaction/",{reaction_type:{type:"Enum",enumType:0}})}),null);
__d("XUFIReactionController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ufi/reaction/",{client_id:{type:"String"},ft_ent_identifier:{type:"String"},reaction_type:{type:"Enum",enumType:0},story_render_location:{type:"Enum",enumType:1},is_inline:{type:"Bool",defaultValue:false},is_comment:{type:"Bool",defaultValue:false},is_permalink:{type:"Bool",defaultValue:false},action_source:{type:"String"},feedback_source:{type:"Int"},feedback_referrer:{type:"String"},is_sponsored:{type:"Bool",defaultValue:false},basic_origin_uri:{type:"String"},basic_reload:{type:"Exists",defaultValue:false},on_demand_content_time_offset:{type:"Int"},live_content_time_offset:{type:"Int"},aftercursor:{type:"String"},tab:{type:"String"},av:{type:"Int"},_ft_:{type:"String"}})}),null);
__d("UFIReactionUserActions",["ActorURI","AsyncResponse","ChannelClientID","ClientIDs","MercuryServerDispatcher","NumberFormat","QE2Logger","UFICentralUpdates","UFICommentAction","UFIComments","UFIConfig","UFIConstants","UFIFeedbackTargets","UFIReactionPendingRequestsStore","UFIReactionsUtils","UFIReactionSyncStore","UFIReactionTypes","UFISharedDispatcher","UFIStoryAction","UFIUserActionUtils","UFIVideoPlayerRegistry","XUFICommentReactionController","XUFIReactionController","emptyFunction","ifRequired","setImmediate"],(function a(b,c,d,e,f,g){"use strict";var h={changeReaction:function z(A,B,C,D){var E=arguments.length<=4||arguments[4]===undefined?null:arguments[4],F=arguments.length<=5||arguments[5]===undefined?null:arguments[5];c("UFIFeedbackTargets").getFeedbackTarget(A,function(G){var H,I=w(G,B);c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:I});var J=c("UFIUserActionUtils").trackingData(D),K={};K[c("ActorURI").PARAMETER_ACTOR]=G.actorforpost;var L=babelHelpers["extends"]({client_id:c("ClientIDs").getNewClientID(),ft_ent_identifier:A,reaction_type:B,root_id:C.rootid,session_id:c("ChannelClientID").getID(),source:C.source,feedback_referrer:C.feedbackReferrer,instance_id:C.instanceid},K,J);if(C.fluentContentToken)(function(){var M=C.fluentContentToken,N=c("UFIVideoPlayerRegistry").getAvailableVideoPlayerControllerForElement(D,M);if(N&&N.isSpherical())L.video_playback_timestamp=c("UFIVideoPlayerRegistry").getAvailableVideoPlayerControllerTimeForElement(D,M);if(C.isLiveVOD)L.on_demand_content_time_offset=c("UFIVideoPlayerRegistry").getAvailableVideoPlayerControllerTimeForElement(D,M);else if(C.islivestreaming)L.live_content_time_offset=c("UFIVideoPlayerRegistry").getAvailableVideoPlayerControllerTimeForElement(D,M);if(N&&N.isSpherical())c("ifRequired")("SphericalViewportControlStore",function(O){var P=O.getOrientation(N.getVideoPlayerID());if(P)if(E!==null&&F!==null){L.spherical_yaw=E;L.spherical_pitch=F}else{L.spherical_pitch=Math.round(P.pitch);L.spherical_yaw=Math.round(P.yaw)}},c("emptyFunction")())})();c("MercuryServerDispatcher").trySend(c("XUFIReactionController").getURIBuilder().getURI(),L)})},changeCommentReaction:function z(A,B,C,D){var E=c("UFIComments").getComment(A);if(E&&E.__typename==="saved"&&E.viewerreaction!=B)c("UFIFeedbackTargets").getFeedbackTarget(E.ftentidentifier,function(F){var G=c("UFIUserActionUtils").trackingData(D),H=v(E,F,B);c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:H});var I={};I[c("ActorURI").PARAMETER_ACTOR]=F.actorforpost;c("MercuryServerDispatcher").trySend(c("XUFICommentReactionController").getURIBuilder().getURI(),babelHelpers["extends"]({comment_id:A,legacy_id:E.legacyid,reaction_type:B,ft_ent_identifier:E.ftentidentifier,source:C.source,instance_id:C.instanceid,client_id:c("ClientIDs").getNewClientID(),session_id:c("ChannelClientID").getID()},G,I))})}},i={},j=c("XUFIReactionController").getURIBuilder().getURI();i[j]={mode:c("MercuryServerDispatcher").IMMEDIATE,error_handler:r,handler:q};var k=c("XUFICommentReactionController").getURIBuilder().getURI();i[k]={mode:c("MercuryServerDispatcher").BATCH_CONDITIONAL,batch_if:l,batch_function:m,error_handler:u,handler:t};c("MercuryServerDispatcher").registerEndpoints(i);function l(z,A){return z&&z.ft_ent_identifier==A.ft_ent_identifier&&z.comment_id==A.comment_id}function m(z,A){return A}var n="feedback_reactions_www_rollback_universe";function o(){c("QE2Logger").logExposureForUser(n)}function p(z,A){var B=c("UFIReactionPendingRequestsStore").getPendingRequests(z);if(B>0)return;var C=c("UFIReactionSyncStore").getLastKnownReaction(z);if(A===C)return;c("UFIFeedbackTargets").getFeedbackTarget(z,function(D){var E=w(D,C);c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:E})})}function q(z,A){var B=A.data,C=B.ft_ent_identifier,D=B.reaction_type;c("UFISharedDispatcher").dispatch(c("UFIStoryAction").changeReactionSuccess({instanceid:B.instance_id,ftentidentifier:C},D));c("setImmediate")(function(){return p(C,D)})}function r(z){var A=z.request.data,B=A.ft_ent_identifier,C=A.reaction_type;o();var D=c("UFIConfig").reactionsHasReactionsRollback,E=c("UFIConfig").reactionsHasReactionsRetry;if(E&&!A.retry_attempt){c("MercuryServerDispatcher").trySend(c("XUFIReactionController").getURIBuilder().getURI(),babelHelpers["extends"]({},A,{retry_attempt:1}));return}c("UFISharedDispatcher").dispatch(c("UFIStoryAction").changeReactionFailure({instanceid:A.instance_id,ftentidentifier:B},C));if(D)c("setImmediate")(function(){return p(B,C)});c("AsyncResponse").defaultErrorHandler(z)}function s(z,A,B){var C=c("UFIReactionPendingRequestsStore").getPendingRequestsForComment(A.fbid);if(C>0)return;var D=c("UFIReactionSyncStore").getLastKnownCommentReaction(A.fbid);if(B===D)return;c("UFIFeedbackTargets").getFeedbackTarget(z,function(E){var F=v(A,E,D);c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:F})})}function t(z,A){var B=A.data,C=B.ft_ent_identifier,D=B.reaction_type,E=c("UFIComments").getComment(B.comment_id);if(!E||E.__typename!=="saved")return;c("UFISharedDispatcher").dispatch(c("UFICommentAction").changeReactionSuccess({instanceid:B.instance_id,ftentidentifier:C},E,D));c("setImmediate")(function(){return s(C,E,D)})}function u(z){var A=z.request.data,B=A.ft_ent_identifier,C=A.reaction_type,D=c("UFIComments").getComment(A.comment_id);if(!D)return;o();var E=c("UFIConfig").reactionsHasCommentReactionsRollback,F=c("UFIConfig").reactionsHasCommentReactionsRetry;if(F&&!A.retry_attempt){c("MercuryServerDispatcher").trySend(c("XUFICommentReactionController").getURIBuilder().getURI(),babelHelpers["extends"]({},A,{retry_attempt:1}));return}if(D&&D.__typename==="saved"){c("UFISharedDispatcher").dispatch(c("UFICommentAction").changeReactionFailure({instanceid:A.instance_id,ftentidentifier:B},D,C));if(E)c("setImmediate")(function(){return s(B,D,C)})}c("AsyncResponse").defaultErrorHandler(z)}function v(z,A,B){var C=z.id,D=[y(z,B,C,A.supportedreactions||[],A.actorforpost)],E=B===c("UFIReactionTypes").LIKE;if(A.hasviewerliked!==E){var F=E?1:-1;D.push({commentid:C,actiontype:c("UFIConstants").UFIActionType.COMMENT_LIKE,viewerliked:E,likecount:(z.likecount||0)+F})}return D}function w(z,A){var B=[x(z,A)],C=A!==c("UFIReactionTypes").NONE;if(z.hasviewerliked!==C){var D=C?1:-1;B.push({actiontype:c("UFIConstants").UFIActionType.LIKE_ACTION,actorid:z.actorforpost,hasviewerliked:C,likecount:(z.likecount||0)+D,entidentifier:z.entidentifier,likesentences:{current:z.likesentences.alternate,alternate:z.likesentences.current}})}return B}function x(z,A){return Object.assign({actiontype:c("UFIConstants").UFIActionType.REACTION,actorid:z.actorforpost,entidentifier:z.entidentifier},c("UFIReactionsUtils").getReactionData(z,A,z.actorforpost,c("NumberFormat").formatInteger))}function y(z,A,B,C,D){var E={};for(var F=0;F<C.length;F++){var G=C[F],H=z.reactioncountmap?z.reactioncountmap[G]:null;E[G]={"default":H?H["default"]:0,reduced:H?H.reduced:"0"}}var I=c("UFIReactionsUtils").getReactionData({viewerreaction:z.viewerreaction,reactioncount:z.reactioncount,reactioncountreduced:z.reactioncountreduced,reactioncountmap:E,reactorids:z.viewerreaction?[D]:[]},A,D);return{actiontype:c("UFIConstants").UFIActionType.COMMENT_REACTION,commentid:B,hasviewerliked:!!A,likecount:I.reactioncountmap[1]["default"],reactioncount:I.reactioncount,reactioncountmap:I.reactioncountmap,reactioncountreduced:I.reactioncountreduced,viewerreaction:A}}f.exports=h}),null);
__d("CommentPostedLiveState",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({LIVE:"Live",ON_DEMAND:"OnDemand"})}),null);
__d("UFIPagedCommentListImpl",["ClientIDs","KeyedCallbackManager","UFICentralUpdates","UFICommentLogger","UFIConfig","UFIConstants","UFIFeedbackTargets"],(function a(b,c,d,e,f,g){"use strict";function h(i){this.actorID=null;this.basePermalink=null;this.commentPermalinks=Object.create(null);this.count=0;this.dataSource=new(c("KeyedCallbackManager"))();this.deletedComments=Object.create(null);this.deletedCount=0;this.lastRequestedLength=0;this.lastRequestedOffset=0;this.feedbackTargetID=i;c("UFIFeedbackTargets").getFeedbackTarget(this.feedbackTargetID,function(j){this.actorID=j.actorforpost;this.basePermalink=j.permalink}.bind(this))}h.prototype.setClientHasAll=function(i){};h.prototype.addOrUpdateComment=function(i){if(!i)return;if(i.__typename==="local")this.$UFIPagedCommentListImpl1(i.id);else this.$UFIPagedCommentListImpl2(i.id,i.clientid,i.legacyid);c("UFICentralUpdates").didUpdateFeedback(this.feedbackTargetID)};h.prototype.$UFIPagedCommentListImpl1=function(i){this.dataSource.setResource(this.count,i);this.count++};h.prototype.$UFIPagedCommentListImpl2=function(i,j,k){var l=j&&c("ClientIDs").isExistingClientID(j),m=this.dataSource.getAllResources(),n={};for(var o in m){var p=m[o];n[p]=o}if(l&&j&&j in n){n[i]=n[j];var q=n[j];this.dataSource.setResource(q,i);if(c("UFIConfig").logCommentPost)c("UFICommentLogger").logNewCommentReceived(j,Date.now())}else if(!n[i]&&j)this.$UFIPagedCommentListImpl1(i);if(k&&i in n)this.commentPermalinks[i]=this.buildCommentPermalink(i,k,n[i])};h.prototype.addCommentIDs=function(i,j,k){var l={};for(var m=0;m<j;m++)l[i+m]=k[m]||c("UFIConstants").unavailableCommentKey;this.dataSource.addResourcesAndExecute(l);c("UFICentralUpdates").didUpdateFeedback(this.feedbackTargetID)};h.prototype.getComments=function(i,j,k,l){var m=new Array(j).fill().map(function(s,t){return t+i}),n=this.dataSource.getUnavailableResourcesFromRequest(m);if(n.length){var o=Math.min.apply(Math,n),p=Math.max.apply(Math,n),q=o,r=p-o+1;if(q<this.lastRequestedOffset||q+r>this.lastRequestedOffset+this.lastRequestedLength){this.lastRequestedOffset=q;this.lastRequestedLength=r;this.fetchComments(q,r,k)}}else this.dataSource.executeOrEnqueue(m,function(s){return l(this.commentsFromCommentIDs(s,i,j))}.bind(this))};h.prototype.getCommentsOrThrow=function(i){var j=i.getLength(),k=i.getOffset(),l={};new Array(j).fill().forEach(function(m,n){var o=n+k,p=this.dataSource.getResource(o);if(!p)throw new Error("Tried to get nonexistent comment");l[o]=p}.bind(this));return this.commentsFromCommentIDs(l,k,j)};h.prototype.fetchComments=function(i,j,k){};h.prototype.commentsFromCommentIDs=function(i,j,k){return{}};h.prototype.reset=function(){var i=this.dataSource.getAllResources();this.dataSource.reset();this.count=0;this.deletedCount=0;this.deletedComments={};this.lastRequestedOffset=0;this.lastRequestedLength=0;return i};h.prototype.deleteComment=function(i){if(!(i in this.deletedComments)){this.deletedComments[i]=true;this.deletedCount++}};h.prototype.updateCommentCount=function(i){this.count=i;this.deletedCount=0};h.prototype.getFeedbackTargetID=function(){return this.feedbackTargetID};h.prototype.getCommentCount=function(){return this.count};h.prototype.getDeletedCount=function(){return this.deletedCount};h.prototype.getDisplayedCommentCount=function(){return this.count-this.deletedCount};h.prototype.getBasePermalink=function(){return this.basePermalink};h.prototype.buildCommentPermalink=function(i,j,k){return null};h.prototype.getPermalinkForComment=function(i){return this.commentPermalinks[i]};f.exports=h}),null);
__d("UFIReplyCommentListImpl",["ActorURI","JSLogger","MercuryServerDispatcher","UFICommentLogger","UFIComments","UFIConfig","UFIPagedCommentListImpl","URI"],(function a(b,c,d,e,f,g){"use strict";var h,i,j=c("JSLogger").create("ufi_reply_comment_list");h=babelHelpers.inherits(k,c("UFIPagedCommentListImpl"));i=h&&h.prototype;function k(l,m,n){i.constructor.call(this,l);this.parentCommentID=m;this.containerOrderingMode=n}k.prototype.fetchComments=function(l,m,n){if(c("UFIConfig").logCommentLoad)c("UFICommentLogger").logCommentFetch(this.feedbackTargetID,Date.now(),{request_length:m,is_reply:true});var o={ft_ent_identifier:this.feedbackTargetID,parent_comment_ids:[this.parentCommentID],source:null,offsets:[l],lengths:[m],feed_context:n?n.feedContext:null,numpagerclicks:n?n.numPagerClicks:null,containerorderingmode:this.containerOrderingMode,translate_all:n?n.translateAll:null};if(!n||!n.viewAs)o[c("ActorURI").PARAMETER_ACTOR]=this.actorID;c("MercuryServerDispatcher").trySend("/ajax/ufi/reply_fetch.php",o)};k.prototype.commentsFromCommentIDs=function(l,m,n){var o={};for(var p=0;p<n;p++){var q=c("UFIComments").getComment(l[m+p]);if(q)o[m+p]=q}return o};k.prototype.reset=function(){var l=i.reset.call(this),m={};for(var n in l){var o=l[n];m[o]=true}c("UFIComments").resetComments(m);return l};k.prototype.getParentCommentID=function(){return this.parentCommentID};k.prototype.buildCommentPermalink=function(l,m,n){if(!this.basePermalink)return null;var o=this.getParentCommentID().split("_"),p=m;if(o.length===2)p=o[1];else j.error("Bad reply comment ID: "+this.getParentCommentID());return new(c("URI"))(this.basePermalink).addQueryData({comment_id:p,reply_comment_id:m}).toString()};c("MercuryServerDispatcher").registerEndpoints({"/ajax/ufi/reply_fetch.php":{mode:c("MercuryServerDispatcher").IMMEDIATE}});f.exports=k}),null);
__d("UFIReplyCommentList",["UFICentralUpdates","UFIComments","UFIConstants","UFIReplyCommentListImpl","getObjectValues"],(function a(b,c,d,e,f,g){"use strict";var h={},i={getCommentList:function k(l,m,n){if(!h[m])h[m]={};if(!h[m][n]){var o=new(c("UFIReplyCommentListImpl"))(l,m,n),p=i.getReplyListsForParentCommentID(String(m));if(p.length)o.updateCommentCount(p[0].getCommentCount());h[m][n]=o}return h[m][n]},getReplyListsForParentCommentID:function k(l){return c("getObjectValues")(h[l]||{})},resetWithContext:function k(l,m,n,o){var p=h[m][o];if(!p)return;p.reset();p.actorID=n}};function j(k){var l=c("UFIComments").getComment(k.commentid);if(!l)return;var m=l.id,n=l.parentcommentid;if(!n)return;if(l.status!==c("UFIConstants").UFIStatus.DELETED&&l.status!==c("UFIConstants").UFIStatus.FAILED_ADD)i.getReplyListsForParentCommentID(n).forEach(function(o){o.deleteComment(m)})}c("UFICentralUpdates").subscribe("update-actions",function(k,l){if(l.actions&&l.actions.length)for(var m=0;m<l.actions.length;m++){var n=l.actions[m];switch(n.actiontype){case c("UFIConstants").UFIActionType.DELETE_COMMENT:j(n);break}}});c("UFICentralUpdates").subscribe("update-comment-lists",function(k,l){var m=l.commentlists;if(m&&m.replies&&Object.keys(m).length)for(var n in m.replies){var o=m.replies[n],p=o.ftentidentifier,q=o.containerorderingmode,r=i.getCommentList(String(p),String(n),q);r.addCommentIDs(o.range.offset,o.range.length,o.values);r.updateCommentCount(o.count)}});c("UFICentralUpdates").subscribe("update-comments",function(k,l){if(l.comments&&l.comments.length)l.comments.forEach(function(m){var n=m.parentcommentid;if(!n)return;i.getReplyListsForParentCommentID(String(n)).forEach(function(o){o.addOrUpdateComment(m)})})});f.exports=i}),22);
__d("UFIToplevelPagedCommentListImpl",["ActorURI","MercuryServerDispatcher","UFICommentLogger","UFIComments","UFIConfig","UFIOrderingModeStore","UFIPagedCommentListImpl","URI","WebCommentViewOption"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("UFIPagedCommentListImpl"));i=h&&h.prototype;function j(k,l){i.constructor.call(this,k);this.clientHasAll=false;this.orderReversed=c("UFIOrderingModeStore").isInverted(l);this.orderingMode=l;this.clientHasAll=false}j.prototype.fetchComments=function(k,l,m){if(c("UFIConfig").logCommentLoad)c("UFICommentLogger").logCommentFetch(this.feedbackTargetID,Date.now(),{request_length:l,is_reply:false});var n={ft_ent_identifier:this.feedbackTargetID,viewas:m&&m.viewAs?m.viewAs+"":null,source:m&&m.feedbackSource,offset:k,length:l,orderingmode:this.orderingMode,feed_context:m?m.feedContext:null,numpagerclicks:m?m.numPagerClicks:null,translate_all:m?m.translateAll:null,clientcommentcount:this.count};if(this.orderingMode!==c("WebCommentViewOption").RECENT_ACTIVITY||this.orderingMode!==c("WebCommentViewOption").RANKED_THREADED||this.orderingMode!==c("WebCommentViewOption").FILTERED)delete n.clientcommentcount;if(!m||!m.viewAs)n[c("ActorURI").PARAMETER_ACTOR]=this.actorID;c("MercuryServerDispatcher").trySend("/ajax/ufi/comment_fetch.php",n)};j.prototype.commentsFromCommentIDs=function(k,l,m){var n={},o=l,p=l+m-1;for(var q=0;q<m;q++){var r=this.orderReversed?p-q:o+q,s=c("UFIComments").getComment(k[r]);if(s)n[l+q]=s}return n};j.prototype.getOrderingMode=function(){return this.orderingMode};j.prototype.setClientHasAll=function(k){this.clientHasAll=k};j.prototype.getClientHasAll=function(){return this.clientHasAll};j.prototype.buildCommentPermalink=function(k,l,m){if(!this.basePermalink)return null;return new(c("URI"))(this.basePermalink).addQueryData({comment_id:l}).toString()};c("MercuryServerDispatcher").registerEndpoints({"/ajax/ufi/comment_fetch.php":{mode:c("MercuryServerDispatcher").IMMEDIATE}});f.exports=j}),null);
__d("UFIRange",[],(function a(b,c,d,e,f,g){"use strict";function h(){var i=arguments.length<=0||arguments[0]===undefined?0:arguments[0],j=arguments.length<=1||arguments[1]===undefined?0:arguments[1];this.offset=i;this.length=j;this.requestedOffset=this.offset;this.requestedLength=this.length}h.prototype.getOffset=function(){return this.offset};h.prototype.getLength=function(){return this.length};h.prototype.getRequestedOffset=function(){return this.requestedOffset};h.prototype.getRequestedLength=function(){return this.requestedLength};h.prototype.updateRequestedRange=function(i,j){this.requestedOffset=i;this.requestedLength=j;return this};h.prototype.isLoadingNext=function(){var i=this.requestedOffset+this.requestedLength,j=this.offset+this.length;return i>j};h.prototype.isLoadingPrev=function(){return this.requestedOffset<this.offset};h.combine=function(i,j){if(!j)return i;var k=Math.min(i.getOffset(),j.getOffset()),l=Math.max(i.getLength(),j.getLength()),m=new h(k,l);if(j.getRequestedLength()>0){var n=Math.min(k,j.getRequestedOffset()),o=Math.max(k+l,j.getRequestedOffset()+j.getRequestedLength());m.updateRequestedRange(n,o-n)}return m};f.exports=h}),null);
__d("UFIStreamingStateType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({LIVE:"live",ON_DEMAND:"on_demand"})}),null);
__d("UFIToplevelStreamedCommentList",["invariant","ClientIDs","Map","UFICentralUpdates","UFICommentLogger","UFIComments","UFIConfig","UFIConstants","UFIRange","UFIStreamingStateType"],(function a(b,c,d,e,f,g,h){"use strict";function i(j){this.feedbackTargetID=j;this.commentIDs=[];this.deletedCount=0;this.totalCommentCount=0}i.prototype.getFeedbackTargetID=function(){return this.feedbackTargetID};i.prototype.getClientHasAll=function(){return false};i.prototype.getActualCommentCount=function(){return this.commentIDs.length};i.prototype.getCommentCount=function(){return this.totalCommentCount};i.prototype.getDisplayedCommentCount=function(){return this.getCommentCount()-this.getDeletedCount()};i.prototype.getDeletedCount=function(){return this.deletedCount};i.prototype.getPermalinkForComment=function(j){return""};i.prototype.getComments=function(j,k,l,m){m(this.getCommentsOrThrow(new(c("UFIRange"))(j,k),l))};i.prototype.getCommentsOrThrow=function(j,k){var l=j.getLength(),m=j.getOffset();m===0||h(0);var n=k.streamingOrderReversed,o={};for(var p=0;p<Math.min(l,this.commentIDs.length);++p){var q=n?this.commentIDs.length-1-p:p,r=c("UFIComments").getComment(this.commentIDs[q]);if(r)o[p]=r}return o};i.prototype.$UFIToplevelStreamedCommentList3=function(){var j=this.commentIDs;this.commentIDs=[];return j};i.prototype.hasComment=function(j){for(var k=0;k<this.commentIDs.length;++k)if(this.commentIDs[k]===j.id)return true;return false};i.prototype.addCommentIDs=function(j,k,l){};i.prototype.setClientHasAll=function(j){};i.prototype.addOrUpdateComment=function(j){var k=arguments.length<=1||arguments[1]===undefined?null:arguments[1],l=j.clientid;if(l&&c("ClientIDs").isExistingClientID(l)){for(var m=0;m<this.commentIDs.length;++m)if(this.commentIDs[m]===l){this.commentIDs[m]=j.id;if(c("UFIConfig").logCommentPost)c("UFICommentLogger").logNewCommentReceived(l,Date.now())}}else if(k||j.__typename==="local"){if(this.hasComment(j))return;this.commentIDs.push(j.id);if(k!==c("UFIStreamingStateType").ON_DEMAND&&!j.isAnnouncement&&!j.tipOptionIndex)this.totalCommentCount+=1}if(this.commentIDs.length>50)this.commentIDs.shift();c("UFICentralUpdates").didUpdateFeedback(this.feedbackTargetID)};i.prototype.deleteComment=function(j){this.deletedCount+=1;var k=[];for(var l=0;l<this.commentIDs.length;++l){var m=this.commentIDs[l];if(m!==j)k.push(m)}this.commentIDs=k};i.prototype.updateCommentCount=function(j){this.totalCommentCount=j;this.deletedCount=0};i.getCommentList=function(j){var k=arguments.length<=1||arguments[1]===undefined?i.GLOBAL_ID:arguments[1],l=i.$UFIToplevelStreamedCommentList1.get(j);if(!l){l=new(c("Map"))();i.$UFIToplevelStreamedCommentList1.set(j,l)}var m=l.get(k);if(!m){m=new i(j);l.set(k,m)}return m};i.getExistingCommentList=function(j){var k=arguments.length<=1||arguments[1]===undefined?i.GLOBAL_ID:arguments[1],l=i.$UFIToplevelStreamedCommentList1.get(j);if(!l)return null;return l.get(k)};i.getAllExistingCommentLists=function(j){var k=i.$UFIToplevelStreamedCommentList1.get(j);if(!k)return[];return Array.from(k.values())};i.$UFIToplevelStreamedCommentList4=function(j,k){var l=i.$UFIToplevelStreamedCommentList2.get(j);if(l){k.forEach(function(n){l[n]=true});return}var m={};k.forEach(function(n){m[n]=true});i.$UFIToplevelStreamedCommentList2.set(j,m)};i.resetCommentList=function(j){var k=arguments.length<=1||arguments[1]===undefined?i.GLOBAL_ID:arguments[1],l=i.getExistingCommentList(j,k);if(!l)return;i.$UFIToplevelStreamedCommentList4(j,l.$UFIToplevelStreamedCommentList3())};i.resetAllCommentLists=function(j){var k=i.getAllExistingCommentLists(j);if(k.length===0)return;k.forEach(function(m){i.$UFIToplevelStreamedCommentList4(j,m.$UFIToplevelStreamedCommentList3())});var l=i.$UFIToplevelStreamedCommentList2.get(j);if(l){i.$UFIToplevelStreamedCommentList2["delete"](j);c("UFIComments").resetComments(l)}};i.GLOBAL_ID="GLOBAL_ID";i.$UFIToplevelStreamedCommentList1=new(c("Map"))();i.$UFIToplevelStreamedCommentList2=new(c("Map"))();c("UFICentralUpdates").subscribe("update-actions",function(j,k){if(!k.actions)return;k.actions.forEach(function(l){if(l.actiontype!==c("UFIConstants").UFIActionType.DELETE_COMMENT)return;var m=c("UFIComments").getComment(l.commentid);if(!m)return;var n=m.id,o=m.ftentidentifier,p=m.parentcommentid;if(p)return;if(l.islocal||m.status!==c("UFIConstants").UFIStatus.DELETED&&m.status!==c("UFIConstants").UFIStatus.FAILED_ADD)i.getAllExistingCommentLists(o).forEach(function(q){return q.deleteComment(n)})})});c("UFICentralUpdates").subscribe("update-comments",function(j,k){if(!k.comments)return;var l=k.targetufiinstanceid;k.comments.forEach(function(m){if(m.parentcommentid)return;if(l)i.getCommentList(m.ftentidentifier,l).addOrUpdateComment(m,k.streamingstate);else i.getAllExistingCommentLists(m.ftentidentifier).forEach(function(n){n.addOrUpdateComment(m,k.streamingstate)})})});c("UFICentralUpdates").subscribe("update-feedback",function(j,k){var l=k.feedbacktarget?k.feedbacktarget:k.feedbacktargets&&k.feedbacktargets[0];if(!l)return;i.getAllExistingCommentLists(l.entidentifier).forEach(function(m){return m.updateCommentCount(l.commentcount)})});f.exports=i}),22);
__d("UFIToplevelPagedCommentList",["UFICentralUpdates","UFIComments","UFIConstants","UFIReplyCommentList","UFIToplevelPagedCommentListImpl","UFIToplevelStreamedCommentList","WebCommentViewOption"],(function a(b,c,d,e,f,g){"use strict";var h={},i={getCommentList:function k(l,m){if(!h[l])h[l]={};if(!h[l][m]){var n=new(c("UFIToplevelPagedCommentListImpl"))(l,m),o=i.getCommentListsForFeedbackTargetID(l);if(o.length)n.updateCommentCount(o[0].getCommentCount());h[l][m]=n}return h[l][m]},getCommentListsForFeedbackTargetID:function k(l){var m=[],n=h[l]||{};for(var o in n)m.push(n[o]);return m},getPagedCommentCountForFeedbackTargetID:function k(l){var m=i.getCommentListsForFeedbackTargetID(l);return m.length?m[0].getCommentCount():null},getDisplayedCommentCountForFeedbackTargetID_UNSAFE:function k(l){var m=i.getCommentListsForFeedbackTargetID(l),n=m.length?m[0].getDisplayedCommentCount():null,o=c("UFIToplevelStreamedCommentList").getAllExistingCommentLists(l),p=o.length?o[0].getDisplayedCommentCount():null;if(n===null&&p===null)return null;return Math.max(n||0,p||0)},resetCommentListsForFeedbackTargetID:function k(l){if(!h[l])return;var m={};for(var n in h[l]){var o=h[l][n],p=o.reset();for(var q in p){var r=p[q];m[r]=true}}c("UFIComments").resetComments(m)},resetCommentListsWithContext:function k(l,m){var n=h[l];if(!n)return;var o={};for(var p in n){var q=n[p];q.actorID=m;var r=q.reset();for(var s in r){var t=r[s];o[t]=true;c("UFIReplyCommentList").resetWithContext(l,t,m,p)}}c("UFIComments").resetComments(o)}};function j(k){var l=c("UFIComments").getComment(k.commentid);if(!l)return;var m=l.id,n=l.ftentidentifier,o=l.parentcommentid;if(o)return;if(k.islocal||l.status!==c("UFIConstants").UFIStatus.DELETED&&l.status!==c("UFIConstants").UFIStatus.FAILED_ADD)i.getCommentListsForFeedbackTargetID(n).forEach(function(p){p.deleteComment(m)})}c("UFICentralUpdates").subscribe("update-actions",function(k,l){if(l.actions&&l.actions.length)for(var m=0;m<l.actions.length;m++){var n=l.actions[m];switch(n.actiontype){case c("UFIConstants").UFIActionType.DELETE_COMMENT:j(n);break}}});c("UFICentralUpdates").subscribe("update-comment-lists",function(k,l){var m=l.commentlists;if(m&&m.comments&&Object.keys(m).length)for(var n in m.comments)for(var o in m.comments[n]){var p=m.comments[n][o],q=i.getCommentList(String(n),o);q.addCommentIDs(p.range.offset,p.range.length,p.values);q.setClientHasAll(!!p.forcenotpageable)}});c("UFICentralUpdates").subscribe("update-comments",function(k,l){if(l.comments&&l.comments.length)l.comments.forEach(function(m){if(m.parentcommentid)return;var n=m.ftentidentifier;i.getCommentListsForFeedbackTargetID(String(n)).forEach(function(o){o.addOrUpdateComment(m)})})});c("UFICentralUpdates").subscribe("update-feedback",function(k,l){var m,n=l.feedbacktarget?l.feedbacktarget:l.feedbacktargets&&l.feedbacktargets[0];if(n)(function(){var o=n.entidentifier,p=n.defaultcommentorderingmode,q={};if(p)q[p]=true;if(n.orderingmodes)n.orderingmodes.forEach(function(s){if(s.value===c("WebCommentViewOption").LIVE_STREAMING)return;q[s.value]=true});for(var r in q)i.getCommentList(String(o),String(r)).updateCommentCount(n.commentcount)})()});f.exports=i}),22);
__d("XGroupsMuteMembersController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/groups/mutemember/",{group_id:{type:"FBID"},user_id:{type:"FBID"},mute_duration:{type:"Enum",enumType:1},source:{type:"Enum",enumType:1},should_reload:{type:"Bool",defaultValue:false},mute_reason:{type:"FBID"},custom_expiration:{type:"Int"}})}),null);
__d("XTownHallController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/townhall/",{address:{type:"String"},nux_shown:{type:"Bool",defaultValue:false},ref:{type:"Enum",enumType:1},term:{type:"String"},override_address:{type:"Bool",defaultValue:false},campaign:{type:"String"},setting_nux:{type:"Bool",defaultValue:false},notif_id:{type:"Int"},new_reps:{type:"Int"}})}),null);
__d("XUFIActorChangeController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ufi/actor/change/",{})}),null);
__d("XUFIAddCommentController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ufi/add/comment/",{})}),null);
__d("XUFICommentAcceptAnswerController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ufi/comment/answer/accept/",{})}),null);
__d("XUFICommentAppealSpamController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ufi/comment/appeal_spam/",{})}),null);
__d("XUFICommentKeepSpamController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ufi/comment/keep_spam/",{})}),null);
__d("XUFICommentLikeController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ufi/comment/like/",{})}),null);
__d("XUFICommentSecureAccountController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ufi/comment/secure_account/",{})}),null);
__d("XUFIDeleteCommentAndRemoveCommenterController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ufi/deletecommentandremovecommenter/",{})}),null);
__d("XUFIDeleteCommentController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ufi/delete/comment/",{})}),null);
__d("XUFIEditCommentController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ufi/edit/comment/",{})}),null);
__d("XUFIHideCommentController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ufi/hide/comment/",{})}),null);
__d("XUFILikeController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ufi/like/",{})}),null);
__d("XUFISendMessageController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ufi/message/send/",{})}),null);
__d("XUFIToggleTextDelightsAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/textdelights/hide_comment_text_delights/",{comment_id:{type:"String"},should_hide:{type:"Bool",defaultValue:false}})}),null);
__d("XUFITranslateCommentController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ufi/translate/comment/",{})}),null);
__d("UFIUserActions",["errorCode","fbt","invariant","ActorURI","AsyncResponse","Bootloader","ChannelClientID","ClientIDs","CommentPostedLiveState","ImmutableObject","MercuryServerDispatcher","UFICentralUpdates","UFICommentLogger","UFIComments","UFIConfig","UFIConstants","UFIFeedbackTargets","UFIReactionUserActions","UFIToplevelPagedCommentList","UFIToplevelStreamedCommentList","UFIUserActionUtils","UFIVideoPlayerRegistry","UnicodeBidi","XGroupsMuteMembersController","XTownHallController","XUFIActorChangeController","XUFIAddCommentController","XUFICommentAcceptAnswerController","XUFICommentAppealSpamController","XUFICommentKeepSpamController","XUFICommentLikeController","XUFICommentSecureAccountController","XUFIDeleteCommentAndRemoveCommenterController","XUFIDeleteCommentController","XUFIEditCommentController","XUFIHideCommentController","XUFILikeController","XUFISendMessageController","XUFIToggleTextDelightsAsyncController","XUFITranslateCommentController","goURI","ifRequired"],(function a(b,c,d,aa,e,ba,ca,f,g){"use strict";var h={BAN:"ban",UNDO_BAN:"undo_ban"},i={changeActor:function N(O,P){c("UFIFeedbackTargets").getFeedbackTarget(O,function(Q){var R;c("UFIToplevelPagedCommentList").resetCommentListsWithContext(O,P);c("UFIToplevelStreamedCommentList").resetAllCommentLists(O);c("UFICentralUpdates").inform("actor-changed",{actorID:P});var S=(R={from_actor_id:Q.actorforpost,ft_ent_identifier:O},R[c("ActorURI").PARAMETER_ACTOR]=P,R),T=c("XUFIActorChangeController").getURIBuilder().getURI();c("MercuryServerDispatcher").trySend(T,S)})},changeCommentLike:function N(O,P,Q){var R,S=c("UFIComments").getComment(O);if(S&&S.__typename==="saved"&&S.hasviewerliked!=P)(function(){var T=Q.target?c("UFIUserActionUtils").trackingData(Q.target):{},U=P?1:-1,V={commentid:O,actiontype:c("UFIConstants").UFIActionType.COMMENT_LIKE,viewerliked:P,likecount:(S.likecount||0)+U};c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:[V]});c("UFIFeedbackTargets").getFeedbackTarget(S.ftentidentifier,function(W){var X={};X[c("ActorURI").PARAMETER_ACTOR]=W.actorforpost;var Y=c("XUFICommentLikeController").getURIBuilder().getURI();c("MercuryServerDispatcher").trySend(Y,babelHelpers["extends"]({comment_id:O,legacy_id:S.legacyid,like_action:P,ft_ent_identifier:S.ftentidentifier,source:Q.source,client_id:c("ClientIDs").getNewClientID(),session_id:c("ChannelClientID").getID()},T,X))})})()},_getAttachment:function N(O){return O},_getLocalComment:function N(O,P,Q,R,S,T){var U=c("ClientIDs").getNewClientID(),V=c("UnicodeBidi").isDirectionLTR(Q)?"ltr":"rtl",W=this._getAttachment(S.attachedsticker);return{__typename:"local",ftentidentifier:P,body:{text:Q,dir:V},author:O.actorforpost,cancomment:false,clientid:null,fbid:null,id:U,ufiinstanceid:S.ufiinstanceid,likecount:0,hasviewerliked:false,parentcommentid:S.replyid,replycommentparentid:S.replycommentparentid,attachment:W,photo_comment:S.attachedphoto,video_comment:S.attachedvideo,timestamp:{time:Math.floor(Date.now()/1e3),text:f._("a few seconds ago")},photoTextTagID:S.photoTextTagID,isPhotoTag:S.isPhotoTag,photoTagX:S.photoTagX,photoTagY:S.photoTagY,videoTimeOffset:T,postedLiveState:S.islivestreaming?c("CommentPostedLiveState").LIVE:c("CommentPostedLiveState").ON_DEMAND}},addMessage:function N(O,P,Q,R,S){c("UFIFeedbackTargets").getFeedbackTarget(O,function(T){this.sendMessage(O,P,Q,R,S)}.bind(this))},sendMessage:function N(O,P,Q,R,S){var T=c("UFIFeedbackTargets").getFeedbackTargetIfExists(O);if(!(T&&T.actorforpost))return;var U=this._getLocalComment(T,O,P,Q,R,null);this._sendMessageToServer(O,T.actorforpost,P,Q,R,U.id,S)},addComment:function N(O,P,Q,R){c("UFIFeedbackTargets").getFeedbackTarget(O,function(S){var T=this.createComment(O,P,Q,R);if(!T)return;var U={actiontype:c("UFIConstants").UFIActionType.SUBSCRIBE_ACTION,actorid:S.actorforpost,hasviewersubscribed:true,entidentifier:S.entidentifier},V={actiontype:c("UFIConstants").UFIActionType.ADD_COMMENT_ACTION,feedbackfbid:S.targetfbid};c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.USER_ACTION,{comments:[T],actions:[U,V]})}.bind(this))},createComment:function N(O,P,Q,R){var S=c("UFIFeedbackTargets").getFeedbackTargetIfExists(O);if(!(S&&S.actorforpost))return null;var T=null;if(R.isBroadcasterUFI)T=c("ifRequired")("LiveVideoBroadcastBroadcastStore",function(X){return X.getCurrentBroadcastTime()});else if(R.fluentContentToken&&(R.isLiveVOD||R.islivestreaming||R.enableVODCommentTimestamps)){var U=c("UFIVideoPlayerRegistry").getAvailableVideoPlayerControllerTimeForElement(R.target,R.fluentContentToken)||0;if(R.isLiveVOD||R.islivestreaming)T=U;else{var V=c("UFIVideoPlayerRegistry").getAvailableVideoPlayerControllerForElement(R.target,R.fluentContentToken);if(V!=null&&U>0&&U<Math.floor(V.getPlaybackDuration()))T=U}}var W=this._getLocalComment(S,O,P,Q,R,T);this._sendCommentToServer(O,S.actorforpost,P,Q,R,W.id,T);return W},_sendMessageToServer:function N(O,P,Q,R,S,T,U){var V=c("XUFISendMessageController").getURIBuilder().getURI();c("MercuryServerDispatcher").trySend(V,{ft_ent_identifier:O,comment_text:R,client_id:T,attached_sticker_fbid:S.attachedsticker?S.attachedsticker.fbid:0,attached_photo_fbid:S.attachedphoto?S.attachedphoto.fbid:0,attached_video_fbid:S.attachedvideo?S.attachedvideo.fbid:0,attached_share_url:S.attachedshareurl,messenger_recipient:U})},_sendCommentToServer:function N(O,P,Q,R,S,T,U){var V=null;if(S.reply_fbid)V=S.reply_fbid;else if(S.replyid){var W=c("UFIComments").getComment(S.replyid);W||g(0);V=W.fbid}var X=void 0;if(c("UFIConfig").logCommentPost)c("UFICommentLogger").logNewCommentPost(T,S.timestamp||0,{has_photo:!!S.attachedphoto,has_video:!!S.attachedvideo,has_sticker:!!S.attachedsticker,is_reply:!!S.replyid});var Y={};Y[c("ActorURI").PARAMETER_ACTOR]=P;var Z=c("XUFIAddCommentController").getURIBuilder().getURI();c("MercuryServerDispatcher").trySend(Z,babelHelpers["extends"]({ft_ent_identifier:O,comment_text:R,source:S.source,client_id:T,session_id:c("ChannelClientID").getID(),reply_fbid:V,parent_comment_id:S.parent_comment_id||S.replyid,reply_comment_parent_id:S.replycommentparentid,rootid:S.rootid,clp:X,attached_sticker_fbid:S.attachedsticker?S.attachedsticker.fbid:0,attached_photo_fbid:S.attachedphoto?S.attachedphoto.fbid:0,attached_video_fbid:S.attachedvideo?S.attachedvideo.fbid:0,attached_share_url:S.attachedshareurl,feedback_referrer:S.feedbackReferrer,feed_context:S.feedcontext,video_time_offset:U,is_live_streaming:S.islivestreaming,is_markdown:S.isMarkdown},c("UFIUserActionUtils").trackingData(S.target),Y,{photo_text_tag_id:S.photoTextTagID,is_private:S.isPrivate,is_photo_tag:S.isPhotoTag,photo_fbid:S.photoFBID,photo_tag_x:S.photoTagX,photo_tag_y:S.photoTagY}))},_hasCommentTextChanged:function N(O,P){return!!O.body&&O.body.text!=P},_hasCommentPhotoChanged:function N(O,P){return!!((O||P)&&!(O&&P)||O&&P&&O.fbid!=P.fbid)},_hasCommentVideoChanged:function N(O,P){return!!((O||P)&&!(O&&P)||O&&P&&O.fbid!=P.fbid)},_hasCommentStickerChanged:function N(O,P){return!!((O||P)&&!(O&&P)||O&&O.type=="sticker"&&P&&O.fbid!=P.fbid)},_hasCommentShareURLChanged:function N(O,P){if(P)return true;else return Boolean(O&&O.type=="share")},editComment:function N(O,P,Q,R){var S=c("UFIUserActionUtils").trackingData(R.target),T=c("UFIComments").getComment(O);if(!T)return;var U=this._hasCommentTextChanged(T,P)||this._hasCommentPhotoChanged(T.photo_comment,R.attachedPhoto)||this._hasCommentStickerChanged(T.attachment,R.attachedSticker)||this._hasCommentVideoChanged(T.video_comment,R.attachedVideo)||this._hasCommentShareURLChanged(T.attachment,R.attachedShareURL);T=c("ImmutableObject").set(T,{status:c("UFIConstants").UFIStatus.PENDING_EDIT,body:{text:P},editnux:null,attachment:R.attachedSticker,photo_comment:R.attachedPhoto,video_comment:R.attachedVideo});if(U)T=c("ImmutableObject").set(T,{originalTimestamp:T.timestamp.time,timestamp:{time:Math.floor(Date.now()/1e3),text:f._("a few seconds ago")}});c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.USER_ACTION,{comments:[T]});c("UFIFeedbackTargets").getFeedbackTarget(T.ftentidentifier,function(V){var W={};W[c("ActorURI").PARAMETER_ACTOR]=V.actorforpost;var X=c("XUFIEditCommentController").getURIBuilder().getURI();if(T)c("MercuryServerDispatcher").trySend(X,babelHelpers["extends"]({ft_ent_identifier:T.ftentidentifier,comment_text:Q,source:R.source,comment_id:T.id,parent_comment_id:T.parentcommentid,attached_sticker_fbid:R.attachedSticker?R.attachedSticker.fbid:0,attached_photo_fbid:R.attachedPhoto?R.attachedPhoto.fbid:0,attached_video_fbid:R.attachedVideo?R.attachedVideo.fbid:0,attached_share_url:R.attachedShareURL,is_markdown:R.isMarkdown},S,W))})},translateComments:function N(O,P,Q,R){var S=c("XUFITranslateCommentController").getURIBuilder().getURI();c("MercuryServerDispatcher").trySend(S,{ft_ent_identifier:O,comment_ids:P,source:R.source,trigger:Q})},setHideAsSpam:function N(O,P,Q){var R=c("UFIUserActionUtils").trackingData(Q.target),S=c("UFIComments").getComment(O),T={commentid:O,actiontype:c("UFIConstants").UFIActionType.COMMENT_SET_SPAM,shouldHideAsSpam:P};c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:[T]});if(S)c("UFIFeedbackTargets").getFeedbackTarget(S.ftentidentifier,function(U){var V={};V[c("ActorURI").PARAMETER_ACTOR]=U.actorforpost;var W=c("XUFIHideCommentController").getURIBuilder().getURI();c("MercuryServerDispatcher").trySend(W,babelHelpers["extends"]({comment_id:O,spam_action:P,ft_ent_identifier:S.ftentidentifier,source:Q.source},R,V))})},keepSpam:function N(O,P){var Q=c("UFIUserActionUtils").trackingData(P.target),R=c("UFIComments").getComment(O),S={commentid:O,actiontype:c("UFIConstants").UFIActionType.COMMENT_KEEP_SPAM};c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:[S]});if(R)c("UFIFeedbackTargets").getFeedbackTarget(R.ftentidentifier,function(T){var U={};U[c("ActorURI").PARAMETER_ACTOR]=T.actorforpost;var V=c("XUFICommentKeepSpamController").getURIBuilder().getURI();c("MercuryServerDispatcher").trySend(V,babelHelpers["extends"]({comment_id:O,ft_ent_identifier:R.ftentidentifier,source:P.source},Q,U));c("Bootloader").loadModules(["SimpleXUIDialog"],function(W){W.show(f._("This comment is now visible on your post."),f._("Comment Restored"))},"UFIUserActions")})},appealSpam:function N(O,P,Q){var R=c("UFIUserActionUtils").trackingData(Q.target),S=c("UFIComments").getComment(O),T={commentid:O,actiontype:c("UFIConstants").UFIActionType.COMMENT_APPEAL_SPAM};c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:[T]});if(S)c("UFIFeedbackTargets").getFeedbackTarget(S.ftentidentifier,function(U){var V={};V[c("ActorURI").PARAMETER_ACTOR]=U.actorforpost;var W=c("XUFICommentAppealSpamController").getURIBuilder().getURI();c("MercuryServerDispatcher").trySend(W,babelHelpers["extends"]({comment_id:O,ft_ent_identifier:S.ftentidentifier,source:Q.source},R,V));c("Bootloader").loadModules(["SimpleXUIDialog"],function(X){X.show(f._("Your feedback helps us do better."),f._("Thanks for Letting Us Know"))},"UFIUserActions")})},secureAccount:function N(O,P){var Q=c("UFIUserActionUtils").trackingData(P.target),R=c("UFIComments").getComment(O),S={actiontype:c("UFIConstants").UFIActionType.COMMENT_SECURE_ACCOUNT,commentid:O,islocal:true,oneclick:P.oneclick};c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:[S]});if(R)c("UFIFeedbackTargets").getFeedbackTarget(R.ftentidentifier,function(T){var U={};U[c("ActorURI").PARAMETER_ACTOR]=T.actorforpost;var V=c("XUFICommentSecureAccountController").getURIBuilder().getURI();c("MercuryServerDispatcher").trySend(V,babelHelpers["extends"]({comment_id:R.id,ft_ent_identifier:R.ftentidentifier,source:P.source},Q,U))})},removeComment:function N(O,P,Q){var R=c("UFIUserActionUtils").trackingData(P.target),S=c("UFIComments").getComment(O),T={actiontype:c("UFIConstants").UFIActionType.DELETE_COMMENT,commentid:O,islocal:true,oneclick:P.oneclick};c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:[T]});if(S&&S.__typename==="saved")c("UFIFeedbackTargets").getFeedbackTarget(S.ftentidentifier,function(U){var V={};V[c("ActorURI").PARAMETER_ACTOR]=U.actorforpost;var W=c("XUFIDeleteCommentController").getURIBuilder().getURI();c("MercuryServerDispatcher").trySend(W,babelHelpers["extends"]({comment_id:S.id,comment_legacyid:S.legacyid,ft_ent_identifier:S.ftentidentifier,one_click:P.oneclick,source:P.source,client_id:c("ClientIDs").getNewClientID()},R,V))})},removeCommentWithRule:function N(O,P,Q){var R=c("UFIUserActionUtils").trackingData(P.target),S=c("UFIComments").getComment(O),T={actiontype:c("UFIConstants").UFIActionType.DELETE_COMMENT,commentid:O,islocal:true,oneclick:P.oneclick};c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:[T]});if(S&&S.__typename==="saved")c("UFIFeedbackTargets").getFeedbackTarget(S.ftentidentifier,function(U){var V={};V[c("ActorURI").PARAMETER_ACTOR]=U.actorforpost;var W=c("XUFIDeleteCommentController").getURIBuilder().getURI();c("MercuryServerDispatcher").trySend(W,babelHelpers["extends"]({comment_id:S.id,comment_legacyid:S.legacyid,ft_ent_identifier:S.ftentidentifier,one_click:P.oneclick,source:P.source,rule_id:Q,client_id:c("ClientIDs").getNewClientID()},R,V))})},deleteCommentAndRemoveCommenter:function N(O,P,Q,R,S,T,U){var V=c("UFIUserActionUtils").trackingData(P.target),W=c("UFIComments").getComment(O),X={actiontype:c("UFIConstants").UFIActionType.DELETE_COMMENT_REMOVE_COMMENTER,commentid:O,islocal:true,oneclick:P.oneclick};c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:[X]});if(W&&W.__typename==="saved")c("UFIFeedbackTargets").getFeedbackTarget(W.ftentidentifier,function(Y){var Z={};Z[c("ActorURI").PARAMETER_ACTOR]=Y.actorforpost;var $=c("XUFIDeleteCommentAndRemoveCommenterController").getURIBuilder().getURI();c("MercuryServerDispatcher").trySend($,babelHelpers["extends"]({comment_id:W.id,comment_legacyid:W.legacyid,ft_ent_identifier:W.ftentidentifier,one_click:P.oneclick,source:P.source,delete_posts:Q,delete_comments:R,decline_pending_members:S,block_permanently:T,apply_to_other_groups:U,client_id:c("ClientIDs").getNewClientID()},V,Z))})},muteMember:function N(O,P,Q,R){var S=c("UFIComments").getComment(O),T=Q!==null;if(S&&S.__typename==="saved"){var U={authorid:S.author,actiontype:c("UFIConstants").UFIActionType.MUTE_MEMBER,shouldmute:T};c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:[U]});var V;c("Bootloader").loadModules(["GroupMemberActionSource"],function(X){V=X.GROUP_COMMENT},"UFIUserActions");var W=c("XGroupsMuteMembersController").getURIBuilder().getURI();c("MercuryServerDispatcher").trySend(W,{group_id:S.group_id,user_id:S.author,mute_duration:Q,custom_expiration:R,should_reload:false,source:V})}},toggleTextDelights:function N(O,P,Q){var R=c("XUFIToggleTextDelightsAsyncController").getURIBuilder().getURI();c("MercuryServerDispatcher").trySend(R,{comment_id:O.id,ft_ent_identifier:O.ftentidentifier,should_hide:Q,parent_comment_id:O.parentcommentid,source:P.source})},changeAcceptedAnswer:function N(O,P){c("MercuryServerDispatcher").trySend(x,{ft_ent_identifier:O.id,do_accept:P})},banUser:function N(O,P,Q,R){var S=Q?h.BAN:h.UNDO_BAN;c("MercuryServerDispatcher").trySend("/ajax/ufi/ban_user.php",{page_id:P,commenter_id:O.author,action:S,comment_id:O.id,client_side:true})},changeSubscribe:function N(O,P,Q){c("UFIFeedbackTargets").getFeedbackTarget(O,function(R){var S=c("UFIUserActionUtils").trackingData(Q.target);if(R.hasviewersubscribed!==P){var T={actiontype:c("UFIConstants").UFIActionType.SUBSCRIBE_ACTION,actorid:R.actorforpost,hasviewersubscribed:P,entidentifier:O};c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:[T]});var U={};U[c("ActorURI").PARAMETER_ACTOR]=R.actorforpost;c("MercuryServerDispatcher").trySend("/ajax/ufi/subscribe.php",babelHelpers["extends"]({subscribe_action:P,ft_ent_identifier:O,source:Q.source,client_id:c("ClientIDs").getNewClientID(),rootid:Q.rootid,comment_expand_mode:Q.commentexpandmode},S,U))}})},fetchSpamComments:function N(O,P,Q,R){c("MercuryServerDispatcher").trySend("/ajax/ufi/id_comment_fetch.php",{ft_ent_identifier:O,viewas:R,comment_ids:P,parent_comment_id:Q,source:null})},manageConstituentBadge:function N(O){c("goURI")(c("XTownHallController").getURIBuilder().setBool("setting_nux",true).getURI())},removePreview:function N(O,P){var Q=c("UFIUserActionUtils").trackingData(P.target),R={commentid:O.id,actiontype:c("UFIConstants").UFIActionType.REMOVE_PREVIEW};c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:[R]});c("MercuryServerDispatcher").trySend("/ajax/ufi/remove_preview.php",babelHelpers["extends"]({comment_id:O.id,ft_ent_identifier:O.ftentidentifier,source:P.source},Q))}};function j(N){c("AsyncResponse").defaultErrorHandler(N)}function k(N){var O=N.request.data;c("AsyncResponse").defaultErrorHandler(N);var P=O.client_id||O.comment_id,Q=c("UFIComments").getComment(P);if(!Q)return;var R=Q.status===c("UFIConstants").UFIStatus.PENDING_EDIT?c("UFIConstants").UFIStatus.FAILED_EDIT:c("UFIConstants").UFIStatus.FAILED_ADD;Q=c("ImmutableObject").setDeep(Q,{status:R,allowRetry:l(N),body:{mentionstext:O.comment_text,mentionsphoto:Q.photo_comment,mentionsvideo:Q.video_comment}});c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.USER_ACTION,{comments:[Q]})}function l(N){var O=N.getError();if(N.isBlockedAction())return false;if(N.silentError)return true;if(O===1357012||O===1357006)return false;return true}function m(N){var O=N.request.data,P=O.comment_id,Q=c("UFIComments").getComment(P);if(!Q)return;Q=c("ImmutableObject").set(Q,{status:Q.priorstatus||null,priorstatus:undefined});c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.USER_ACTION,{comments:[Q]})}function n(N){var O=N.request.data,P=O.comment_id,Q=c("UFIComments").getComment(P);if(!Q)return;Q=c("ImmutableObject").set(Q,{commentid:P,needsApproval:!Q.needsApproval,isApproved:!Q.isApproved});c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.USER_ACTION,{comments:[Q]})}function o(N){var O=N.request.data,P=O.comment_id,Q=c("UFIComments").getComment(P);if(Q){Q=c("ImmutableObject").set(Q,{commentid:P,appealStatus:null,canAppeal:!Q.canAppeal,canSecure:!Q.canSecure});c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.USER_ACTION,{comments:[Q]})}}function p(N){var O=N.request.data,P=O.comment_id,Q=c("UFIComments").getComment(P);if(Q&&O.like_action===Q.hasviewerliked){var R=Q.hasviewerliked?-1:1,S={commentid:P,actiontype:c("UFIConstants").UFIActionType.COMMENT_LIKE,viewerliked:!Q.hasviewerliked,likecount:(Q.likecount||0)+R};c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:[S]})}c("AsyncResponse").defaultErrorHandler(N)}function q(N){var O=N.request.data,P=O.ft_ent_identifier;c("UFIFeedbackTargets").getFeedbackTarget(P,function(Q){if(Q.hasviewerliked===O.like_action){var R=Q.hasviewerliked?-1:1,S={actiontype:c("UFIConstants").UFIActionType.LIKE_ACTION,actorid:Q.actorforpost,hasviewerliked:!Q.hasviewerliked,likecount:(Q.likecount||0)+R,entidentifier:P,likesentences:{current:Q.likesentences.alternate,alternate:Q.likesentences.current}};c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:[S]})}});c("AsyncResponse").defaultErrorHandler(N)}function r(N){var O=N.request.data,P=O.ft_ent_identifier;c("UFIFeedbackTargets").getFeedbackTarget(P,function(Q){if(Q.hasviewersubscribed===O.subscribe_action){var R={actiontype:c("UFIConstants").UFIActionType.SUBSCRIBE_ACTION,actorid:Q.actorforpost,hasviewersubscribed:!Q.hasviewersubscribed,entidentifier:P};c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:[R]})}});c("AsyncResponse").defaultErrorHandler(N)}var s={"/ajax/ufi/ban_user.php":{mode:c("MercuryServerDispatcher").IMMEDIATE,error_handler:j},"/ajax/ufi/subscribe.php":{mode:c("MercuryServerDispatcher").BATCH_CONDITIONAL,error_handler:r,batch_if:L,batch_function:M},"/ajax/ufi/id_comment_fetch.php":{mode:c("MercuryServerDispatcher").IMMEDIATE},"/ajax/ufi/remove_preview.php":{mode:c("MercuryServerDispatcher").IMMEDIATE},"/profile/broadcast_request/async/add_composer_token/":{mode:c("MercuryServerDispatcher").IMMEDIATE}},t=c("XUFIAddCommentController").getURIBuilder().getURI();s[t]={mode:c("MercuryServerDispatcher").IMMEDIATE,error_handler:k};var u=c("XUFIDeleteCommentController").getURIBuilder().getURI();s[u]={mode:c("MercuryServerDispatcher").IMMEDIATE,error_handler:m};var v=c("XUFIDeleteCommentAndRemoveCommenterController").getURIBuilder().getURI();s[v]={mode:c("MercuryServerDispatcher").IMMEDIATE,error_handler:m};var w=c("XUFICommentLikeController").getURIBuilder().getURI();s[w]={mode:c("MercuryServerDispatcher").BATCH_CONDITIONAL,error_handler:p,batch_if:J,batch_function:M};var x=c("XUFICommentAcceptAnswerController").getURIBuilder().getURI();s[x]={mode:c("MercuryServerDispatcher").IMMEDIATE};var y=c("XGroupsMuteMembersController").getURIBuilder().getURI();s[y]={mode:c("MercuryServerDispatcher").IMMEDIATE};var z=c("XUFIToggleTextDelightsAsyncController").getURIBuilder().getURI();s[z]={mode:c("MercuryServerDispatcher").IMMEDIATE};var A=c("XUFIHideCommentController").getURIBuilder().getURI();s[A]={mode:c("MercuryServerDispatcher").IMMEDIATE,error_handler:m};var B=c("XUFICommentKeepSpamController").getURIBuilder().getURI();s[B]={mode:c("MercuryServerDispatcher").IMMEDIATE,error_handler:n};var C=c("XUFICommentAppealSpamController").getURIBuilder().getURI();s[C]={mode:c("MercuryServerDispatcher").IMMEDIATE,error_handler:o};var D=c("XUFICommentSecureAccountController").getURIBuilder().getURI();s[D]={mode:c("MercuryServerDispatcher").IMMEDIATE,error_handler:o};var E=c("XUFILikeController").getURIBuilder().getURI();s[E]={mode:c("MercuryServerDispatcher").BATCH_CONDITIONAL,error_handler:q,batch_if:K,batch_function:M};var F=c("XUFIEditCommentController").getURIBuilder().getURI();s[F]={mode:c("MercuryServerDispatcher").IMMEDIATE,error_handler:k};var G=c("XUFITranslateCommentController").getURIBuilder().getURI();s[G]={mode:c("MercuryServerDispatcher").IMMEDIATE};var H=c("XUFIActorChangeController").getURIBuilder().getURI();s[H]={mode:c("MercuryServerDispatcher").IMMEDIATE};var I=c("XUFISendMessageController").getURIBuilder().getURI();s[I]={mode:c("MercuryServerDispatcher").IMMEDIATE};c("MercuryServerDispatcher").registerEndpoints(s);function J(N,O){return N&&N.ft_ent_identifier==O.ft_ent_identifier&&N.comment_id==O.comment_id}function K(N,O){return N&&N.ft_ent_identifier==O.ft_ent_identifier}function L(N,O){return N&&N.ft_ent_identifier==O.ft_ent_identifier}function M(N,O){return O}e.exports=babelHelpers["extends"]({},i,c("UFIReactionUserActions"))}),null);
__d("UFISpamStore",["FluxReduceStore","UFIDispatcherBase","UFIStoryActionType","UFIUserActions"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("FluxReduceStore"));i=h&&h.prototype;j.prototype.getInitialState=function(){return{}};j.prototype.areEqual=function(k,l){return Object.keys(k).length===Object.keys(l).length};j.prototype.reduce=function(k,l){switch(l.type){case c("UFIStoryActionType").SPAM_FETCHED:k=babelHelpers["extends"]({},k);l.commentIDs.forEach(function(m){return k[m]=true});c("UFIUserActions").fetchSpamComments(l.ftentidentifier,l.commentIDs,l.parentCommentID,l.viewas);break}return k};function j(){h.apply(this,arguments)}f.exports=new j(c("UFIDispatcherBase"))}),null);
__d("UFIInstanceAction",["UFIInstanceActionType"],(function a(b,c,d,e,f,g){"use strict";var h={changeOrderingMode:function i(j,k){return{type:c("UFIInstanceActionType").CHANGE_ORDER_MODE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,mode:k}},toggleComments:function i(j){return{type:c("UFIInstanceActionType").TOGGLE_COMMENTS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier}},changeCommentListVisibility:function i(j,k){return{type:c("UFIInstanceActionType").CHANGE_VISIBILITY,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,visibility:k}},init:function i(j,k){return{type:c("UFIInstanceActionType").INIT,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,payload:k}},didRequestVODComments:function i(j){return{type:c("UFIInstanceActionType").REQUESTED_VOD_COMMENTS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier}},didReceiveVODComments:function i(j){return{type:c("UFIInstanceActionType").RECEIVED_VOD_COMMENTS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier}},remove:function i(j){return{type:c("UFIInstanceActionType").REMOVE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier}},toggleCommercialBreak:function i(j,k){return{type:c("UFIInstanceActionType").TOGGLE_COMMERCIAL_BREAK,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,inCommercial:k}},translateAll:function i(j){return{type:c("UFIInstanceActionType").TRANSLATE_ALL,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier}},playLiveVODHighlights:function i(j,k){return{type:c("UFIInstanceActionType").PLAY_LIVE_VOD_HIGHLIGHTS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,playingLiveVODHighlights:k}}};f.exports=h}),null);
__d("VideoDisplayTimePlayButton",["CSS","DataStore","Event"],(function a(b,c,d,e,f,g){var h={},i="_spinner",j={getClicked:function k(l){return c("DataStore").get(l,"clicked",false)},register:function k(l,m){var n=l.id;h[n]=c("Event").listen(l,"click",function(){if(m){c("CSS").hide(l);c("CSS").show(m)}c("DataStore").set(l,"clicked",true)});if(m)h[n+i]=c("Event").listen(m,"click",function(){if(m)c("CSS").hide(m);c("CSS").show(l);c("DataStore").set(l,"clicked",false)})},unregister:function k(l){var m=l.id;if(Object.prototype.hasOwnProperty.call(h,m))h[m].remove();var n=m+i;if(Object.prototype.hasOwnProperty.call(h,n))h[n].remove()}};f.exports=j}),null);