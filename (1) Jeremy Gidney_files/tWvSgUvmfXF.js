if (self.CavalryLogger) { CavalryLogger.start_js(["LTM\/t"]); }

__d("ChannelConnection",["Arbiter","ChannelConstants","ChannelManager","JSLogger","Run","SystemEvents","Visibility","setTimeoutAcrossTransitions"],(function a(b,c,d,e,f,g){var h=c("JSLogger").create("channel_connection"),i=null,j=null,k=null,l=null,m=0;c("ChannelManager").startChannelManager();var n=Object.assign(new(c("Arbiter"))(),{CONNECTED:"chat-connection/connected",RECONNECTING:"chat-connection/reconnecting",SHUTDOWN:"chat-connection/shutdown",MUTE_WARNING:"chat-connection/mute",UNMUTE_WARNING:"chat-connection/unmute"});c("Run").onBeforeUnload(function(){});function o(){if(j){clearTimeout(j);j=null}}function p(){o();h.log("unmute_warning");n.inform(n.UNMUTE_WARNING)}function q(v){o();j=c("setTimeoutAcrossTransitions")(p,v);h.log("mute_warning",{time:v});n.inform(n.MUTE_WARNING)}function r(){if(k){clearTimeout(k);k=null}}function s(v,w){r();if(v===c("ChannelConstants").ON_ENTER_STATE&&(w.nextState||w.state)==="pull"){if(l!==n.CONNECTED){h.log("connected");var x=!l;l=n.CONNECTED;m=0;n.inform(n.CONNECTED,{init:x})}}else if(v===c("ChannelConstants").ON_ENTER_STATE&&((w.nextState||w.state)==="ping"||!w.nextState&&w.state==="idle"))k=c("setTimeoutAcrossTransitions")(function(){var y=null;if(!(w.state==="idle"&&!w.nextState))y=w.delay||0;h.log("reconnecting",{delay:y});if(n.disconnected())h.log("reconnecting_ui",{delay:y});l=n.RECONNECTING;w.state==="idle"&&m++;if(m>1)n.inform(n.RECONNECTING,y);else if(!w.nextState&&w.state==="idle")s(v,w)},500);else if(v===c("ChannelConstants").ON_SHUTDOWN){h.log("shutdown",{reason:w.reason});l=n.SHUTDOWN;m=0;n.inform(n.SHUTDOWN,w.reason)}}function t(){if(c("ChannelManager").isShutdown())s(c("ChannelConstants").ON_SHUTDOWN,c("ChannelManager")._shutdownHint);else s(c("ChannelConstants").ON_ENTER_STATE,{state:c("ChannelManager").state,nextState:c("ChannelManager").nextState,delay:0});c("Visibility").addListener(c("Visibility").VISIBLE,n.reconnect)}c("Run").onAfterLoad(t);Object.assign(n,{disconnected:function v(){return l===n.SHUTDOWN||l===n.RECONNECTING&&!j&&m>1},isShutdown:function v(){return l===n.SHUTDOWN},reconnect:function v(w){if(c("ChannelManager").state==="ping"||c("ChannelManager").state==="pull"||c("ChannelManager").isShutdown())return;h.log("reconnect",{now:w});n.inform(n.RECONNECTING,0);if(!!w){if(i!==null){clearTimeout(i);i=null}c("ChannelManager").enterState("ping!")}else if(!i)i=c("setTimeoutAcrossTransitions")(function(){c("ChannelManager").enterState("ping!");i=null},c("ChannelConstants").CHANNEL_MANUAL_RECONNECT_DEFER_MSEC);c("ChannelManager").resetDelay()},unmuteWarning:p});function u(){c("Arbiter").subscribe([c("ChannelConstants").ON_ENTER_STATE,c("ChannelConstants").ON_SHUTDOWN],s);c("Arbiter").subscribe(c("ChannelConstants").ATTEMPT_RECONNECT,function(){if(n.disconnected())n.reconnect()});c("SystemEvents").subscribe(c("SystemEvents").TIME_TRAVEL,function(){n.reconnect();q(c("ChannelConstants").MUTE_WARNING_TIME_MSEC)});c("Run").onBeforeUnload(r,false)}c("Run").onAfterLoad(u);n.mockAfterLoad=function(){t();u()};c("Arbiter").subscribe(c("JSLogger").DUMP_EVENT,function(v,w){w.channel_connected=!n.disconnected()});f.exports=n}),3);
__d("BuddyListNubLoader",["Arbiter","ChatOptions","ChatSidebarStore","KeyEventController","PresencePrivacy","JSResource","SidebarType","emptyFunction","ifRequired"],(function a(b,c,d,e,f,g){"use strict";function h(){return c("ChatSidebarStore").isEnabled()&&!c("ChatOptions").getSetting("hide_buddylist")&&!c("ifRequired")("ChannelConnection",function(j){return j.disconnected()})&&!c("PresencePrivacy").isUserOffline()}function i(j,k,l,m){this.$BuddyListNubLoader1=j;this.$BuddyListNubLoader2=k;this.$BuddyListNubLoader3=l;this.$BuddyListNubLoader4=m;this.$BuddyListNubLoader5=null;c("ifRequired")("ChatSidebar",c("emptyFunction"),function(){if(h())this.show();else this.load()}.bind(this));c("Arbiter").subscribe("chat/option-changed",function(n,o){if(this.$BuddyListNubLoader7())if(o.name==="hide_buddylist"&&!o.value)this.show()}.bind(this));c("KeyEventController").registerKey("q",function(event){if(this.$BuddyListNubLoader7()){this.show();event.prevent()}}.bind(this));c("ChatSidebarStore").addListener(function(){if(c("ChatSidebarStore").getVisibleType()===c("SidebarType").BUDDYLIST)if(h())this.show();else this.load()}.bind(this));if(c("ChatSidebarStore").getVisibleType()===c("SidebarType").BUDDYLIST)if(h())this.show();else this.load()}i.prototype.load=function(){if(!this.$BuddyListNubLoader6){this.$BuddyListNubLoader6=c("JSResource")("BuddyListNub").__setRef("BuddyListNubLoader").load();this.$BuddyListNubLoader6.done(function(j){this.$BuddyListNubLoader5=new j(this.$BuddyListNubLoader1,this.$BuddyListNubLoader2,this.$BuddyListNubLoader3,this.$BuddyListNubLoader4)}.bind(this))}return this.$BuddyListNubLoader6};i.prototype.show=function(){return this.load().then(function(j){this.$BuddyListNubLoader5&&this.$BuddyListNubLoader5.onButtonClick();this.$BuddyListNubLoader5&&this.$BuddyListNubLoader5.show()}.bind(this))};i.prototype.$BuddyListNubLoader7=function(){return!this.$BuddyListNubLoader5&&!this.$BuddyListNubLoader6};f.exports=i}),null);
__d("XPymkFunnelLoggingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pymk/funnel_logging/",{event_ts:{type:"Int",required:true},query_id:{type:"Int"},candidate_id:{type:"Int"},signature:{type:"Int"},loc:{type:"String",required:true},ref:{type:"String"},action:{type:"Enum",required:true,enumType:1}})}),null);
__d("PymkFunnelLogger",["AsyncRequest","DOMQuery","XPymkFunnelLoggingController"],(function a(b,c,d,e,f,g){var h={setupListeners:function i(j,k,l,m,n){this._setupForSingleElement(j,k,l,"add");this._setupForSingleElement(j,k,m,"click");this._setupForSingleElement(j,k,n,"click")},logImpression:function i(j,k,l){this._logEvent(j,"impression",k,l)},logXOut:function i(j,k,l){this._logEvent(j,"hide",k,l)},_logEvent:function i(j,event,k,l){var m=c("XPymkFunnelLoggingController").getURIBuilder().setInt("candidate_id",j).setInt("signature",k).setInt("event_ts",Math.floor(Date.now()/1e3)).setEnum("action",event).setString("loc",l).getURI();new(c("AsyncRequest"))(m).setMethod("POST").send()},_setupForSingleElement:function i(j,k,l,m){Event.listen(l,"click",function(event){var n=j.getAttribute("data-signature"),o=c("DOMQuery").find(j,"input.friendBrowserID"),p=parseInt(o.value,10);this._logEvent(p,m,n,k)}.bind(this))}};f.exports=h}),null);
__d("XFriendRequestIHEventLoggingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/requests/interaction_history_logging/",{target_id:{type:"FBID",required:true},log_event:{type:"String",required:true}})}),null);
__d("FriendRequestIHEventLogger",["Event","AsyncRequest","XFriendRequestIHEventLoggingController"],(function a(b,c,d,e,f,g){var h={setupJewelListeners:function i(j,k,l){this._setupForJewelSingleElement(j,k,"click");if(l)this._setupForJewelSingleElement(j,l,"click")},logImpression:function i(j){this._logEvent(j,"impression")},_logEvent:function i(j,event){if(isNaN(j))return;var k=c("XFriendRequestIHEventLoggingController").getURIBuilder().setFBID("target_id",j).setString("log_event",event).getURI();new(c("AsyncRequest"))(k).setMethod("POST").send()},_setupForJewelSingleElement:function i(j,k,l){c("Event").listen(k,"click",function(event){var m=j.getAttribute("id");if(!m)return;var n=m.substring(0,m.length-6);this._logEvent(n,l)}.bind(this))}};f.exports=h}),null);
__d("QPRenderer",["CSS","XAsyncRequest","XQuickPromotionSimpleLoggingController","$"],(function a(b,c,d,e,f,g){var h=function h(m,event,n){var o=c("XQuickPromotionSimpleLoggingController").getURIBuilder().setInt("qp_id",m).setString("qp_event",event).setStringToStringMap("qp_instance_log_data",n).getURI();new(c("XAsyncRequest"))(o).send()},i=function i(m,n,o){var p=c("XQuickPromotionSimpleLoggingController").getURIBuilder().setInt("qp_id",m).setEnum("qp_action",n).setStringToStringMap("qp_instance_log_data",o).getURI();new(c("XAsyncRequest"))(p).send()},j=function j(m,n,o,p,q,r){l(m,o,c("$")(p),r,function(){if(q)c("CSS").hide(n)})},k=function k(m,n,o){n.show();h(m,"view",{});n.subscribe("cancel",function(){h(m,"dialog_cancel",{})});for(var p=0;p<o.length;p++){var q=o[p],r=c("$")(q.element_id);l(m,q.action,r,q.extra_log_data,q.should_close?function(){n.hide()}:function(){});if(q.action=="primary")r.focus()}},l=function l(m,n,o,p,q){o.addEventListener("click",function(){var r=c("XQuickPromotionSimpleLoggingController").getURIBuilder().setInt("qp_id",m).setEnum("qp_action",n).setStringToStringMap("qp_instance_log_data",p).getURI();new(c("XAsyncRequest"))(r).send();q()})};g.setAction=j;g.setDialogActionsAndShow=k;g.logAction=i;g.logEvent=h}),null);
__d("JewelQPLogging",["QPRenderer"],(function a(b,c,d,e,f,g){var h=false,i=null,j=false;function k(){if(j)return;if(h&&i){j=true;c("QPRenderer").logEvent(i.promotion_id,"view",i.instance_log_data?i.instance_log_data:{})}}var l={onJewelOpened:function m(){h=true;k()},updateQPLogData:function m(n){i=n;k()}};f.exports=l}),null);
__d("RequestsJewelStore",["Arbiter","ArbiterMixin","ChannelConstants"],(function a(b,c,d,e,f,g){var h=babelHelpers["extends"]({},c("ArbiterMixin"),{_initialized:false,_count:0,_requestList:{},addFriendRequests:function i(j){Object.assign(this._requestList,j)},getRequestListKeys:function i(){return Object.keys(this._requestList)},removeRequest:function i(j){delete this._requestList[j]},getRequestCount:function i(j){return this.getRequestListKeys().length},decrementCount:function i(){this.setCount(Math.max(0,this._count-1))},setCount:function i(j){c("Arbiter").inform("jewel/count-updated",{jewel:"requests",count:j},c("Arbiter").BEHAVIOR_STATE)},setupListeners:function i(){if(this._initialized)return;this._initialized=true;c("Arbiter").subscribe("jewel/count-updated",function(j,k){k.jewel==="requests"&&this._updateCount(k.count)}.bind(this));c("Arbiter").subscribe(c("ChannelConstants").getArbiterType("jewel_requests_add"),function(j,k){return this._addRequest(k)}.bind(this));c("Arbiter").subscribe(c("ChannelConstants").getArbiterType("jewel_friending_notifs"),function(j,k){return this._addNotification(k)}.bind(this));c("Arbiter").subscribe(c("ChannelConstants").getArbiterType("jewel_requests_remove_old"),function(j,k){return this._removeOldRequest(k)}.bind(this));c("Arbiter").subscribe(c("ChannelConstants").getArbiterType("friend_requests_seen"),function(j,k){return this.setCount(0)}.bind(this))},_updateCount:function i(j){var k=this._count!==j;this._count=j;if(k)this.inform("countUpdated",j)},_addRequest:function i(j){if(!j)return;var k=j.obj,l=k.from,m=k.suggester,n=this._requestList[l];if(!n)this.setCount(this._count+1);var o=n?n.type:null,p=o===19&&!m;this.inform("addRequest",{shouldReplace:p,previousType:o})},_addNotification:function i(j){if(!j||j.obj.notif_type!=="friend_confirmed")return;this.inform("addNotification")},_removeOldRequest:function i(j){if(!j)return;var k=this._requestList[j.obj.from];if(!k)return;this.inform("removeOldRequest",k)}});f.exports=h}),null);
__d("XWebGigaboxxUpdateSeenTimeAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ajax/gigaboxx/endpoint/update_last_seen_time/",{folder:{type:"String",required:true}})}),null);
__d("RequestsJewelController",["invariant","Promise","Arbiter","AsyncRequest","AsyncSignal","CSS","DOM","DOMQuery","Event","EventProfiler","FriendRequestIHEventLogger","JewelQPLogging","MarauderLogger","Parent","PymkFunnelLogger","RequestsJewelStore","ScrollableArea","XUIBadge","XWebGigaboxxUpdateSeenTimeAsyncController","ge","getElementPosition","getViewportDimensions","requireWeak","throttle","TimeSlice"],(function a(b,c,d,e,f,g,h){var i=null;c("requireWeak")("FriendBrowserCheckboxController",function(o){return i=o});var j=31,k=600,l=30,m=160;n.getInstance=function(){"use strict";return this.$RequestsJewelController13};n.updateFromDOM=function(){"use strict";var o=this.getInstance();if(o)o.fromDom()};n.setupScroll=function(){"use strict";var o=this.getInstance();if(o)o.setupScroll()};n.setInitialHeight=function(){"use strict";var o=this.getInstance();if(o)o.updateHeight()};n.maybeLoadJewel=function(){"use strict";var o=this.getInstance();if(o)o.maybeLoadJewel()};n.setTitleBadgeCount=function(o){"use strict";if(this.$RequestsJewelController12)this.$RequestsJewelController12.setCount(o)};n.initTitleBadge=function(o,p){"use strict";if(!this.$RequestsJewelController12)c("Arbiter").subscribe(["FriendRequest/delete","FriendRequest/confirm","FriendSuggestion/accepting","FriendSuggestion/ignoring"],function(q,r){return this.decrementTitleBadgeCount(r)}.bind(this));this.$RequestsJewelController12=p};n.decrementTitleBadgeCount=function(o){"use strict";if(this.$RequestsJewelController12)this.$RequestsJewelController12.setCount(this.$RequestsJewelController12.getCount()-1)};n.isOpen=function(){"use strict";var o=this.getInstance();if(o)return o.$RequestsJewelController3();return false};n.create=function(o,p,q){"use strict";!this.$RequestsJewelController13||h(0);return this.$RequestsJewelController13=new n(o,p,q)};function n(o,p,q){"use strict";this.$RequestsJewelController3=p;this.$RequestsJewelController2=q;this.$RequestsJewelController1=o;this.$RequestsJewelController5=-1;this.$RequestsJewelController6=-1;this.$RequestsJewelController11=c("Promise").resolve(true);this.$RequestsJewelController9=c("throttle").acrossTransitionsWithBlocking(function(){return this.$RequestsJewelController14({log_impressions:true})}.bind(this),5e3);c("RequestsJewelStore").subscribe("addRequest",this.$RequestsJewelController15.bind(this));c("RequestsJewelStore").subscribe("addNotification",function(){return this.$RequestsJewelController16()}.bind(this));c("RequestsJewelStore").subscribe("removeOldRequest",this.$RequestsJewelController17.bind(this));c("RequestsJewelStore").setupListeners();this.setupScroll();this.$RequestsJewelController18();this.$RequestsJewelController19();this.$RequestsJewelController20()}n.prototype.fromDom=function(){"use strict";var o={};c("DOMQuery").scry(this.$RequestsJewelController1,"li.objectListItem").forEach(function(p){var q=p.getAttribute("id");if(q){var r=this.$RequestsJewelController21(q);if(r&&r.requester)o[r.requester]=r}}.bind(this));c("RequestsJewelStore").addFriendRequests(o);this.$RequestsJewelController22()};n.prototype.maybeLoadJewel=function(){"use strict";if(this.$RequestsJewelController10){this.$RequestsJewelController10(function(){this.openHandler()}.bind(this));this.$RequestsJewelController10=null}};n.prototype.updateHeight=function(){"use strict";var o=this.$RequestsJewelController23();if(o)o.style.height=this.$RequestsJewelController24()+"px"};n.prototype.markSeen=function(){"use strict";this.$RequestsJewelController11.done(function(){var o=c("DOMQuery").scry(this.$RequestsJewelController1,"li[id]")[0];new(c("AsyncSignal"))(c("XWebGigaboxxUpdateSeenTimeAsyncController").getURIBuilder().setString("folder",this.$RequestsJewelController2).getURI()).send()}.bind(this))};n.prototype.openHandler=function(){"use strict";if(!this.$RequestsJewelController7&&this.$RequestsJewelController3()){this.$RequestsJewelController7=true;c("EventProfiler").tagCurrentActiveInteractionsAs("FirstRequestsJewelOpen")}c("Arbiter").inform("requestsJewel/opened");var o=c("ge")("fbRequestsJewelLoading"),p=this.$RequestsJewelController23();if(!o&&!p)this.$RequestsJewelController10=c("TimeSlice").getGuardedContinuation("RequestsJewelController clickBeforeE2E continuation");else if(o)this.$RequestsJewelController9();else{var q=c("RequestsJewelStore").getRequestListKeys();if(q.length>0)new(c("AsyncRequest"))().setAllowCrossPageTransition(true).setURI("/friends/requests/log_impressions").setData({ids:q.join(","),ref:"jewel"}).send()}p&&c("ScrollableArea").poke(p);c("JewelQPLogging").onJewelOpened()};n.prototype.closeHandler=function(){"use strict";c("Arbiter").inform("requestsJewel/closed");c("DOMQuery").scry(this.$RequestsJewelController1,"li.jewelItemNew").forEach(function(o){c("CSS").removeClass(o,"jewelItemNew")})};n.prototype.setupScroll=function(){"use strict";var o=this.$RequestsJewelController23();if(o){this.$RequestsJewelController8=this.$RequestsJewelController25();this.$RequestsJewelController4=0;c("ScrollableArea").getInstance(o).subscribe("scroll",this.$RequestsJewelController26.bind(this));this.$RequestsJewelController27();this.$RequestsJewelController28()}};n.prototype.$RequestsJewelController18=function(){"use strict";c("Event").listen(this.$RequestsJewelController1,"submit",function(o){var p=c("Parent").byClass(o.getTarget(),"objectListItem");if(p){c("CSS").removeClass(p,"jewelItemNew");c("CSS").addClass(p,"jewelItemResponded")}})};n.prototype.$RequestsJewelController19=function(){"use strict";c("Event").listen(window,"resize",c("throttle").acrossTransitions(function(){this.updateHeight()}.bind(this)))};n.prototype.$RequestsJewelController20=function(){"use strict";c("Arbiter").subscribe("pymk-x-out",function(o,p){var q=p.location;if(q==="pymk_jewel_first_page"||q==="pymk_jewel")this.$RequestsJewelController27()}.bind(this))};n.prototype.$RequestsJewelController29=function(o){"use strict";var p=parseInt(o,10);return!isNaN(p)?p:null};n.prototype.$RequestsJewelController21=function(o){"use strict";var p=o.match(/^(\d+)_(\d+)/);if(!p)return null;return{requester:this.$RequestsJewelController29(p[1]),type:this.$RequestsJewelController29(p[2])}};n.prototype.$RequestsJewelController30=function(o,p){"use strict";if(o==null||p==null)return null;return o+"_"+p};n.prototype.$RequestsJewelController23=function(){"use strict";return c("DOMQuery").scry(this.$RequestsJewelController1,".uiScrollableArea")[0]};n.prototype.$RequestsJewelController25=function(){"use strict";return c("DOMQuery").scry(this.$RequestsJewelController1,".uiScrollableAreaWrap")[0]};n.prototype.$RequestsJewelController26=function(){"use strict";var o=c("DOMQuery").scry(this.$RequestsJewelController8,".uiMorePager").pop();if(o){var p=c("getElementPosition")(o).y,q=this.$RequestsJewelController23();if(p>0&&q)c("CSS").addClass(q,"contentAfter");var r=c("DOMQuery").find(o,"a");if(!r)return;var s=c("getElementPosition")(r).y;if(s===this.$RequestsJewelController4)return;var t=c("getElementPosition")(this.$RequestsJewelController8),u=t.y+t.height;if(s-300<u&&s>0){this.$RequestsJewelController4=s;var v=r.getAttribute("ajaxify");if(v)new(c("AsyncRequest"))(v).setRelativeTo(r).setStatusElement(c("Parent").byClass(r,"stat_elem")).send();else if(i)i.getInstance("jewel").showMore()}}this.$RequestsJewelController27();this.$RequestsJewelController28()};n.prototype.$RequestsJewelController27=function(){"use strict";if(!this.$RequestsJewelController8)return;var o=c("getElementPosition")(this.$RequestsJewelController8),p=o.y+o.height,q=c("DOMQuery").scry(this.$RequestsJewelController1,"li.friendBrowserListUnit"),r=q.length-1;while(r>this.$RequestsJewelController5){var s=c("getElementPosition")(q[r]),t=s.y,u=t+s.height;if(t>0&&u<=p)break;r-=1}var v=r;while(r>this.$RequestsJewelController5){var w=c("DOMQuery").find(q[r],"input.friendBrowserID"),x=parseInt(w.value,10),y=parseInt(q[r].getAttribute("data-signature"),10);c("PymkFunnelLogger").logImpression(x,y,"pymk_jewel");r--}this.$RequestsJewelController5=Math.max(this.$RequestsJewelController5,v)};n.prototype.$RequestsJewelController28=function(){"use strict";if(!this.$RequestsJewelController8)return;var o=c("getElementPosition")(this.$RequestsJewelController8),p=o.y+o.height,q=c("DOMQuery").scry(this.$RequestsJewelController1,"li.objectListItem"),r=q.length-1;while(r>this.$RequestsJewelController6){var s=c("getElementPosition")(q[r]),t=s.y,u=t+s.height;if(t>0&&u<=p)break;r-=1}var v=r;while(r>this.$RequestsJewelController6){var w=q[r].getAttribute("id");w=w.substring(0,w.length-6);c("MarauderLogger").log("request_seen","friend_request_waterfall",{request_id:w,request_location:"requests_jewel"});c("FriendRequestIHEventLogger").logImpression(w);r-=1}this.$RequestsJewelController6=Math.max(this.$RequestsJewelController6,v)};n.prototype.$RequestsJewelController14=function(){var o=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];"use strict";this.$RequestsJewelController11=new(c("Promise"))(function(p,q){var r=!c("ge")("fbRequestsJewelLoading");new(c("AsyncRequest"))().setURI("/ajax/requests/loader/").setData(babelHelpers["extends"]({},o,{reloadcontent:r})).setFinallyHandler(function(s){if(!s.getError())p(true);else q()}).send()})};n.prototype.$RequestsJewelController16=function(){"use strict";if(this.$RequestsJewelController3())return;this.$RequestsJewelController14()};n.prototype.$RequestsJewelController15=function(o,p){var q=p.shouldReplace,r=p.previousType;"use strict";if(!q&&(r||this.$RequestsJewelController3()))return;this.$RequestsJewelController14()};n.prototype.$RequestsJewelController17=function(o,p){var q=p.requester,r=p.type;"use strict";if(this.$RequestsJewelController3()||c("ge")("fbRequestsJewelLoading")!=null)return;var s=this.$RequestsJewelController30(q,r),t=s&&c("ge")(s);if(t){if(c("CSS").hasClass(t,"jewelItemNew"))c("RequestsJewelStore").decrementCount();if(!c("CSS").hasClass(t,"jewelItemResponded")){c("DOM").remove(t);c("RequestsJewelStore").removeRequest(q);this.$RequestsJewelController22()}}};n.prototype.$RequestsJewelController22=function(){"use strict";c("DOMQuery").scry(this.$RequestsJewelController1,"li.empty").forEach(function(o){c("CSS").conditionShow(o,c("RequestsJewelStore").getRequestCount()<=0)})};n.prototype.$RequestsJewelController24=function(){"use strict";return Math.min(Math.max(c("getViewportDimensions")().height-m,l),k)+j};n.$RequestsJewelController13=null;f.exports=n}),null);
__d("DeviceBasedLoginWWWQP",["CSS","Event","tidyEvent"],(function a(b,c,d,e,f,g){"use strict";var h={swapWithShadowMessageOnClick:function i(j,k,l){c("tidyEvent")(c("Event").listen(j,"click",function(m){c("CSS").hide(k);c("CSS").show(l)}))}};f.exports=h}),null);
__d("MessengerTypeaheadUtils",["fbt","ix","immutable","MercuryConfig","MercuryTypeaheadConstants","MessengerEnvironment","ReactDOM","SearchableEntry","WorkModeConfig","mapObject"],(function a(b,c,d,e,f,g,h,i){"use strict";var j,k=c("immutable").OrderedMap,l=500,m=100,n=c("WorkModeConfig").is_work_user||c("MercuryConfig").CoworkersOverGroups?[c("MercuryTypeaheadConstants").SEARCH_TYPE,c("MercuryTypeaheadConstants").FRIEND_TYPE,c("MercuryTypeaheadConstants").FB4C_TYPE,c("MercuryTypeaheadConstants").THREAD_TYPE,c("MercuryTypeaheadConstants").MEETING_ROOM_PAGE_TYPE,c("MercuryTypeaheadConstants").INTERNAL_BOT_PAGE_TYPE,c("MercuryTypeaheadConstants").PAGE_TYPE,c("MercuryTypeaheadConstants").NON_FRIEND_TYPE,c("MercuryTypeaheadConstants").GAME_TYPE]:[c("MercuryTypeaheadConstants").SEARCH_TYPE,c("MercuryTypeaheadConstants").FRIEND_TYPE,c("MercuryTypeaheadConstants").THREAD_TYPE,c("MercuryTypeaheadConstants").FB4C_TYPE,c("MercuryTypeaheadConstants").MEETING_ROOM_PAGE_TYPE,c("MercuryTypeaheadConstants").PAGE_TYPE,c("MercuryTypeaheadConstants").NON_FRIEND_TYPE,c("MercuryTypeaheadConstants").GAME_TYPE],o=(j={},j[c("MercuryTypeaheadConstants").SEARCH_TYPE]={header:""},j[c("MercuryTypeaheadConstants").FRIEND_TYPE]={header:h._("Contacts")},j[c("MercuryTypeaheadConstants").FB4C_TYPE]={header:h._("Co-workers")},j[c("MercuryTypeaheadConstants").THREAD_TYPE]={header:h._("Group Conversations")},j[c("MercuryTypeaheadConstants").PAGE_TYPE]={header:h._("Businesses")},j[c("MercuryTypeaheadConstants").MEETING_ROOM_PAGE_TYPE]={header:h._("Meeting Rooms")},j[c("MercuryTypeaheadConstants").INTERNAL_BOT_PAGE_TYPE]={header:h._("Bots")},j[c("MercuryTypeaheadConstants").NON_FRIEND_TYPE]={header:h._("More People")},j.game={header:h._("Games")},j),p={sortEntries:function q(r,s){var t=[],u=[],v=[],w=[],x=[],y=[],z=[],A=[],B=[];r.forEach(function(C){switch(C.getType()){case c("MercuryTypeaheadConstants").FRIEND_TYPE:u.push(C);break;case c("MercuryTypeaheadConstants").FB4C_TYPE:v.push(C);break;case c("MercuryTypeaheadConstants").THREAD_TYPE:w.push(C);break;case c("MercuryTypeaheadConstants").PAGE_TYPE:case c("MercuryTypeaheadConstants").COMMERCE_PAGE_TYPE:y.push(C);break;case c("MercuryTypeaheadConstants").NON_FRIEND_TYPE:x.push(C);break;case c("MercuryTypeaheadConstants").MEETING_ROOM_PAGE_TYPE:z.push(C);break;case c("MercuryTypeaheadConstants").INTERNAL_BOT_PAGE_TYPE:A.push(C);break;case c("MercuryTypeaheadConstants").SEARCH_TYPE:t.push(C);break;case c("MercuryTypeaheadConstants").GAME_TYPE:B.push(C);break}});if(p._shouldHoistPages(s))return t.concat(y,u,v,w,z,A,x,B);return t.concat(u,v,w,z,A,y,x,B)},sortEntriesWithoutPages:function q(r){var s=[],t=[],u=[],v=[];r.forEach(function(w){switch(w.getType()){case c("MercuryTypeaheadConstants").FRIEND_TYPE:s.push(w);break;case c("MercuryTypeaheadConstants").FB4C_TYPE:t.push(w);break;case c("MercuryTypeaheadConstants").THREAD_TYPE:u.push(w);break;case c("MercuryTypeaheadConstants").NON_FRIEND_TYPE:v.push(w);break}});return s.concat(t,u,v)},sortEntriesWithoutGroupsOrViewer:function q(r,s){var t=[],u=[],v=[];r.forEach(function(w){if(w.getUniqueID()===s)return;switch(w.getType()){case c("MercuryTypeaheadConstants").FRIEND_TYPE:t.push(w);break;case c("MercuryTypeaheadConstants").FB4C_TYPE:u.push(w);break;case c("MercuryTypeaheadConstants").NON_FRIEND_TYPE:v.push(w);break}});return t.concat(u,v)},getEntryOrder:function q(r){var s=arguments.length<=1||arguments[1]===undefined?n:arguments[1];if(p._shouldHoistPages(r)){s=[].concat(s);s.splice(s.indexOf(c("MercuryTypeaheadConstants").PAGE_TYPE));s.unshift(c("MercuryTypeaheadConstants").PAGE_TYPE)}return s},orderEntries:function q(r,s){var t=[];this.getEntryOrder(s).filter(function(u){return u!==c("MercuryTypeaheadConstants").SEARCH_TYPE}).concat(c("MercuryTypeaheadConstants").SEARCH_TYPE).forEach(function(u){return t.push.apply(t,r.filter(function(v){return this.areSectionsEqual(v.getType(),u)}.bind(this)))}.bind(this));return t},buildSingleSection:function q(r){return k([["",r]])},buildListSections:function q(r,s,t){if(!r.length)return k();t=this.getEntryOrder(s,t);var u=c("mapObject")(o,function(v){return babelHelpers["extends"]({},v,{entries:[]})});u[c("MercuryTypeaheadConstants").COMMERCE_PAGE_TYPE]=u[c("MercuryTypeaheadConstants").PAGE_TYPE];r.forEach(function(v){var w=v.getType();if(u[w])u[w].entries.push(v)});return k(t.filter(function(v){return u[v].entries.length}).map(function(v){return[u[v].header,u[v].entries]}))},buildCustomSection:function q(r,s){var t;return t={},t[r]=s,t},areSectionsEqual:function q(r,s){if(r===c("MercuryTypeaheadConstants").COMMERCE_PAGE_TYPE)return s===c("MercuryTypeaheadConstants").COMMERCE_PAGE_TYPE||s===c("MercuryTypeaheadConstants").PAGE_TYPE;return r===s},scrollEntryIntoView:function q(r,s){var t=c("ReactDOM").findDOMNode(s),u=s.getScrollTop(),v=r.offsetTop-u,w=t.offsetHeight-r.offsetHeight,x=Math.abs(w-v);if(v>=w&&x<=m)s.scrollToPosition(u+v-w,true,{duration:l});else if(v<0&&x<=w+m)s.scrollToPosition(u+v,true,{duration:l})},getMessageSearchEntry:function q(r){if(!c("MessengerEnvironment").messengerui||r.length<2)return null;return new(c("SearchableEntry"))({uniqueID:"__special_search_entry__",title:h._("Search Messages for \"{queryString}\"",[h.param("queryString",r)]),photo:i("86924"),type:c("MercuryTypeaheadConstants").SEARCH_TYPE})},_shouldHoistPages:function q(r){if(!r)return false;return!!(c("MercuryConfig").HoistAgentsKeywords&&c("MercuryConfig").HoistAgentsKeywords.indexOf(r.toLowerCase().trim())!==-1)}};f.exports=p}),null);
__d("MNCommerceDialogStateStore",["FluxStore","MessengerDispatcher","MNCommerceActionTypes"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("FluxStore"));i=h&&h.prototype;function j(){i.constructor.call(this,c("MessengerDispatcher"));this.$MNCommerceDialogStateStore1=null;this.$MNCommerceDialogStateStore2=null}j.prototype.__onDispatch=function(k){var l=k.type;switch(l){case c("MNCommerceActionTypes").DIALOG.SHOW:this.$MNCommerceDialogStateStore1=k.dialogContainer;this.$MNCommerceDialogStateStore2=k.state;this.__emitChange();break;case c("MNCommerceActionTypes").DIALOG.HIDE:this.$MNCommerceDialogStateStore1=null;this.$MNCommerceDialogStateStore2=null;this.__emitChange();break}};j.prototype.getDialogContainer=function(){return this.$MNCommerceDialogStateStore1};j.prototype.getState=function(){return this.$MNCommerceDialogStateStore2};f.exports=new j()}),null);
__d("PureStoreBasedStateMixin",["invariant","StoreBasedStateMixinHelper","setImmediate"],(function a(b,c,d,e,f,g,h){"use strict";var i=function(){for(var j=arguments.length,k=Array(j),l=0;l<j;l++)k[l]=arguments[l];return{getInitialState:function m(){return this.constructor.calculateState()},componentWillMount:function m(){this.constructor.calculateState||h(0);this._recalculateStateID=null;var n=function(){if(this.isMounted())this.setState(this.constructor.calculateState());this._recalculateStateID=null}.bind(this);this._mixin=new(c("StoreBasedStateMixinHelper"))(k);this._mixin.subscribeCallback(function(){if(this._recalculateStateID===null)this._recalculateStateID=c("setImmediate")(n)}.bind(this))},componentWillUnmount:function m(){this._mixin.release();this._mixin=null}}}.bind(this);f.exports=i}),null);
__d("MNCommerceDialogContainer.react",["MNCommerceDialogStateStore","PureStoreBasedStateMixin","React"],(function a(b,c,d,e,f,g){"use strict";var h=c("React").createClass({displayName:"MNCommerceDialogContainer",mixins:[c("PureStoreBasedStateMixin")(c("MNCommerceDialogStateStore"))],statics:{calculateState:function i(){var j=c("MNCommerceDialogStateStore").getDialogContainer();return{dialogContainer:j}}},render:function i(){var j=this.state.dialogContainer;if(!j)return null;return c("React").createElement(j,null)}});f.exports=h}),null);
__d("MessengerSearchFunnelLogger",["FunnelLogger","MercuryIDs"],(function a(b,c,d,e,f,g){"use strict";var h;function i(p,q){c("FunnelLogger").startFunnel(p);if(q)c("FunnelLogger").addFunnelTag(p,q);c("FunnelLogger").appendActionIfNew(p,"search_start");h=[]}function j(p){c("FunnelLogger").appendActionIfNew(p,"search_end");c("FunnelLogger").endFunnel(p)}function k(p,q){c("FunnelLogger").appendActionWithPayload(p,"initiate_content_search",{query_string:q,impression_list:h});c("FunnelLogger").endFunnel(p)}function l(p,q,r,s){if(r==null||h==null||h.length===0){c("FunnelLogger").appendActionWithPayload(p,"search_result_error",{error:"threadID or latest impression list are null",thread_id:r,impression_list:h});c("FunnelLogger").endFunnel(p);return}r=c("MercuryIDs").getThreadFBIDFromThreadID(r);c("FunnelLogger").appendActionWithPayload(p,"log_result_selection",{thread_id:r,type:s,rank:h.indexOf(r),search_query:q?q:""})}function m(p,q,r){c("FunnelLogger").appendActionWithPayloadIfNew(p,"loading_state_impression_list",{search_query:q,impression_list:r});h=r}function n(p,q,r,s){c("FunnelLogger").appendActionWithPayload(p,q,{search_query:r,impression_list:s});h=s}function o(p){c("FunnelLogger").appendAction(p,"clear_search_query");this.endFunnel(p)}f.exports={startFunnel:i,logResultSelection:l,endFunnel:j,logContentSearchInitiation:k,logLoadingStateQuery:m,logUpdateQuery:n,logClearQuery:o}}),null);
__d("MessengerSearchFunnelLoggerConstants",[],(function a(b,c,d,e,f,g){"use strict";f.exports={NAME:"WWW_MESSENGER_SEARCH_SESSION_FUNNEL",FETCHED_STATE_IMPRESSION_LIST:"fetched_state_impression_list",FB_SIDEBAR_TAG:"fb_sidebar",USER_CONTACT:"user_contact",USER_NON_CONTACT:"user_non_contact",GROUP:"group",PAGE:"page",GAME:"game",TINCAN:"tincan",SMS:"sms",SMS_GROUP:"sms_group",COWORKER:"coworker",OTHER:"other"}}),null);
__d("FBRTCIceStatsParser",[],(function a(b,c,d,e,f,g){var h=null;i.getInstance=function(){"use strict";if(!h)h=new i();return h};function i(){"use strict"}i.prototype.extractIceInfo=function(j){"use strict";var k=[],l=j.split("\r\n");for(var m=0;m<l.length;m++){var n=l[m];if(this.$FBRTCIceStatsParser1(n))k.push({gen:this.$FBRTCIceStatsParser2(n),type:this.$FBRTCIceStatsParser3(n)})}return k};i.prototype.$FBRTCIceStatsParser1=function(j){"use strict";return j.indexOf("candidate:")>-1};i.prototype.$FBRTCIceStatsParser2=function(j){"use strict";var k=0,l=j.match(/generation (\d+)/);if(l)k=parseInt(l[1],10);return k};i.prototype.$FBRTCIceStatsParser3=function(j){"use strict";var k=j.match(/typ (host|relay|srflx|prflx)/);if(k)return k[1];else return"unknown"};f.exports=i}),null);
__d("FBRTCCallSummary",["FBRTCConstants","FBRTCIceStatsParser","FBRTCLogger","FBRTCUtils","SiteData","UserAgentData","performanceNow"],(function a(b,c,d,e,f,g){var h=5*60*1e3,i={CALL_STARTED:"started",POPUP_OPENED:"opened",SENT_OFFER:"s_o",RECV_OFFER:"r_o",SENT_OFFER_ACK:"s_oack",RECV_OFFER_ACK:"r_oack",SENT_RETRIED_OFFER:"s_o2",RECV_RETRIED_OFFER:"r_o2",SENT_RETRIED_OFFER_ACK:"s_oack2",RECV_RETRIED_OFFER_ACK:"r_oack2",SENT_PRANSWER:"s_pr",RECV_PRANSWER:"r_pr",NETWORK_READY:"network_ready",SENT_ANSWER:"s_a",RECV_ANSWER:"r_a",SENT_ANSWER_ACK:"s_aack",RECV_ANSWER_ACK:"r_aack",SENT_RETRIED_ANSWER:"s_a2",RECV_RETRIED_ANSWER:"r_a2",SENT_RETRIED_ANSWER_ACK:"s_aack2",RECV_RETRIED_ANSWER_ACK:"r_aack2",SENT_OK:"s_ok",RECV_OK:"r_ok",CALL_CONNECTED:"connected",CALL_ENDED:"ended"};j.CURRENT_SUMMARY_VERSION=19;function j(k){"use strict";this.peerID=k.peerID;this.callID=k.callID;this.$FBRTCCallSummary1=k.isCaller;this.$FBRTCCallSummary2=c("FBRTCUtils").getLocalUploadLogLevel();this.$FBRTCCallSummary3=new Date().valueOf();this.$FBRTCCallSummary4=null;this.$FBRTCCallSummary5={};this.$FBRTCCallSummary6=null;this.$FBRTCCallSummary7=null;this.$FBRTCCallSummary8=null;this.$FBRTCCallSummary9=null;this.$FBRTCCallSummary10=null;this.$FBRTCCallSummary11=null;this.$FBRTCCallSummary12={};this.$FBRTCCallSummary13={};this.$FBRTCCallSummary14={};this.$FBRTCCallSummary15={};this.$FBRTCCallSummary16={};this.$FBRTCCallSummary17={};this.$FBRTCCallSummary18=null;this.$FBRTCCallSummary19=c("performanceNow")();this.$FBRTCCallSummary20=0;this.$FBRTCCallSummary21={};this.$FBRTCCallSummary22=this.$FBRTCCallSummary19;this.$FBRTCCallSummary23=0;this.$FBRTCCallSummary24={};this.addExtraInfo(c("FBRTCLogger").Key.DEVICE_INFO,this.$FBRTCCallSummary25());this.$FBRTCCallSummary26();this.$FBRTCCallSummary27=c("FBRTCIceStatsParser").getInstance();this.$FBRTCCallSummary28=c("FBRTCLogger").getInstance()}j.prototype.toJsonString=function(){"use strict";this.$FBRTCCallSummary10=new Date().valueOf();return JSON.stringify({version:j.CURRENT_SUMMARY_VERSION,peerID:this.peerID,callID:this.callID,isCaller:this.$FBRTCCallSummary1,uploadLogLevel:this.$FBRTCCallSummary2,clientVersion:this.$FBRTCCallSummary18,callType:this.$FBRTCCallSummary29,isUsingMultiway:this.$FBRTCCallSummary30,conferenceName:this.$FBRTCCallSummary31,serverInfoData:this.$FBRTCCallSummary32,localVideoDuration:this.$FBRTCCallSummary33,remoteVideoDuration:this.$FBRTCCallSummary34,startTime:this.$FBRTCCallSummary3,trigger:this.$FBRTCCallSummary4,signalingTime:this.$FBRTCCallSummary5,endCallReason:this.$FBRTCCallSummary6,endCallSubreason:this.$FBRTCCallSummary7,isRemoteEnded:this.$FBRTCCallSummary8,lastUpdatedTime:this.$FBRTCCallSummary9,lastSerializedTime:this.$FBRTCCallSummary10,unsetOnRetrieve:this.$FBRTCCallSummary11,openCount:this.$FBRTCCallSummary23,extraInfo:this.$FBRTCCallSummary24,pcStats:this.$FBRTCCallSummary12,captureStats:this.$FBRTCCallSummary13,gen0IceSentCount:this.$FBRTCCallSummary14,gen0IceReceivedCount:this.$FBRTCCallSummary15,iceSentCount:this.$FBRTCCallSummary16,iceReceivedCount:this.$FBRTCCallSummary17,newSignalingTime:this.$FBRTCCallSummary21,accumulatedCallTime:this.$FBRTCCallSummary35()})};j.fromJsonString=function(k){"use strict";var l;try{l=JSON.parse(k)}catch(m){return null}if(l.version!==j.CURRENT_SUMMARY_VERSION)return null;if(!Object.prototype.hasOwnProperty.call(l,"peerID")||!Object.prototype.hasOwnProperty.call(l,"callID")||!Object.prototype.hasOwnProperty.call(l,"isCaller")||!Object.prototype.hasOwnProperty.call(l,"startTime")||!Object.prototype.hasOwnProperty.call(l,"trigger")||!Object.prototype.hasOwnProperty.call(l,"signalingTime")||!Object.prototype.hasOwnProperty.call(l,"endCallReason")||!Object.prototype.hasOwnProperty.call(l,"isRemoteEnded")||!Object.prototype.hasOwnProperty.call(l,"lastUpdatedTime")||!Object.prototype.hasOwnProperty.call(l,"lastSerializedTime"))return null;var n=new j({peerID:l.peerID,callID:l.callID,isCaller:l.isCaller});n.$FBRTCCallSummary2=l.uploadLogLevel;n.$FBRTCCallSummary18=l.clientVersion;n.$FBRTCCallSummary3=l.startTime;n.$FBRTCCallSummary4=l.trigger;n.$FBRTCCallSummary5=l.signalingTime;n.$FBRTCCallSummary6=l.endCallReason;n.$FBRTCCallSummary7=l.endCallSubreason;n.$FBRTCCallSummary8=l.isRemoteEnded;n.$FBRTCCallSummary9=l.lastUpdatedTime;n.$FBRTCCallSummary10=l.lastSerializedTime;if(l.callType)n.$FBRTCCallSummary29=l.callType;if(l.isUsingMultiway!=null)n.$FBRTCCallSummary30=l.isUsingMultiway;if(l.conferenceName)n.$FBRTCCallSummary31=l.conferenceName;if(l.serverInfoData)n.$FBRTCCallSummary32=l.serverInfoData;if(l.localVideoDuration)n.$FBRTCCallSummary33=l.localVideoDuration;if(l.remoteVideoDuration)n.$FBRTCCallSummary34=l.remoteVideoDuration;if(l.unsetOnRetrieve)n.$FBRTCCallSummary11=l.unsetOnRetrieve;if(l.openCount)n.$FBRTCCallSummary23=l.openCount;if(l.extraInfo)n.$FBRTCCallSummary24=l.extraInfo;if(l.pcStats)n.$FBRTCCallSummary12=l.pcStats;if(l.captureStats)n.$FBRTCCallSummary13=l.captureStats;if(l.gen0IceSentCount)n.$FBRTCCallSummary14=l.gen0IceSentCount;if(l.gen0IceReceivedCount)n.$FBRTCCallSummary15=l.gen0IceReceivedCount;if(l.iceSentCount)n.$FBRTCCallSummary16=l.iceSentCount;if(l.iceReceivedCount)n.$FBRTCCallSummary17=l.iceReceivedCount;if(l.newSignalingTime)n.$FBRTCCallSummary21=l.newSignalingTime;if(l.accumulatedCallTime)n.$FBRTCCallSummary20=l.accumulatedCallTime;return n};j.restoreOrInitialize=function(k,l,m,n,o){"use strict";var p=k.retrieveCallSummary(l,m);if(!p){p=new j({peerID:l,callID:m,isCaller:n});if(o){p.onFullMessageReceived({msg:o});p.onOfferAckSent(o)}else p.onCallStarted(c("FBRTCLogger").Trigger.UNKNOWN);c("FBRTCLogger").getInstance().logError(l,m,"Missing call summary from storage")}else if(p.$FBRTCCallSummary11){p.$FBRTCCallSummary6=null;p.$FBRTCCallSummary7=null;p.$FBRTCCallSummary8=null;delete p.$FBRTCCallSummary5[i.CALL_ENDED];delete p.$FBRTCCallSummary21[i.CALL_ENDED];p.$FBRTCCallSummary11=null}return p};j.logSavedSummaries=function(k){"use strict";var l=k.getLoggableSummaries(),m=l.length;if(m<=0)return;var n=c("FBRTCLogger").getInstance(),o=[];for(var p=0;p<m;p++){var q=l[p];n.logEndCallSummary(q);o.push({peerID:q.peerID,callID:q.callID})}k.removeCallSummaries(o);n.logToConsole("Logged pending summaries: "+m)};j.prototype.save=function(k){"use strict";var l=c("performanceNow")(),m=l-this.$FBRTCCallSummary22;if(m>h){this.$FBRTCCallSummary28.logInfo(this.peerID,this.callID,"Summary too old: "+m);return}k.storeCallSummary(this.peerID,this.callID,this);this.$FBRTCCallSummary22=l};j.prototype.getLastUpdatedTime=function(){"use strict";return this.$FBRTCCallSummary9};j.prototype.setLastUpdatedTime=function(k){"use strict";this.$FBRTCCallSummary9=k};j.prototype.getExtraInfo=function(){"use strict";return this.$FBRTCCallSummary24};j.prototype.addExtraInfo=function(k,l){"use strict";this.$FBRTCCallSummary24[k]=l;this.$FBRTCCallSummary26()};j.prototype.isCaller=function(){"use strict";return this.$FBRTCCallSummary1};j.prototype.isNetworkReady=function(){"use strict";if(this.$FBRTCCallSummary5[i.NETWORK_READY])return true;else return false};j.prototype.isAnswerReceived=function(){"use strict";if(this.$FBRTCCallSummary5[i.RECV_ANSWER])return true;else return false};j.prototype.onCallStarted=function(k){"use strict";this.$FBRTCCallSummary4=k;this.$FBRTCCallSummary36(i.CALL_STARTED);this.$FBRTCCallSummary26()};j.prototype.onPopupOpened=function(){"use strict";this.$FBRTCCallSummary36(i.POPUP_OPENED);this.$FBRTCCallSummary23++;this.$FBRTCCallSummary26()};j.prototype.setPcStats=function(k){"use strict";this.$FBRTCCallSummary12=k;this.$FBRTCCallSummary26()};j.prototype.setVideoCaptureStats=function(k,l){"use strict";this.$FBRTCCallSummary13={w:k,h:l};this.$FBRTCCallSummary26()};j.prototype.setUploadLogLevel=function(k){"use strict";this.$FBRTCCallSummary2=k;this.$FBRTCCallSummary26()};j.prototype.getCallType=function(){"use strict";return this.$FBRTCCallSummary29};j.prototype.setCallType=function(k){"use strict";this.$FBRTCCallSummary29=k;this.addExtraInfo("call_type",k);this.$FBRTCCallSummary26()};j.prototype.setVideoDurations=function(k,l){"use strict";this.$FBRTCCallSummary33=k;this.$FBRTCCallSummary34=l;this.$FBRTCCallSummary26()};j.prototype.setIsUsingMultiway=function(k){"use strict";this.$FBRTCCallSummary30=k;this.$FBRTCCallSummary26()};j.prototype.setConferenceName=function(k){"use strict";this.$FBRTCCallSummary31=k;this.$FBRTCCallSummary26()};j.prototype.setServerInfoData=function(k){"use strict";this.$FBRTCCallSummary32=k;this.$FBRTCCallSummary26()};j.prototype.onOfferAckSent=function(k){"use strict";this.onMessageSent({type:c("FBRTCConstants").PayloadType.OFFER_ACK,flag:k.flag})};j.prototype.onMessageSent=function(k){"use strict";var l=k.flag===1;switch(k.type){case c("FBRTCConstants").PayloadType.OFFER:this.$FBRTCCallSummary37(l,i.SENT_OFFER,i.SENT_RETRIED_OFFER);this.$FBRTCCallSummary38(k,this.$FBRTCCallSummary14,this.$FBRTCCallSummary16);break;case c("FBRTCConstants").PayloadType.ANSWER:this.$FBRTCCallSummary37(l,i.SENT_ANSWER,i.SENT_RETRIED_ANSWER);this.$FBRTCCallSummary38(k,this.$FBRTCCallSummary14,this.$FBRTCCallSummary16);break;case c("FBRTCConstants").PayloadType.OK:this.$FBRTCCallSummary36(i.SENT_OK);break;case c("FBRTCConstants").PayloadType.PRANSWER:this.$FBRTCCallSummary36(i.SENT_PRANSWER);break;case c("FBRTCConstants").PayloadType.OFFER_ACK:this.$FBRTCCallSummary37(l,i.SENT_OFFER_ACK,i.SENT_RETRIED_OFFER_ACK);break;case c("FBRTCConstants").PayloadType.ANSWER_ACK:this.$FBRTCCallSummary37(l,i.SENT_ANSWER_ACK,i.SENT_RETRIED_ANSWER_ACK);break;case c("FBRTCConstants").PayloadType.ICE_CANDIDATE:this.$FBRTCCallSummary38(k,this.$FBRTCCallSummary14,this.$FBRTCCallSummary16);break;default:}this.$FBRTCCallSummary26()};j.prototype.$FBRTCCallSummary38=function(k,l,m){"use strict";var n=null,o=null,p=this.$FBRTCCallSummary27.extractIceInfo(k.sdp);for(var q=0;q<p.length;q++){n=p[q].gen;o=p[q].type;if(n===0)this.$FBRTCCallSummary39(l,o);this.$FBRTCCallSummary39(m,o)}};j.prototype.$FBRTCCallSummary39=function(k,l){"use strict";if(!k[l])k[l]=1;else k[l]=k[l]+1};j.prototype.$FBRTCCallSummary40=function(k){"use strict";if(k.isFromMobile())this.addExtraInfo(c("FBRTCLogger").Key.PEER_IS_MOBILE,"1")};j.prototype.onFullMessageReceived=function(k){"use strict";var l=k.msg,m=l.flag===1;switch(l.type){case c("FBRTCConstants").PayloadType.OFFER:this.$FBRTCCallSummary40(k);this.$FBRTCCallSummary37(m,i.RECV_OFFER,i.RECV_RETRIED_OFFER);this.$FBRTCCallSummary38(l,this.$FBRTCCallSummary15,this.$FBRTCCallSummary17);break;case c("FBRTCConstants").PayloadType.ANSWER:this.$FBRTCCallSummary40(k);this.$FBRTCCallSummary37(m,i.RECV_ANSWER,i.RECV_RETRIED_ANSWER);this.$FBRTCCallSummary38(l,this.$FBRTCCallSummary15,this.$FBRTCCallSummary17);break;case c("FBRTCConstants").PayloadType.OK:this.$FBRTCCallSummary36(i.RECV_OK);break;case c("FBRTCConstants").PayloadType.PRANSWER:this.$FBRTCCallSummary36(i.RECV_PRANSWER);break;case c("FBRTCConstants").PayloadType.OFFER_ACK:this.$FBRTCCallSummary37(m,i.RECV_OFFER_ACK,i.RECV_RETRIED_OFFER_ACK);break;case c("FBRTCConstants").PayloadType.ANSWER_ACK:this.$FBRTCCallSummary37(m,i.RECV_ANSWER_ACK,i.RECV_RETRIED_ANSWER_ACK);break;case c("FBRTCConstants").PayloadType.ICE_CANDIDATE:this.$FBRTCCallSummary38(l,this.$FBRTCCallSummary15,this.$FBRTCCallSummary17);break;default:}this.$FBRTCCallSummary26()};j.prototype.onMsgAckReceived=function(k,l){"use strict";var m=k.msg.flag===1;if(l)this.$FBRTCCallSummary37(m,i.RECV_OFFER_ACK,i.RECV_RETRIED_OFFER_ACK);else this.$FBRTCCallSummary37(m,i.RECV_ANSWER_ACK,i.RECV_RETRIED_ANSWER_ACK)};j.prototype.onNetworkReady=function(){"use strict";this.$FBRTCCallSummary36(i.NETWORK_READY);this.$FBRTCCallSummary26()};j.prototype.onCallConnected=function(){"use strict";this.$FBRTCCallSummary36(i.CALL_CONNECTED);this.$FBRTCCallSummary26()};j.prototype.onCallEnded=function(k,l,m,n){"use strict";this.$FBRTCCallSummary11=m;this.$FBRTCCallSummary6=k;this.$FBRTCCallSummary7=n;this.$FBRTCCallSummary8=l;this.$FBRTCCallSummary36(i.CALL_ENDED);this.$FBRTCCallSummary26()};j.prototype.setOfferSentTime=function(){"use strict";this.$FBRTCCallSummary36(i.SENT_OFFER)};j.prototype.setOfferAckReceivedTime=function(){"use strict";this.$FBRTCCallSummary36(i.RECV_OFFER_ACK)};j.prototype.setAnswerSentTime=function(){"use strict";this.$FBRTCCallSummary36(i.SENT_ANSWER)};j.prototype.setAnswerReceivedTime=function(){"use strict";this.$FBRTCCallSummary36(i.RECV_ANSWER)};j.prototype.toString=function(){"use strict";var k={};k.core_metrics=this.$FBRTCCallSummary41();k.time_series=null;return JSON.stringify(k)};j.prototype.$FBRTCCallSummary41=function(){"use strict";var k={};k.ver=j.CURRENT_SUMMARY_VERSION;k.log_level=c("FBRTCConstants").uploadLogLevelString(this.$FBRTCCallSummary2);k.caller=this.$FBRTCCallSummary1;k.call_type=this.$FBRTCCallSummary29;k.is_using_multiway=this.$FBRTCCallSummary30;k.conf_name=this.$FBRTCCallSummary31;k.serv_info=this.$FBRTCCallSummary32;k.conn=this.$FBRTCCallSummary42();k.peer_id=this.peerID;k.has_video=true;k.open_count=this.$FBRTCCallSummary23;k.signaling=this.$FBRTCCallSummary43();k.sender=this.$FBRTCCallSummary44();k.receiver=this.$FBRTCCallSummary45();k.end=this.$FBRTCCallSummary46();k.video=this.$FBRTCCallSummary47();k.push_phase=c("SiteData").push_phase;k.client_version=this.$FBRTCCallSummary18;return k};j.prototype.$FBRTCCallSummary42=function(){"use strict";var k={dtls:1};if(this.$FBRTCCallSummary12.sender&&this.$FBRTCCallSummary12.sender.rtt)k.rtt=this.$FBRTCCallSummary12.sender.rtt;return k};j.prototype.$FBRTCCallSummary43=function(){"use strict";var k={};if(this.$FBRTCCallSummary4)k.trigger=this.$FBRTCCallSummary4;k.start_time=this.$FBRTCCallSummary3;k.time_from_start=this.$FBRTCCallSummary5;var l=this.$FBRTCCallSummary5[i.CALL_CONNECTED],m=this.$FBRTCCallSummary5[i.CALL_ENDED];if(l){if(!m)if(this.$FBRTCCallSummary10)m=this.$FBRTCCallSummary10-this.$FBRTCCallSummary3;else m=this.$FBRTCCallSummary48();var n=m-l;if(n>0)k.duration=n}k.new_time_from_start=this.$FBRTCCallSummary21;l=this.$FBRTCCallSummary21[i.CALL_CONNECTED];m=this.$FBRTCCallSummary21[i.CALL_ENDED];if(l){if(!m)if(this.$FBRTCCallSummary20>0)m=this.$FBRTCCallSummary20;else m=this.$FBRTCCallSummary35();n=m-l;if(n>0)k.new_duration=n}return k};j.prototype.$FBRTCCallSummary44=function(){"use strict";var k={};if(this.$FBRTCCallSummary14)k.ice_g0=this.$FBRTCCallSummary14;if(this.$FBRTCCallSummary16)k.ice=this.$FBRTCCallSummary16;if(this.$FBRTCCallSummary12.sender)Object.assign(k,this.$FBRTCCallSummary12.sender);return k};j.prototype.$FBRTCCallSummary45=function(){"use strict";var k={};if(this.$FBRTCCallSummary15)k.ice_g0=this.$FBRTCCallSummary15;if(this.$FBRTCCallSummary17)k.ice=this.$FBRTCCallSummary17;return k};j.prototype.$FBRTCCallSummary46=function(){"use strict";var k={};if(this.$FBRTCCallSummary6!==null){k.end_call_reason_string=c("FBRTCConstants").callEndReasonString(this.$FBRTCCallSummary6);if(this.$FBRTCCallSummary7!==null)k.end_call_subreason_string=this.$FBRTCCallSummary7;k.remote_ended=this.$FBRTCCallSummary8}if(this.$FBRTCCallSummary12.end)Object.assign(k,this.$FBRTCCallSummary12.end);return k};j.prototype.$FBRTCCallSummary47=function(){"use strict";var k={capture:{}};if(this.$FBRTCCallSummary12.video&&this.$FBRTCCallSummary12.video.sender)Object.assign(k,this.$FBRTCCallSummary12.video.sender);if(this.$FBRTCCallSummary13)Object.assign(k.capture,this.$FBRTCCallSummary13);return{sender:k,ld:this.$FBRTCCallSummary33,rd:this.$FBRTCCallSummary34}};j.prototype.$FBRTCCallSummary48=function(){"use strict";return new Date().valueOf()-this.$FBRTCCallSummary3};j.prototype.$FBRTCCallSummary35=function(){"use strict";var k=c("performanceNow")()-this.$FBRTCCallSummary19;return Math.floor(this.$FBRTCCallSummary20+k)};j.prototype.$FBRTCCallSummary36=function(k){"use strict";if(this.$FBRTCCallSummary5[k])return;this.$FBRTCCallSummary5[k]=this.$FBRTCCallSummary48();this.$FBRTCCallSummary21[k]=this.$FBRTCCallSummary35()};j.prototype.$FBRTCCallSummary37=function(k,l,m){"use strict";if(k)this.$FBRTCCallSummary36(m);else this.$FBRTCCallSummary36(l)};j.prototype.$FBRTCCallSummary26=function(){"use strict";this.$FBRTCCallSummary9=new Date().valueOf()};j.prototype.$FBRTCCallSummary25=function(){"use strict";return{device:c("UserAgentData").deviceName,os:c("UserAgentData").platformName,os_version:c("UserAgentData").platformFullVersion,browser:c("UserAgentData").browserName,browser_version:c("UserAgentData").browserFullVersion,screen_height:window.screen.availHeight,screen_width:window.screen.availWidth}};j.prototype.setClientVersion=function(k){"use strict";this.$FBRTCCallSummary18=k};f.exports=j}),null);
__d("FBRTCCallSummaryStore",["CacheStorage","FBRTCCallSummary","FBRTCLogger","areEqual"],(function a(b,c,d,e,f,g){var h="localstorage",i="RTC_CALL_SUMMARY_",j="summary",k=2e3,l=3,m=3*60*1e3,n=null;o.getInstance=function(){"use strict";if(!n)n=new o();return n};function o(){"use strict";this.$FBRTCCallSummaryStore1=new(c("CacheStorage"))(h,i);this.$FBRTCCallSummaryStore2=c("FBRTCLogger").getInstance()}o.prototype.storeCallSummary=function(p,q,r){"use strict";var s=this;this.$FBRTCCallSummaryStore3(function(t){if(!t[p])t[p]={};var u=t[p][q];if(u){var v=s.$FBRTCCallSummaryStore4(u);if(v&&v.getLastUpdatedTime()>r.getLastUpdatedTime()){s.$FBRTCCallSummaryStore2.logToConsole("Outdated summaries");return null}}t[p][q]=s.$FBRTCCallSummaryStore5(r);return t},s.$FBRTCCallSummaryStore2.logError.bind(s.$FBRTCCallSummaryStore2,p,q))};o.prototype.retrieveCallSummary=function(p,q){"use strict";var r=this.$FBRTCCallSummaryStore6(),s=null;if(r[p])s=r[p][q];if(s)return this.$FBRTCCallSummaryStore4(s);else return null};o.prototype.removeCallSummary=function(p,q){"use strict";this.removeCallSummaries([{peerID:p,callID:q}])};o.prototype.removeCallSummaries=function(p){"use strict";var q=this;this.$FBRTCCallSummaryStore3(function(r){var s=p.length;for(var t=0;t<s;t++){var u=p[t].peerID,v=p[t].callID;if(r[u]&&r[u][v]){delete r[u][v];if(q.$FBRTCCallSummaryStore7(r[u]))delete r[u]}}return r},q.$FBRTCCallSummaryStore2.logError.bind(q.$FBRTCCallSummaryStore2,null,null))};o.prototype.getLoggableSummaries=function(){"use strict";var p=this.$FBRTCCallSummaryStore6(),q=[];for(var r in p)if(Object.prototype.hasOwnProperty.call(p,r))for(var s in p[r])if(Object.prototype.hasOwnProperty.call(p[r],s)){var t=this.$FBRTCCallSummaryStore4(p[r][s],m);if(t)q.push(t)}return q};o.prototype.$FBRTCCallSummaryStore7=function(p){"use strict";for(var q in p)if(Object.prototype.hasOwnProperty.call(p,q))return false;return true};o.prototype.$FBRTCCallSummaryStore5=function(p){"use strict";var q={__t:Date.now(),__d:p.toJsonString()};return q};o.prototype.$FBRTCCallSummaryStore4=function(p,q){"use strict";if(p)if(!q||Date.now()-p.__t>=q)return c("FBRTCCallSummary").fromJsonString(p.__d);return null};o.prototype.$FBRTCCallSummaryStore6=function(){"use strict";var p=this.$FBRTCCallSummaryStore1.get(j)||{};return p};o.prototype.$FBRTCCallSummaryStore3=function(p,q,r,s){"use strict";if(r===undefined||r===null)r=l;var t=this.$FBRTCCallSummaryStore6(),u=this.$FBRTCCallSummaryStore6(),v=p(t);if(v===null)return;var w=this.$FBRTCCallSummaryStore6();if(c("areEqual")(u,w)){this.$FBRTCCallSummaryStore1.set(j,v);this.$FBRTCCallSummaryStore2.logToConsole("Updated summaries")}else if(r>0){q("Retry lock");if(s){var x=this;setTimeout(function(){x.$FBRTCCallSummaryStore3(p,q,r-1,true)},k)}else this.$FBRTCCallSummaryStore3(p,q,r-1,true)}else q("Failed to lock")};f.exports=o}),null);
__d("FBRTCCallSummaryUploader",["Banzai","FBRTCCallSummary","FBRTCCallSummaryStore"],(function a(b,c,d,e,f,g){var h={init:function i(){var j=c("FBRTCCallSummaryStore").getInstance();c("Banzai").subscribe(c("Banzai").SEND,function(){c("FBRTCCallSummary").logSavedSummaries(j)})}};f.exports=h}),null);
__d("FBRTCCallabilityActions",["keyMirror"],(function a(b,c,d,e,f,g){"use strict";var h=c("keyMirror")({CALLABILITY_FETCHED:null,CALLABILITY_FETCH_ERROR:null});function i(j){this.$FBRTCCallabilityActions1=j}i.prototype.callabilityFetched=function(j,k){this.$FBRTCCallabilityActions1.dispatch({type:h.CALLABILITY_FETCHED,userID:j,callability:k})};i.prototype.callabilityFetchError=function(j){this.$FBRTCCallabilityActions1.dispatch({type:h.CALLABILITY_FETCH_ERROR,userID:j})};i.Types=h;f.exports=i}),null);
__d("XRTCCallabilityController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/rtc/callability/",{user_id:{type:"FBID",required:true}})}),null);
__d("FBRTCCallabilityDataManager",["AsyncRequest","FBRTCCallabilityActions","TimeSlice","XRTCCallabilityController"],(function a(b,c,d,e,f,g){"use strict";function h(i){this.$FBRTCCallabilityDataManager1=new(c("FBRTCCallabilityActions"))(i)}h.prototype.fetchCallability=function(i){c("TimeSlice").guard(function(){var j=c("XRTCCallabilityController").getURIBuilder().setFBID("user_id",i).getURI(),k=this.$FBRTCCallabilityDataManager2.bind(this,i),l=this.$FBRTCCallabilityDataManager3.bind(this,i);new(c("AsyncRequest"))().setURI(j).setHandler(k).setErrorHandler(l).setAllowCrossPageTransition(true).send()}.bind(this),"Chat Tab RTC Callability Check",{isContinuation:false})()};h.prototype.$FBRTCCallabilityDataManager2=function(i,j){this.$FBRTCCallabilityDataManager1.callabilityFetched(i,j.payload)};h.prototype.$FBRTCCallabilityDataManager3=function(i,j){this.$FBRTCCallabilityDataManager1.callabilityFetchError(i)};f.exports=h}),null);
__d("RTCCallabilityStore",["fbt","Cache","FBRTCAvailability","FluxStore","FBRTCCallabilityActions","FBRTCCallabilityDataManager","RTCConfig"],(function a(b,c,d,e,f,g,h){"use strict";var i,j,k=.5,l=5;i=babelHelpers.inherits(m,c("FluxStore"));j=i&&i.prototype;function m(n){j.constructor.call(this,n);this.$RTCCallabilityStore2=new(c("FBRTCCallabilityDataManager"))(n);this.$RTCCallabilityStore1=new(c("Cache"))()}m.prototype.__onDispatch=function(n){var o=n.type;switch(o){case c("FBRTCCallabilityActions").Types.CALLABILITY_FETCHED:var p=n.userID,q=n.callability;this.$RTCCallabilityStore1.set(p,q.is_callable,null,q.is_callable?l:k);this.__emitChange();break;case c("FBRTCCallabilityActions").Types.CALLABILITY_FETCH_ERROR:this.$RTCCallabilityStore1.set(n.userID,false,null,k);this.__emitChange();break}};m.prototype.isCallable=function(n){if(c("FBRTCAvailability").isCallable(n))return true;if(!this.$RTCCallabilityStore1.has(n)){this.$RTCCallabilityStore2.fetchCallability(n);this.$RTCCallabilityStore1.set(n,false,null,k)}return!!this.$RTCCallabilityStore1.get(n)};f.exports=m}),null);
__d("ChatSidebarSheetChatOffline.react",["fbt","Link.react","React"],(function a(b,c,d,e,f,g,h){"use strict";var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").PureComponent);j=i&&i.prototype;l.prototype.render=function(){return c("React").createElement("div",null,h._("{=Go online} to see who's available.",[h.param("=Go online",c("React").createElement(c("Link.react"),{className:"fbChatGoOnlineLink",onClick:this.props.onGoOnlineClick},h._("Turn on chat")))]))};function l(){i.apply(this,arguments)}l.propTypes={onGoOnlineClick:k.func.isRequired};f.exports=l}),null);
__d("ChatSidebarSheetChatReconnectMsg.react",["fbt","ChannelConstants","Link.react","MessengerSpinner.react","React"],(function a(b,c,d,e,f,g,h){"use strict";var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").PureComponent);j=i&&i.prototype;l.prototype.render=function(){var m=this.props,n=m.isMessenger,o=m.msecs,p=c("React").createElement(c("Link.react"),{className:"fbChatReconnectLink",onClick:this.props.onManuallyConnectClick},h._("No Internet Connection"));if(o==null||false===navigator.onLine)return n?p:c("React").createElement("div",null,h._("Unable to connect to chat. Check your Internet connection."));else if(o>c("ChannelConstants").WARNING_COUNTDOWN_THRESHOLD_MSEC)return n?p:c("React").createElement("div",null,h._("Unable to connect to chat. {try-again-link}",[h.param("try-again-link",c("React").createElement(c("Link.react"),{className:"fbChatReconnectLink",onClick:this.props.onManuallyConnectClick},h._("Try again")))]));else if(o>1e3)return n?p:c("React").createElement("div",null,h._("Unable to connect to chat. Reconnecting in {seconds}",[h.param("seconds",Math.floor(o/1e3))]));else return n?c("React").createElement("div",null,c("React").createElement(c("MessengerSpinner.react"),{color:"grey"}),h._("Connecting...")):c("React").createElement("div",null,h._("Unable to connect to chat. Reconnecting..."))};function l(){i.apply(this,arguments)}l.propTypes={isMessenger:k.bool,msecs:k.number,onManuallyConnectClick:k.func};f.exports=l}),null);
__d("ChatSidebarSheetChatShutdownMsg.react",["fbt","ChannelConstants","CurrentUser","React"],(function a(b,c,d,e,f,g,h){"use strict";var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").PureComponent);j=i&&i.prototype;l.prototype.render=function(){var m=this.props,n=m.hint,o=m.isMessenger;switch(n){case c("ChannelConstants").HINT_AUTH:return c("React").createElement("div",null,h._("Your session has timed out. Please log in."));case c("ChannelConstants").HINT_MAINT:return o?c("React").createElement("div",null,h._("Messenger is currently down for maintenance.")):c("React").createElement("div",null,h._("{Chat} is currently down for maintenance.",[h.param("Chat",h._("Chat"))]));case c("ChannelConstants").HINT_CONN:default:if(!o)return c("React").createElement("div",null,h._("{Chat} is currently unavailable.",[h.param("Chat",h._("Chat"))]));else if(c("CurrentUser").isWorkUser())return c("React").createElement("div",null,h._("Workplace Chat is currently unavailable."));else return c("React").createElement("div",null,h._("Messenger is currently unavailable."))}};function l(){i.apply(this,arguments)}l.propTypes={hint:k.string,isMessenger:k.bool};f.exports=l}),null);
__d("ChatSidebarSheet.react",["fbt","Arbiter","ChannelConnection","ChatBehavior","ChatSidebarSheetChatOffline.react","ChatSidebarSheetChatReconnectMsg.react","ChatSidebarSheetChatShutdownMsg.react","ChatVisibility","MercuryConfig","MessengerEnvironment","CSS","JSLogger","LogHistory","MercurySyncConstants","PresencePrivacy","React","SubscriptionsHandler","emptyFunction","joinClasses","setTimeoutAcrossTransitions"],(function a(b,c,d,e,f,g,h){"use strict";var i,j,k=c("JSLogger").create("sidebar_sheet"),l=c("LogHistory").getInstance("sidebar_sheet"),m=c("React").PropTypes;i=babelHelpers.inherits(n,c("React").PureComponent);j=i&&i.prototype;function n(o){j.constructor.call(this,o);this.$ChatSidebarSheet3=function(p,q){this.setState({channelStatus:p,channelData:q});this.$ChatSidebarSheet4()}.bind(this);this.$ChatSidebarSheet4=function(){this.setState({isConnected:!c("ChannelConnection").disconnected(),isOnline:c("ChatVisibility").isOnline(),notifiesUserMessages:c("ChatBehavior").notifiesUserMessages()})}.bind(this);this.state={channelStatus:null,channelData:null,isConnected:!c("ChannelConnection").disconnected(),isOnline:c("ChatVisibility").isOnline(),notifiesUserMessages:c("ChatBehavior").notifiesUserMessages(),syncStateInvalid:false,syncStateReconnecting:false}}n.prototype.componentDidMount=function(){this.$ChatSidebarSheet1=new(c("SubscriptionsHandler"))();this.$ChatSidebarSheet1.addSubscriptions(c("ChannelConnection").subscribe([c("ChannelConnection").CONNECTED,c("ChannelConnection").SHUTDOWN,c("ChannelConnection").RECONNECTING],this.$ChatSidebarSheet3),c("ChannelConnection").subscribe([c("ChannelConnection").MUTE_WARNING,c("ChannelConnection").UNMUTE_WARNING],this.$ChatSidebarSheet4),c("PresencePrivacy").subscribe("privacy-user-presence-changed",this.$ChatSidebarSheet4),c("ChatBehavior").subscribe(c("ChatBehavior").ON_CHANGED,this.$ChatSidebarSheet4),c("Arbiter").subscribe(c("MercurySyncConstants").ARBITER_EVENT_INVALID_STATE,function(){l.log("invalid state fatal","{}");this.setState({syncStateInvalid:true,syncStateReconnecting:false})}.bind(this)),c("Arbiter").subscribe(c("MercurySyncConstants").ARBITER_EVENT_INVALID_STATE_RETRY,function(){l.log("retry from invalid state","{}");this.$ChatSidebarSheet5()}.bind(this)),c("Arbiter").subscribe(c("MercurySyncConstants").ARBITER_EVENT_INVALID_STATE_RECOVER,function(){l.log("recover from invalid state","{}");this.$ChatSidebarSheet6()}.bind(this)))};n.prototype.componentWillUpdate=function(){if(this.$ChatSidebarSheet2){clearTimeout(this.$ChatSidebarSheet2);this.$ChatSidebarSheet2=null}};n.prototype.componentWillUnmount=function(){this.$ChatSidebarSheet1&&this.$ChatSidebarSheet1.release()};n.prototype.render=function(){var o=c("MessengerEnvironment").messengerui,p=void 0,q=void 0;if(!this.state.isOnline&&!o){p="offline";q=this.$ChatSidebarSheet7()}else if(!this.state.isConnected||this.state.syncStateInvalid||this.state.syncStateReconnecting){p="error";q=this.$ChatSidebarSheet8(o)}else if(!this.state.notifiesUserMessages&&!o){p="notice";q=this.$ChatSidebarSheet9()}if(this.state.channelStatus===c("ChannelConnection").RECONNECTING&&this.state.channelData<1e3||this.state.syncStateReconnecting)p=c("joinClasses")(p,"reconnecting");return c("React").createElement("div",{className:c("joinClasses")(this.props.className,p)},o?null:c("React").createElement("div",{className:"img"}),c("React").createElement("div",{className:"message"},q))};n.prototype.$ChatSidebarSheet8=function(o){if(this.state.channelStatus===c("ChannelConnection").SHUTDOWN||this.state.syncStateInvalid)return c("React").createElement(c("ChatSidebarSheetChatShutdownMsg.react"),{hint:this.state.syncStateInvalid?undefined:this.state.channelData,isMessenger:o});else if(this.state.channelStatus===c("ChannelConnection").RECONNECTING||this.state.syncStateReconnecting){var p=this.state.syncStateReconnecting?1:this.state.channelData;if(p>1e3)this.$ChatSidebarSheet2=c("setTimeoutAcrossTransitions")(this.$ChatSidebarSheet3.bind(this,c("ChannelConnection").RECONNECTING,p-1e3),1e3);return c("React").createElement(c("ChatSidebarSheetChatReconnectMsg.react"),{isMessenger:o,msecs:p,onManuallyConnectClick:function(){if(!this.state.syncStateReconnecting)c("ChannelConnection").reconnect()}.bind(this)})}return null};n.prototype.$ChatSidebarSheet7=function(){return c("React").createElement(c("ChatSidebarSheetChatOffline.react"),{onGoOnlineClick:function o(p){k.log("sidebar_go_online");c("ChatVisibility").goOnline()}})};n.prototype.$ChatSidebarSheet9=function(){return c("React").createElement("div",null,h._("Alerts are off while you use another client to chat."))};n.prototype.$ChatSidebarSheet5=function(){this.setState({syncStateReconnecting:true})};n.prototype.$ChatSidebarSheet6=function(){this.setState({syncStateInvalid:false,syncStateReconnecting:false})};f.exports=n}),null);
__d("NotificationJewelReminderLoader",[],(function a(b,c,d,e,f,g){f.exports={init:function h(i,j){i.load().done(function(k){k.init(j)})}}}),null);
__d("P2PDialogStore",["EventEmitter","P2PActionConstants","P2PDispatcher"],(function a(b,c,d,e,f,g){"use strict";var h,i,j=void 0,k={};h=babelHelpers.inherits(l,c("EventEmitter"));i=h&&h.prototype;function l(){i.constructor.call(this);j=c("P2PDispatcher").register(this.onEventDispatched.bind(this));k={dialogClass:null,dialogProps:null}}l.prototype.getState=function(){return k};l.prototype.onEventDispatched=function(m){var n=m.type,o=m.data;switch(n){case c("P2PActionConstants").DIALOG_SHOWN:k.dialogClass=o.dialogClass;k.dialogProps=o.dialogProps;this.emit("change");break;case c("P2PActionConstants").DIALOG_CLOSED:k.dialogClass=null;k.dialogProps=null;this.emit("change");break}};f.exports=new l()}),null);
__d("P2PDialogContainer.react",["P2PDialogStore","React"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("React").Component);i=h&&h.prototype;function j(){var k,l;for(var m=arguments.length,n=Array(m),o=0;o<m;o++)n[o]=arguments[o];return l=(k=i.constructor).call.apply(k,[this].concat(n)),this.state=c("P2PDialogStore").getState(),this.onDialogStoreChange=function(){this.setState(c("P2PDialogStore").getState())}.bind(this),l}j.prototype.componentDidMount=function(){this.dialogStoreSub=c("P2PDialogStore").addListener("change",this.onDialogStoreChange)};j.prototype.componentWillUnmount=function(){if(this.dialogStoreSub){this.dialogStoreSub.remove();this.dialogStoreSub=null}};j.prototype.render=function(){if(!this.state.dialogClass)return null;var k=this.state.dialogClass;return c("React").createElement(k,babelHelpers["extends"]({},this.state.dialogProps,{key:"dialog"}))};f.exports=j}),null);
__d("PagesPlatformActionConstants",[],(function a(b,c,d,e,f,g){"use strict";var h={BOOKING_REQUEST_ACCEPT_ERROR:"booking_request_accept_error",BOOKING_REQUEST_ACCEPT_INITIATED:"booking_request_accept_initiated",BOOKING_REQUEST_ACCEPTED:"booking_request_accepted",BOOKING_REQUEST_CREATED:"booking_request_created",BOOKING_REQUEST_DECLINE_ERROR:"booking_request_decline_error",BOOKING_REQUEST_DECLINE_INITIATED:"booking_request_decline_initiated",BOOKING_REQUEST_DECLINED:"booking_request_declined",BOOKING_REQUEST_RESCHEDULE_INITIATED:"booking_request_reschedule_initiated",BOOKING_REQUEST_RESCHEULED:"booking_request_reschedule",DIALOG_CLOSED:"dialog_closed",DIALOG_SHOWN:"dialog_shown",NEW_TIME_CHOSEN:"new_time_chosen"};f.exports=h}),null);
__d("PagesPlatformRequestDispatcher",["Dispatcher_DEPRECATED"],(function a(b,c,d,e,f,g){"use strict";f.exports=new(c("Dispatcher_DEPRECATED"))()}),null);
__d("PagesPlatformDialogStore",["EventEmitter","PagesPlatformActionConstants","PagesPlatformRequestDispatcher"],(function a(b,c,d,e,f,g){"use strict";var h,i,j={};h=babelHelpers.inherits(k,c("EventEmitter"));i=h&&h.prototype;function k(){i.constructor.call(this);c("PagesPlatformRequestDispatcher").register(this.onEventDispatched.bind(this));j={dialogClass:null,dialogProps:null}}k.prototype.getState=function(){return j};k.prototype.onEventDispatched=function(l){var m=l.type,n=l.data;switch(m){case c("PagesPlatformActionConstants").DIALOG_SHOWN:j.dialogClass=n.dialogClass;j.dialogProps=n.dialogProps;this.emit("change");break;case c("PagesPlatformActionConstants").DIALOG_CLOSED:j.dialogClass=null;j.dialogProps=null;this.emit("change");break}};f.exports=new k()}),null);
__d("PagesPlatformDialogContainer.react",["PagesPlatformDialogStore","PureStoreBasedStateMixin","React"],(function a(b,c,d,e,f,g){"use strict";var h=c("React").createClass({displayName:"PagesPlatformDialogContainer",mixins:[c("PureStoreBasedStateMixin")(c("PagesPlatformDialogStore"))],statics:{calculateState:function i(){return c("PagesPlatformDialogStore").getState()}},render:function i(){if(!this.state.dialogClass)return null;var j=this.state.dialogClass;return c("React").createElement(j,babelHelpers["extends"]({},this.state.dialogProps,{key:"dialog"}))}});f.exports=h}),null);
__d("FBPaymentsDispatcher",["ExplicitRegistrationReactDispatcher"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("ExplicitRegistrationReactDispatcher"));i=h&&h.prototype;function j(k){i.constructor.call(this,k);this.dispatch=this.dispatch.bind(this)}f.exports=new j({strict:false})}),null);
__d("FBPaymentsDialogActions",["FBPaymentsDispatcher","keyMirror"],(function a(b,c,d,e,f,g){"use strict";var h={types:c("keyMirror")({SHOW_DIALOG:null,HIDE_DIALOG:null}),showDialog:function i(j,k){c("FBPaymentsDispatcher").dispatch({type:h.types.SHOW_DIALOG,data:{dialogClass:j,dialogProps:k}})},hideDialog:function i(){c("FBPaymentsDispatcher").dispatch({type:h.types.HIDE_DIALOG,data:{}})}};f.exports=h}),null);
__d("FBPaymentsDialogStore",["FBPaymentsDialogActions","FBPaymentsDispatcher","FluxStore"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("FluxStore"));i=h&&h.prototype;function j(){i.constructor.call(this,c("FBPaymentsDispatcher"));this.$FBPaymentsDialogStore1={dialogClass:null,dialogProps:null}}j.prototype.__onDispatch=function(k){var l=k.type,m=k.data;switch(l){case c("FBPaymentsDialogActions").types.SHOW_DIALOG:this.$FBPaymentsDialogStore1={dialogClass:m.dialogClass,dialogProps:m.dialogProps};this.__emitChange();break;case c("FBPaymentsDialogActions").types.HIDE_DIALOG:this.$FBPaymentsDialogStore1={dialogClass:null,dialogProps:null};this.__emitChange();break}};j.prototype.getState=function(){return this.$FBPaymentsDialogStore1};f.exports=new j()}),null);
__d("FBPaymentsDialogContainer.react",["FBPaymentsDialogStore","FBPaymentsDispatcher","FluxContainer","React"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("React").Component);i=h&&h.prototype;j.calculateState=function(){return c("FBPaymentsDialogStore").getState()};j.getStores=function(){return[c("FBPaymentsDialogStore")]};j.prototype.componentWillMount=function(){c("FBPaymentsDispatcher").explicitlyRegisterStore(c("FBPaymentsDialogStore"))};j.prototype.render=function(){if(!this.state.dialogClass)return null;var k=this.state.dialogClass;return c("React").createElement(k,babelHelpers["extends"]({},this.state.dialogProps,{key:"dialog"}))};function j(){h.apply(this,arguments)}f.exports=c("FluxContainer").create(j)}),null);